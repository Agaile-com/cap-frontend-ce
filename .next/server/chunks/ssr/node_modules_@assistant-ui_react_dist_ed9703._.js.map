{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/internal.ts"],"sourcesContent":["export type { ThreadRuntimeCore } from \"./runtimes/core/ThreadRuntimeCore\";\nexport type { ThreadListRuntimeCore } from \"./runtimes/core/ThreadListRuntimeCore\";\nexport { DefaultThreadComposerRuntimeCore } from \"./runtimes/composer/DefaultThreadComposerRuntimeCore\";\nexport { ProxyConfigProvider } from \"./utils/ProxyConfigProvider\";\nexport { MessageRepository } from \"./runtimes/utils/MessageRepository\";\nexport { BaseAssistantRuntimeCore } from \"./runtimes/core/BaseAssistantRuntimeCore\";\nexport { TooltipIconButton } from \"./ui/base/tooltip-icon-button\";\nexport { generateId } from \"./utils/idUtils\";\nexport { AssistantRuntimeImpl } from \"./api/AssistantRuntime\";\nexport {\n  ThreadRuntimeImpl,\n  type ThreadRuntimeCoreBinding,\n  type ThreadListItemRuntimeBinding,\n} from \"./api/ThreadRuntime\";\n\nexport * from \"./utils/smooth\";\n"],"names":[],"mappings":"","ignoreList":[0]}},
    {"offset": {"line": 20, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/api/subscribable/SKIP_UPDATE.ts"],"sourcesContent":["export const SKIP_UPDATE = Symbol(\"skip-update\");\nexport type SKIP_UPDATE = typeof SKIP_UPDATE;\n"],"names":[],"mappings":";;;;AAAO,IAAM,cAAc,OAAO,aAAa","ignoreList":[0]}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/api/subscribable/BaseSubject.ts"],"sourcesContent":["import { Unsubscribe } from \"../../types/Unsubscribe\";\n\nexport abstract class BaseSubject {\n  private _subscriptions = new Set<() => void>();\n  private _connection: Unsubscribe | undefined;\n\n  protected get isConnected() {\n    return !!this._connection;\n  }\n\n  protected abstract _connect(): Unsubscribe;\n\n  protected notifySubscribers() {\n    for (const callback of this._subscriptions) callback();\n  }\n\n  private _updateConnection() {\n    if (this._subscriptions.size > 0) {\n      if (this._connection) return;\n      this._connection = this._connect();\n    } else {\n      this._connection?.();\n      this._connection = undefined;\n    }\n  }\n\n  public subscribe(callback: () => void) {\n    this._subscriptions.add(callback);\n    this._updateConnection();\n\n    return () => {\n      this._subscriptions.delete(callback);\n      this._updateConnection();\n    };\n  }\n}\n"],"names":[],"mappings":";;;;AAEO,IAAe,cAAf,MAA2B;IACxB,iBAAiB,aAAA,GAAA,IAAI,IAAgB,EAAA;IACrC,YAAA;IAER,IAAc,cAAc;QAC1B,OAAO,CAAC,CAAC,IAAA,CAAK,WAAA;IAChB;IAIU,oBAAoB;QAC5B,KAAA,MAAW,YAAY,IAAA,CAAK,cAAA,CAAgB,SAAS;IACvD;IAEQ,oBAAoB;QAC1B,IAAI,IAAA,CAAK,cAAA,CAAe,IAAA,GAAO,GAAG;YAChC,IAAI,IAAA,CAAK,WAAA,CAAa,CAAA;YACtB,IAAA,CAAK,WAAA,GAAc,IAAA,CAAK,QAAA,CAAS;QACnC,OAAO;YACL,IAAA,CAAK,WAAA,GAAc;YACnB,IAAA,CAAK,WAAA,GAAc,KAAA;QACrB;IACF;IAEO,UAAU,QAAA,EAAsB;QACrC,IAAA,CAAK,cAAA,CAAe,GAAA,CAAI,QAAQ;QAChC,IAAA,CAAK,iBAAA,CAAkB;QAEvB,OAAO,MAAM;YACX,IAAA,CAAK,cAAA,CAAe,MAAA,CAAO,QAAQ;YACnC,IAAA,CAAK,iBAAA,CAAkB;QACzB;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/api/subscribable/LazyMemoizeSubject.ts"],"sourcesContent":["import { BaseSubject } from \"./BaseSubject\";\nimport { SKIP_UPDATE } from \"./SKIP_UPDATE\";\nimport { SubscribableWithState } from \"./Subscribable\";\n\nexport class LazyMemoizeSubject<TState extends object, TPath>\n  extends BaseSubject\n  implements SubscribableWithState<TState, TPath>\n{\n  public get path() {\n    return this.binding.path;\n  }\n\n  constructor(\n    private binding: SubscribableWithState<TState | SKIP_UPDATE, TPath>,\n  ) {\n    super();\n  }\n\n  private _previousStateDirty = true;\n  private _previousState: TState | undefined;\n  public getState = () => {\n    if (!this.isConnected || this._previousStateDirty) {\n      const newState = this.binding.getState();\n      if (newState !== SKIP_UPDATE) {\n        this._previousState = newState;\n      }\n      this._previousStateDirty = false;\n    }\n    if (this._previousState === undefined)\n      throw new Error(\"Entry not available in the store\");\n    return this._previousState;\n  };\n\n  protected _connect() {\n    const callback = () => {\n      this._previousStateDirty = true;\n      this.notifySubscribers();\n    };\n\n    return this.binding.subscribe(callback);\n  }\n}\n"],"names":[],"mappings":";;;;AACA,SAAS,mBAAmB;AAD5B,SAAS,mBAAmB;;;AAIrB,IAAM,qBAAN,wMACG,cAAA,CAEV;IAKE,YACU,OAAA,CACR;QACA,KAAA,CAAM;QAFE,IAAA,CAAA,OAAA,GAAA;IAGV;IARA,IAAW,OAAO;QAChB,OAAO,IAAA,CAAK,OAAA,CAAQ,IAAA;IACtB;IAQQ,sBAAsB,KAAA;IACtB,eAAA;IACD,WAAW,MAAM;QACtB,IAAI,CAAC,IAAA,CAAK,WAAA,IAAe,IAAA,CAAK,mBAAA,EAAqB;YACjD,MAAM,WAAW,IAAA,CAAK,OAAA,CAAQ,QAAA,CAAS;YACvC,IAAI,sMAAa,eAAA,EAAa;gBAC5B,IAAA,CAAK,cAAA,GAAiB;YACxB;YACA,IAAA,CAAK,mBAAA,GAAsB;QAC7B;QACA,IAAI,IAAA,CAAK,cAAA,KAAmB,KAAA,GAC1B,MAAM,IAAI,MAAM,kCAAkC;QACpD,OAAO,IAAA,CAAK,cAAA;IACd,EAAA;IAEU,WAAW;QACnB,MAAM,WAAW,MAAM;YACrB,IAAA,CAAK,mBAAA,GAAsB;YAC3B,IAAA,CAAK,iBAAA,CAAkB;QACzB;QAEA,OAAO,IAAA,CAAK,OAAA,CAAQ,SAAA,CAAU,QAAQ;IACxC;AACF","ignoreList":[0]}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/api/AttachmentRuntime.ts"],"sourcesContent":["import { SubscribableWithState } from \"./subscribable/Subscribable\";\n\nimport { ComposerRuntimeCoreBinding } from \"./ComposerRuntime\";\nimport {\n  Attachment,\n  CompleteAttachment,\n  PendingAttachment,\n  Unsubscribe,\n} from \"../types\";\nimport { AttachmentRuntimePath } from \"./RuntimePathTypes\";\n\ntype MessageAttachmentState = CompleteAttachment & {\n  readonly source: \"message\";\n};\n\ntype ThreadComposerAttachmentState = PendingAttachment & {\n  readonly source: \"thread-composer\";\n};\n\ntype EditComposerAttachmentState = Attachment & {\n  readonly source: \"edit-composer\";\n};\n\nexport type AttachmentState =\n  | ThreadComposerAttachmentState\n  | EditComposerAttachmentState\n  | MessageAttachmentState;\n\ntype AttachmentSnapshotBinding<Source extends AttachmentRuntimeSource> =\n  SubscribableWithState<\n    AttachmentState & { source: Source },\n    AttachmentRuntimePath & { attachmentSource: Source }\n  >;\n\ntype AttachmentRuntimeSource = AttachmentState[\"source\"];\n\nexport type AttachmentRuntime<\n  TSource extends AttachmentRuntimeSource = AttachmentRuntimeSource,\n> = {\n  readonly path: AttachmentRuntimePath & { attachmentSource: TSource };\n  readonly source: TSource;\n  getState(): AttachmentState & { source: TSource };\n  remove(): Promise<void>;\n  subscribe(callback: () => void): Unsubscribe;\n};\n\nexport abstract class AttachmentRuntimeImpl<\n  Source extends AttachmentRuntimeSource = AttachmentRuntimeSource,\n> implements AttachmentRuntime\n{\n  public get path() {\n    return this._core.path;\n  }\n\n  public abstract get source(): Source;\n\n  constructor(private _core: AttachmentSnapshotBinding<Source>) {}\n\n  public getState(): AttachmentState & { source: Source } {\n    return this._core.getState();\n  }\n\n  public abstract remove(): Promise<void>;\n\n  public subscribe(callback: () => void) {\n    return this._core.subscribe(callback);\n  }\n}\n\nabstract class ComposerAttachmentRuntime<\n  Source extends \"thread-composer\" | \"edit-composer\",\n> extends AttachmentRuntimeImpl<Source> {\n  constructor(\n    core: AttachmentSnapshotBinding<Source>,\n    private _composerApi: ComposerRuntimeCoreBinding,\n  ) {\n    super(core);\n  }\n\n  public remove() {\n    const core = this._composerApi.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    return core.removeAttachment(this.getState().id);\n  }\n}\n\nexport class ThreadComposerAttachmentRuntimeImpl extends ComposerAttachmentRuntime<\"thread-composer\"> {\n  public get source(): \"thread-composer\" {\n    return \"thread-composer\";\n  }\n}\n\nexport class EditComposerAttachmentRuntimeImpl extends ComposerAttachmentRuntime<\"edit-composer\"> {\n  public get source(): \"edit-composer\" {\n    return \"edit-composer\";\n  }\n}\n\nexport class MessageAttachmentRuntimeImpl extends AttachmentRuntimeImpl<\"message\"> {\n  public get source(): \"message\" {\n    return \"message\";\n  }\n\n  constructor(core: AttachmentSnapshotBinding<\"message\">) {\n    super(core);\n  }\n\n  public remove(): never {\n    throw new Error(\"Message attachments cannot be removed\");\n  }\n}\n"],"names":[],"mappings":";;;;;;;AA8CO,IAAe,wBAAf,MAGP;IAOE,YAAoB,KAAA,CAA0C;QAA1C,IAAA,CAAA,KAAA,GAAA;IAA2C;IAN/D,IAAW,OAAO;QAChB,OAAO,IAAA,CAAK,KAAA,CAAM,IAAA;IACpB;IAMO,WAAiD;QACtD,OAAO,IAAA,CAAK,KAAA,CAAM,QAAA,CAAS;IAC7B;IAIO,UAAU,QAAA,EAAsB;QACrC,OAAO,IAAA,CAAK,KAAA,CAAM,SAAA,CAAU,QAAQ;IACtC;AACF;AAEA,IAAe,4BAAf,cAEU,sBAA8B;IACtC,YACE,IAAA,EACQ,YAAA,CACR;QACA,KAAA,CAAM,IAAI;QAFF,IAAA,CAAA,YAAA,GAAA;IAGV;IAEO,SAAS;QACd,MAAM,OAAO,IAAA,CAAK,YAAA,CAAa,QAAA,CAAS;QACxC,IAAI,CAAC,KAAM,CAAA,MAAM,IAAI,MAAM,2BAA2B;QACtD,OAAO,KAAK,gBAAA,CAAiB,IAAA,CAAK,QAAA,CAAS,EAAE,EAAE;IACjD;AACF;AAEO,IAAM,sCAAN,cAAkD,0BAA6C;IACpG,IAAW,SAA4B;QACrC,OAAO;IACT;AACF;AAEO,IAAM,oCAAN,cAAgD,0BAA2C;IAChG,IAAW,SAA0B;QACnC,OAAO;IACT;AACF;AAEO,IAAM,+BAAN,cAA2C,sBAAiC;IACjF,IAAW,SAAoB;QAC7B,OAAO;IACT;IAEA,YAAY,IAAA,CAA4C;QACtD,KAAA,CAAM,IAAI;IACZ;IAEO,SAAgB;QACrB,MAAM,IAAI,MAAM,uCAAuC;IACzD;AACF","ignoreList":[0]}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/api/subscribable/shallowEqual.ts"],"sourcesContent":["export function shallowEqual<T extends object>(\n  objA: T | undefined,\n  objB: T | undefined,\n) {\n  if (objA === undefined && objB === undefined) return true;\n  if (objA === undefined) return false;\n  if (objB === undefined) return false;\n\n  for (const key of Object.keys(objA)) {\n    const valueA = objA[key as keyof T];\n    const valueB = objB[key as keyof T];\n    if (!Object.is(valueA, valueB)) return false;\n  }\n\n  return true;\n}\n"],"names":[],"mappings":";;;;AAAO,SAAS,aACd,IAAA,EACA,IAAA,EACA;IACA,IAAI,SAAS,KAAA,KAAa,SAAS,KAAA,EAAW,CAAA,OAAO;IACrD,IAAI,SAAS,KAAA,EAAW,CAAA,OAAO;IAC/B,IAAI,SAAS,KAAA,EAAW,CAAA,OAAO;IAE/B,KAAA,MAAW,OAAO,OAAO,IAAA,CAAK,IAAI,EAAG;QACnC,MAAM,SAAS,IAAA,CAAK,GAAc,CAAA;QAClC,MAAM,SAAS,IAAA,CAAK,GAAc,CAAA;QAClC,IAAI,CAAC,OAAO,EAAA,CAAG,QAAQ,MAAM,EAAG,CAAA,OAAO;IACzC;IAEA,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/api/subscribable/ShallowMemoizeSubject.ts"],"sourcesContent":["import { shallowEqual } from \"./shallowEqual\";\nimport { BaseSubject } from \"./BaseSubject\";\nimport { SubscribableWithState } from \"./Subscribable\";\nimport { SKIP_UPDATE } from \"./SKIP_UPDATE\";\n\nexport class ShallowMemoizeSubject<TState extends object, TPath>\n  extends BaseSubject\n  implements SubscribableWithState<TState, TPath>\n{\n  public get path() {\n    return this.binding.path;\n  }\n\n  constructor(\n    private binding: SubscribableWithState<TState | SKIP_UPDATE, TPath>,\n  ) {\n    super();\n    const state = binding.getState();\n    if (state === SKIP_UPDATE)\n      throw new Error(\"Entry not available in the store\");\n    this._previousState = state;\n  }\n\n  private _previousState: TState;\n  public getState = () => {\n    if (!this.isConnected) this._syncState();\n    return this._previousState;\n  };\n\n  private _syncState() {\n    const state = this.binding.getState();\n    if (state === SKIP_UPDATE) return false;\n    if (shallowEqual(state, this._previousState)) return false;\n    this._previousState = state;\n    return true;\n  }\n\n  protected _connect() {\n    const callback = () => {\n      if (this._syncState()) {\n        this.notifySubscribers();\n      }\n    };\n\n    return this.binding.subscribe(callback);\n  }\n}\n"],"names":[],"mappings":";;;;AAGA,SAAS,mBAAmB;AAH5B,SAAS,oBAAoB;AAC7B,SAAS,mBAAmB;;;;AAIrB,IAAM,wBAAN,wMACG,cAAA,CAEV;IAKE,YACU,OAAA,CACR;QACA,KAAA,CAAM;QAFE,IAAA,CAAA,OAAA,GAAA;QAGR,MAAM,QAAQ,QAAQ,QAAA,CAAS;QAC/B,IAAI,oMAAU,cAAA,EACZ,MAAM,IAAI,MAAM,kCAAkC;QACpD,IAAA,CAAK,cAAA,GAAiB;IACxB;IAZA,IAAW,OAAO;QAChB,OAAO,IAAA,CAAK,OAAA,CAAQ,IAAA;IACtB;IAYQ,eAAA;IACD,WAAW,MAAM;QACtB,IAAI,CAAC,IAAA,CAAK,WAAA,CAAa,CAAA,IAAA,CAAK,UAAA,CAAW;QACvC,OAAO,IAAA,CAAK,cAAA;IACd,EAAA;IAEQ,aAAa;QACnB,MAAM,QAAQ,IAAA,CAAK,OAAA,CAAQ,QAAA,CAAS;QACpC,IAAI,oMAAU,cAAA,CAAa,CAAA,OAAO;QAClC,KAAI,6MAAA,EAAa,OAAO,IAAA,CAAK,cAAc,EAAG,CAAA,OAAO;QACrD,IAAA,CAAK,cAAA,GAAiB;QACtB,OAAO;IACT;IAEU,WAAW;QACnB,MAAM,WAAW,MAAM;YACrB,IAAI,IAAA,CAAK,UAAA,CAAW,GAAG;gBACrB,IAAA,CAAK,iBAAA,CAAkB;YACzB;QACF;QAEA,OAAO,IAAA,CAAK,OAAA,CAAQ,SAAA,CAAU,QAAQ;IACxC;AACF","ignoreList":[0]}},
    {"offset": {"line": 259, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 265, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/api/ComposerRuntime.ts"],"sourcesContent":["import { Attachment, PendingAttachment } from \"../types/AttachmentTypes\";\nimport {\n  ComposerRuntimeCore,\n  ComposerRuntimeEventType,\n  ThreadComposerRuntimeCore,\n} from \"../runtimes/core/ComposerRuntimeCore\";\nimport { Unsubscribe } from \"../types\";\nimport { SubscribableWithState } from \"./subscribable/Subscribable\";\nimport { LazyMemoizeSubject } from \"./subscribable/LazyMemoizeSubject\";\nimport {\n  AttachmentRuntime,\n  AttachmentState,\n  EditComposerAttachmentRuntimeImpl,\n  ThreadComposerAttachmentRuntimeImpl,\n} from \"./AttachmentRuntime\";\nimport { ShallowMemoizeSubject } from \"./subscribable/ShallowMemoizeSubject\";\nimport { SKIP_UPDATE } from \"./subscribable/SKIP_UPDATE\";\nimport { ComposerRuntimePath } from \"./RuntimePathTypes\";\nimport { MessageRole, RunConfig } from \"../types/AssistantTypes\";\n\nexport type ThreadComposerRuntimeCoreBinding = SubscribableWithState<\n  ThreadComposerRuntimeCore | undefined,\n  ComposerRuntimePath & { composerSource: \"thread\" }\n>;\n\nexport type EditComposerRuntimeCoreBinding = SubscribableWithState<\n  ComposerRuntimeCore | undefined,\n  ComposerRuntimePath & { composerSource: \"edit\" }\n>;\n\nexport type ComposerRuntimeCoreBinding = SubscribableWithState<\n  ComposerRuntimeCore | undefined,\n  ComposerRuntimePath\n>;\n\ntype BaseComposerState = {\n  readonly canCancel: boolean;\n  readonly isEditing: boolean;\n  readonly isEmpty: boolean;\n\n  readonly text: string;\n  readonly role: MessageRole;\n  readonly attachments: readonly Attachment[];\n  readonly runConfig: RunConfig;\n};\n\nexport type ThreadComposerState = BaseComposerState & {\n  readonly type: \"thread\";\n\n  readonly attachments: readonly PendingAttachment[];\n};\n\nexport type EditComposerState = BaseComposerState & {\n  readonly type: \"edit\";\n};\n\nexport type ComposerState = ThreadComposerState | EditComposerState;\n\nconst EMPTY_ARRAY = Object.freeze([]);\nconst EMPTY_OBJECT = Object.freeze({});\nconst getThreadComposerState = (\n  runtime: ThreadComposerRuntimeCore | undefined,\n): ThreadComposerState => {\n  return Object.freeze({\n    type: \"thread\",\n\n    isEditing: runtime?.isEditing ?? false,\n    canCancel: runtime?.canCancel ?? false,\n    isEmpty: runtime?.isEmpty ?? true,\n\n    attachments: runtime?.attachments ?? EMPTY_ARRAY,\n    text: runtime?.text ?? \"\",\n    role: runtime?.role ?? \"user\",\n    runConfig: runtime?.runConfig ?? EMPTY_OBJECT,\n\n    value: runtime?.text ?? \"\",\n  });\n};\n\nconst getEditComposerState = (\n  runtime: ComposerRuntimeCore | undefined,\n): EditComposerState => {\n  return Object.freeze({\n    type: \"edit\",\n\n    isEditing: runtime?.isEditing ?? false,\n    canCancel: runtime?.canCancel ?? false,\n    isEmpty: runtime?.isEmpty ?? true,\n\n    text: runtime?.text ?? \"\",\n    role: runtime?.role ?? \"user\",\n    attachments: runtime?.attachments ?? EMPTY_ARRAY,\n    runConfig: runtime?.runConfig ?? EMPTY_OBJECT,\n\n    value: runtime?.text ?? \"\",\n  });\n};\n\nexport type ComposerRuntime = {\n  readonly path: ComposerRuntimePath;\n  readonly type: \"edit\" | \"thread\";\n  getState(): ComposerState;\n\n  getAttachmentAccept(): string;\n  addAttachment(file: File): Promise<void>;\n\n  setText(text: string): void;\n  setRole(role: MessageRole): void;\n  setRunConfig(runConfig: RunConfig): void;\n\n  reset(): Promise<void>;\n  clearAttachments(): Promise<void>;\n\n  send(): void;\n  cancel(): void;\n  subscribe(callback: () => void): Unsubscribe;\n  getAttachmentByIndex(idx: number): AttachmentRuntime;\n};\n\nexport abstract class ComposerRuntimeImpl implements ComposerRuntime {\n  public get path() {\n    return this._core.path;\n  }\n\n  public abstract get type(): \"edit\" | \"thread\";\n\n  constructor(protected _core: ComposerRuntimeCoreBinding) {}\n\n  public abstract getState(): ComposerState;\n\n  public setText(text: string) {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    core.setText(text);\n  }\n\n  public setRunConfig(runConfig: RunConfig) {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    core.setRunConfig(runConfig);\n  }\n\n  public addAttachment(file: File) {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    return core.addAttachment(file);\n  }\n\n  public reset() {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    return core.reset();\n  }\n\n  public clearAttachments() {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    return core.clearAttachments();\n  }\n\n  public send() {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    core.send();\n  }\n\n  public cancel() {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    core.cancel();\n  }\n\n  public setRole(role: MessageRole) {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    core.setRole(role);\n  }\n\n  public subscribe(callback: () => void) {\n    return this._core.subscribe(callback);\n  }\n\n  public unstable_on(event: ComposerRuntimeEventType, callback: () => void) {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n\n    return core.unstable_on(event, callback);\n  }\n\n  public getAttachmentAccept(): string {\n    const core = this._core.getState();\n    if (!core) throw new Error(\"Composer is not available\");\n    return core.getAttachmentAccept();\n  }\n\n  public abstract getAttachmentByIndex(idx: number): AttachmentRuntime;\n}\n\nexport type ThreadComposerRuntime = Omit<\n  ComposerRuntime,\n  \"getState\" | \"getAttachmentByIndex\"\n> & {\n  readonly path: ComposerRuntimePath & { composerSource: \"thread\" };\n  readonly type: \"thread\";\n  getState(): ThreadComposerState;\n\n  getAttachmentByIndex(\n    idx: number,\n  ): AttachmentRuntime & { source: \"thread-composer\" };\n};\n\nexport class ThreadComposerRuntimeImpl\n  extends ComposerRuntimeImpl\n  implements ThreadComposerRuntime\n{\n  public override get path() {\n    return this._core.path as ComposerRuntimePath & {\n      composerSource: \"thread\";\n    };\n  }\n\n  public get type() {\n    return \"thread\" as const;\n  }\n\n  private _getState;\n\n  constructor(core: ThreadComposerRuntimeCoreBinding) {\n    const stateBinding = new LazyMemoizeSubject({\n      path: core.path,\n      getState: () => getThreadComposerState(core.getState()),\n      subscribe: (callback) => core.subscribe(callback),\n    });\n    super({\n      path: core.path,\n      getState: () => core.getState(),\n      subscribe: (callback) => stateBinding.subscribe(callback),\n    });\n    this._getState = stateBinding.getState.bind(stateBinding);\n  }\n\n  public override getState(): ThreadComposerState {\n    return this._getState();\n  }\n\n  public getAttachmentByIndex(idx: number) {\n    return new ThreadComposerAttachmentRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ...this.path,\n          attachmentSource: \"thread-composer\",\n          attachmentSelector: { type: \"index\", index: idx },\n          ref: this.path.ref + `${this.path.ref}.attachments[${idx}]`,\n        },\n        getState: () => {\n          const attachments = this.getState().attachments;\n          const attachment = attachments[idx];\n          if (!attachment) return SKIP_UPDATE;\n\n          return {\n            ...attachment,\n            source: \"thread-composer\",\n          } satisfies AttachmentState & { source: \"thread-composer\" };\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n    );\n  }\n}\n\nexport type EditComposerRuntime = Omit<\n  ComposerRuntime,\n  \"getState\" | \"getAttachmentByIndex\"\n> & {\n  readonly path: ComposerRuntimePath & { composerSource: \"edit\" };\n  readonly type: \"edit\";\n\n  getState(): EditComposerState;\n  beginEdit(): void;\n\n  getAttachmentByIndex(\n    idx: number,\n  ): AttachmentRuntime & { source: \"edit-composer\" };\n};\n\nexport class EditComposerRuntimeImpl\n  extends ComposerRuntimeImpl\n  implements EditComposerRuntime\n{\n  public override get path() {\n    return this._core.path as ComposerRuntimePath & { composerSource: \"edit\" };\n  }\n\n  public get type() {\n    return \"edit\" as const;\n  }\n\n  private _getState;\n  constructor(\n    core: EditComposerRuntimeCoreBinding,\n    private _beginEdit: () => void,\n  ) {\n    const stateBinding = new LazyMemoizeSubject({\n      path: core.path,\n      getState: () => getEditComposerState(core.getState()),\n      subscribe: (callback) => core.subscribe(callback),\n    });\n\n    super({\n      path: core.path,\n      getState: () => core.getState(),\n      subscribe: (callback) => stateBinding.subscribe(callback),\n    });\n\n    this._getState = stateBinding.getState.bind(stateBinding);\n  }\n\n  public override getState(): EditComposerState {\n    return this._getState();\n  }\n\n  public beginEdit() {\n    this._beginEdit();\n  }\n\n  public getAttachmentByIndex(idx: number) {\n    return new EditComposerAttachmentRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ...this.path,\n          attachmentSource: \"edit-composer\",\n          attachmentSelector: { type: \"index\", index: idx },\n          ref: this.path.ref + `${this.path.ref}.attachments[${idx}]`,\n        },\n        getState: () => {\n          const attachments = this.getState().attachments;\n          const attachment = attachments[idx];\n          if (!attachment) return SKIP_UPDATE;\n\n          return {\n            ...attachment,\n            source: \"edit-composer\",\n          } satisfies AttachmentState & { source: \"edit-composer\" };\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n    );\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 470, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 476, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/api/subscribable/NestedSubscriptionSubject.ts"],"sourcesContent":["import { Unsubscribe } from \"../../types\";\nimport { BaseSubject } from \"./BaseSubject\";\nimport {\n  NestedSubscribable,\n  Subscribable,\n  SubscribableWithState,\n} from \"./Subscribable\";\n\nexport class NestedSubscriptionSubject<TState extends Subscribable | undefined, TPath>\n  extends BaseSubject\n  implements SubscribableWithState<TState, TPath>, NestedSubscribable<TState, TPath>\n{\n  public get path() {\n    return this.binding.path;\n  }\n\n  constructor(private binding: NestedSubscribable<TState, TPath>) {\n    super();\n  }\n\n  public getState() {\n    return this.binding.getState();\n  }\n\n  public outerSubscribe(callback: () => void) {\n    return this.binding.subscribe(callback);\n  }\n\n  protected _connect(): Unsubscribe {\n    const callback = () => {\n      this.notifySubscribers();\n    };\n\n    let lastState = this.binding.getState();\n    let innerUnsubscribe = lastState?.subscribe(callback);\n    const onRuntimeUpdate = () => {\n      const newState = this.binding.getState();\n      if (newState === lastState) return;\n      lastState = newState;\n\n      innerUnsubscribe?.();\n      innerUnsubscribe = this.binding.getState()?.subscribe(callback);\n\n      callback();\n    };\n\n    const outerUnsubscribe = this.outerSubscribe(onRuntimeUpdate);\n    return () => {\n      outerUnsubscribe?.();\n      innerUnsubscribe?.();\n    };\n  }\n}\n"],"names":[],"mappings":";;;;AACA,SAAS,mBAAmB;;AAOrB,IAAM,4BAAN,wMACG,cAAA,CAEV;IAKE,YAAoB,OAAA,CAA4C;QAC9D,KAAA,CAAM;QADY,IAAA,CAAA,OAAA,GAAA;IAEpB;IANA,IAAW,OAAO;QAChB,OAAO,IAAA,CAAK,OAAA,CAAQ,IAAA;IACtB;IAMO,WAAW;QAChB,OAAO,IAAA,CAAK,OAAA,CAAQ,QAAA,CAAS;IAC/B;IAEO,eAAe,QAAA,EAAsB;QAC1C,OAAO,IAAA,CAAK,OAAA,CAAQ,SAAA,CAAU,QAAQ;IACxC;IAEU,WAAwB;QAChC,MAAM,WAAW,MAAM;YACrB,IAAA,CAAK,iBAAA,CAAkB;QACzB;QAEA,IAAI,YAAY,IAAA,CAAK,OAAA,CAAQ,QAAA,CAAS;QACtC,IAAI,mBAAmB,WAAW,UAAU,QAAQ;QACpD,MAAM,kBAAkB,MAAM;YAC5B,MAAM,WAAW,IAAA,CAAK,OAAA,CAAQ,QAAA,CAAS;YACvC,IAAI,aAAa,UAAW,CAAA;YAC5B,YAAY;YAEZ,mBAAmB;YACnB,mBAAmB,IAAA,CAAK,OAAA,CAAQ,QAAA,CAAS,GAAG,UAAU,QAAQ;YAE9D,SAAS;QACX;QAEA,MAAM,mBAAmB,IAAA,CAAK,cAAA,CAAe,eAAe;QAC5D,OAAO,MAAM;YACX,mBAAmB;YACnB,mBAAmB;QACrB;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 519, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 525, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/utils/getThreadMessageText.tsx"],"sourcesContent":["import type {\n  AppendMessage,\n  TextContentPart,\n  ThreadMessage,\n} from \"../types/AssistantTypes\";\n\nexport const getThreadMessageText = (\n  message: ThreadMessage | AppendMessage,\n) => {\n  const textParts = message.content.filter(\n    (part) => part.type === \"text\",\n  ) as TextContentPart[];\n\n  return textParts.map((part) => part.text).join(\"\\n\\n\");\n};\n"],"names":[],"mappings":";;;;AAMO,IAAM,uBAAuB,CAClC,YACG;IACH,MAAM,YAAY,QAAQ,OAAA,CAAQ,MAAA,CAChC,CAAC,OAAS,KAAK,IAAA,KAAS;IAG1B,OAAO,UAAU,GAAA,CAAI,CAAC,OAAS,KAAK,IAAI,EAAE,IAAA,CAAK,MAAM;AACvD","ignoreList":[0]}},
    {"offset": {"line": 535, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 541, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/api/ContentPartRuntime.ts"],"sourcesContent":["import {\n  ThreadAssistantContentPart,\n  ThreadUserContentPart,\n  ContentPartStatus,\n  ToolCallContentPartStatus,\n} from \"../types/AssistantTypes\";\nimport { ThreadRuntimeCoreBinding } from \"./ThreadRuntime\";\nimport { MessageStateBinding } from \"./MessageRuntime\";\nimport { SubscribableWithState } from \"./subscribable/Subscribable\";\nimport { Unsubscribe } from \"../types\";\nimport { ContentPartRuntimePath } from \"./RuntimePathTypes\";\n\nexport type ContentPartState = (\n  | ThreadUserContentPart\n  | ThreadAssistantContentPart\n) & {\n  readonly status: ContentPartStatus | ToolCallContentPartStatus;\n};\n\ntype ContentPartSnapshotBinding = SubscribableWithState<\n  ContentPartState,\n  ContentPartRuntimePath\n>;\n\nexport type ContentPartRuntime = {\n  /**\n   * Add tool result to a tool call content part that has no tool result yet.\n   * This is useful when you are collecting a tool result via user input (\"human tool calls\").\n   */\n  addToolResult(result: any): void;\n\n  readonly path: ContentPartRuntimePath;\n  getState(): ContentPartState;\n  subscribe(callback: () => void): Unsubscribe;\n};\n\nexport class ContentPartRuntimeImpl implements ContentPartRuntime {\n  public get path() {\n    return this.contentBinding.path;\n  }\n\n  constructor(\n    private contentBinding: ContentPartSnapshotBinding,\n    private messageApi?: MessageStateBinding,\n    private threadApi?: ThreadRuntimeCoreBinding,\n  ) {}\n\n  public getState() {\n    return this.contentBinding.getState();\n  }\n\n  public addToolResult(result: any) {\n    const state = this.contentBinding.getState();\n    if (!state) throw new Error(\"Content part is not available\");\n\n    if (state.type !== \"tool-call\")\n      throw new Error(\"Tried to add tool result to non-tool content part\");\n\n    if (!this.messageApi)\n      throw new Error(\n        \"Message API is not available. This is likely a bug in assistant-ui.\",\n      );\n    if (!this.threadApi) throw new Error(\"Thread API is not available\");\n\n    const message = this.messageApi.getState();\n    if (!message) throw new Error(\"Message is not available\");\n\n    const toolName = state.toolName;\n    const toolCallId = state.toolCallId;\n\n    this.threadApi.getState().addToolResult({\n      messageId: message.id,\n      toolName,\n      toolCallId,\n      result,\n    });\n  }\n\n  public subscribe(callback: () => void) {\n    return this.contentBinding.subscribe(callback);\n  }\n}\n"],"names":[],"mappings":";;;;AAoCO,IAAM,yBAAN,MAA2D;IAKhE,YACU,cAAA,EACA,UAAA,EACA,SAAA,CACR;QAHQ,IAAA,CAAA,cAAA,GAAA;QACA,IAAA,CAAA,UAAA,GAAA;QACA,IAAA,CAAA,SAAA,GAAA;IACP;IARH,IAAW,OAAO;QAChB,OAAO,IAAA,CAAK,cAAA,CAAe,IAAA;IAC7B;IAQO,WAAW;QAChB,OAAO,IAAA,CAAK,cAAA,CAAe,QAAA,CAAS;IACtC;IAEO,cAAc,MAAA,EAAa;QAChC,MAAM,QAAQ,IAAA,CAAK,cAAA,CAAe,QAAA,CAAS;QAC3C,IAAI,CAAC,MAAO,CAAA,MAAM,IAAI,MAAM,+BAA+B;QAE3D,IAAI,MAAM,IAAA,KAAS,aACjB,MAAM,IAAI,MAAM,mDAAmD;QAErE,IAAI,CAAC,IAAA,CAAK,UAAA,EACR,MAAM,IAAI,MACR;QAEJ,IAAI,CAAC,IAAA,CAAK,SAAA,CAAW,CAAA,MAAM,IAAI,MAAM,6BAA6B;QAElE,MAAM,UAAU,IAAA,CAAK,UAAA,CAAW,QAAA,CAAS;QACzC,IAAI,CAAC,QAAS,CAAA,MAAM,IAAI,MAAM,0BAA0B;QAExD,MAAM,WAAW,MAAM,QAAA;QACvB,MAAM,aAAa,MAAM,UAAA;QAEzB,IAAA,CAAK,SAAA,CAAU,QAAA,CAAS,EAAE,aAAA,CAAc;YACtC,WAAW,QAAQ,EAAA;YACnB;YACA;YACA;QACF,CAAC;IACH;IAEO,UAAU,QAAA,EAAsB;QACrC,OAAO,IAAA,CAAK,cAAA,CAAe,SAAA,CAAU,QAAQ;IAC/C;AACF","ignoreList":[0]}},
    {"offset": {"line": 580, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 586, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/api/MessageRuntime.ts"],"sourcesContent":["import {\n  SpeechState,\n  SubmittedFeedback,\n} from \"../runtimes/core/ThreadRuntimeCore\";\nimport {\n  ThreadMessage,\n  ThreadAssistantContentPart,\n  ThreadUserContentPart,\n  Unsubscribe,\n} from \"../types\";\nimport {\n  ContentPartStatus,\n  RunConfig,\n  ToolCallContentPartStatus,\n} from \"../types/AssistantTypes\";\nimport { getThreadMessageText } from \"../utils/getThreadMessageText\";\nimport {\n  AttachmentRuntime,\n  AttachmentState,\n  MessageAttachmentRuntimeImpl,\n} from \"./AttachmentRuntime\";\nimport {\n  EditComposerRuntime,\n  EditComposerRuntimeImpl,\n} from \"./ComposerRuntime\";\nimport {\n  ContentPartRuntime,\n  ContentPartRuntimeImpl,\n  ContentPartState,\n} from \"./ContentPartRuntime\";\nimport { MessageRuntimePath } from \"./RuntimePathTypes\";\nimport { ThreadRuntimeCoreBinding } from \"./ThreadRuntime\";\nimport { NestedSubscriptionSubject } from \"./subscribable/NestedSubscriptionSubject\";\nimport { SKIP_UPDATE } from \"./subscribable/SKIP_UPDATE\";\nimport { ShallowMemoizeSubject } from \"./subscribable/ShallowMemoizeSubject\";\nimport { SubscribableWithState } from \"./subscribable/Subscribable\";\n\nconst COMPLETE_STATUS: ContentPartStatus = Object.freeze({\n  type: \"complete\",\n});\n\nexport const toContentPartStatus = (\n  message: ThreadMessage,\n  partIndex: number,\n  part: ThreadUserContentPart | ThreadAssistantContentPart,\n): ToolCallContentPartStatus => {\n  if (message.role !== \"assistant\") return COMPLETE_STATUS;\n\n  if (part.type === \"tool-call\") {\n    if (!part.result) {\n      return message.status as ToolCallContentPartStatus;\n    } else {\n      return COMPLETE_STATUS;\n    }\n  }\n\n  const isLastPart = partIndex === Math.max(0, message.content.length - 1);\n  if (message.status.type === \"requires-action\") return COMPLETE_STATUS;\n  return isLastPart ? (message.status as ContentPartStatus) : COMPLETE_STATUS;\n};\n\nexport const EMPTY_CONTENT_SYMBOL = Symbol(\"empty-content\");\nconst EMPTY_CONTENT = Object.freeze({\n  type: \"text\",\n  text: \"\",\n  [EMPTY_CONTENT_SYMBOL]: true,\n});\n\nconst getContentPartState = (\n  message: MessageState,\n  partIndex: number,\n): ContentPartState | SKIP_UPDATE => {\n  let part = message.content[partIndex];\n  if (!part) {\n    // for empty messages, show an empty text content part\n    if (message.content.length === 0 && partIndex === 0) {\n      part = EMPTY_CONTENT;\n    } else {\n      return SKIP_UPDATE;\n    }\n  } else if (\n    message.content.length === 1 &&\n    part.type === \"text\" &&\n    part.text.length === 0\n  ) {\n    // ensure reference equality for equivalent empty text parts\n    part = EMPTY_CONTENT;\n  }\n\n  // if the content part is the same, don't update\n  const status = toContentPartStatus(message, partIndex, part);\n  return Object.freeze({ ...part, status });\n};\n\nexport type MessageState = ThreadMessage & {\n  readonly parentId: string | null;\n  readonly isLast: boolean;\n\n  readonly branchNumber: number;\n  readonly branchCount: number;\n\n  /**\n   * @deprecated This API is still under active development and might change without notice.\n   */\n  readonly speech: SpeechState | undefined;\n  readonly submittedFeedback: SubmittedFeedback | undefined;\n};\n\nexport type MessageStateBinding = SubscribableWithState<\n  MessageState,\n  MessageRuntimePath\n>;\n\ntype ReloadConfig = {\n  runConfig?: RunConfig;\n};\n\nexport type MessageRuntime = {\n  readonly path: MessageRuntimePath;\n\n  readonly composer: EditComposerRuntime;\n\n  getState(): MessageState;\n  reload(config?: ReloadConfig): void;\n  /**\n   * @deprecated This API is still under active development and might change without notice.\n   */\n  speak(): void;\n  /**\n   * @deprecated This API is still under active development and might change without notice.\n   */\n  stopSpeaking(): void;\n  submitFeedback({ type }: { type: \"positive\" | \"negative\" }): void;\n  switchToBranch({\n    position,\n    branchId,\n  }: {\n    position?: \"previous\" | \"next\" | undefined;\n    branchId?: string | undefined;\n  }): void;\n  unstable_getCopyText(): string;\n\n  subscribe(callback: () => void): Unsubscribe;\n\n  getContentPartByIndex(idx: number): ContentPartRuntime;\n  getContentPartByToolCallId(toolCallId: string): ContentPartRuntime;\n\n  getAttachmentByIndex(idx: number): AttachmentRuntime & { source: \"message\" };\n};\n\nexport class MessageRuntimeImpl implements MessageRuntime {\n  public get path() {\n    return this._core.path;\n  }\n\n  constructor(\n    private _core: MessageStateBinding,\n    private _threadBinding: ThreadRuntimeCoreBinding,\n  ) {\n    this.composer = new EditComposerRuntimeImpl(\n      new NestedSubscriptionSubject({\n        path: {\n          ...this.path,\n          ref: this.path.ref + `${this.path.ref}.composer`,\n          composerSource: \"edit\",\n        },\n        getState: () =>\n          this._threadBinding\n            .getState()\n            .getEditComposer(this._core.getState().id),\n        subscribe: (callback) => this._threadBinding.subscribe(callback),\n      }),\n      () => this._threadBinding.getState().beginEdit(this._core.getState().id),\n    );\n  }\n\n  public readonly composer;\n\n  public getState() {\n    return this._core.getState();\n  }\n\n  public reload({ runConfig = {} }: ReloadConfig = {}) {\n    const state = this._core.getState();\n    if (state.role !== \"assistant\")\n      throw new Error(\"Can only reload assistant messages\");\n\n    this._threadBinding.getState().startRun({\n      parentId: state.parentId,\n      runConfig,\n    });\n  }\n\n  public speak() {\n    const state = this._core.getState();\n    return this._threadBinding.getState().speak(state.id);\n  }\n\n  public stopSpeaking() {\n    const state = this._core.getState();\n    const thread = this._threadBinding.getState();\n    if (thread.speech?.messageId === state.id) {\n      this._threadBinding.getState().stopSpeaking();\n    } else {\n      throw new Error(\"Message is not being spoken\");\n    }\n  }\n\n  public submitFeedback({ type }: { type: \"positive\" | \"negative\" }) {\n    const state = this._core.getState();\n    this._threadBinding.getState().submitFeedback({\n      messageId: state.id,\n      type,\n    });\n  }\n\n  public switchToBranch({\n    position,\n    branchId,\n  }: {\n    position?: \"previous\" | \"next\" | undefined;\n    branchId?: string | undefined;\n  }) {\n    const state = this._core.getState();\n    if (branchId && position) {\n      throw new Error(\"May not specify both branchId and position\");\n    } else if (!branchId && !position) {\n      throw new Error(\"Must specify either branchId or position\");\n    }\n\n    const thread = this._threadBinding.getState();\n    const branches = thread.getBranches(state.id);\n    let targetBranch = branchId;\n    if (position === \"previous\") {\n      targetBranch = branches[state.branchNumber - 2];\n    } else if (position === \"next\") {\n      targetBranch = branches[state.branchNumber];\n    }\n    if (!targetBranch) throw new Error(\"Branch not found\");\n\n    this._threadBinding.getState().switchToBranch(targetBranch);\n  }\n\n  public unstable_getCopyText() {\n    return getThreadMessageText(this.getState());\n  }\n\n  public subscribe(callback: () => void) {\n    return this._core.subscribe(callback);\n  }\n\n  public getContentPartByIndex(idx: number) {\n    if (idx < 0) throw new Error(\"Content part index must be >= 0\");\n    return new ContentPartRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ...this.path,\n          ref: this.path.ref + `${this.path.ref}.content[${idx}]`,\n          contentPartSelector: { type: \"index\", index: idx },\n        },\n        getState: () => {\n          return getContentPartState(this.getState(), idx);\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n      this._threadBinding,\n    );\n  }\n\n  public getContentPartByToolCallId(toolCallId: string) {\n    return new ContentPartRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ...this.path,\n          ref:\n            this.path.ref +\n            `${this.path.ref}.content[toolCallId=${JSON.stringify(toolCallId)}]`,\n          contentPartSelector: { type: \"toolCallId\", toolCallId },\n        },\n        getState: () => {\n          const state = this._core.getState();\n          const idx = state.content.findIndex(\n            (part) =>\n              part.type === \"tool-call\" && part.toolCallId === toolCallId,\n          );\n          if (idx === -1) return SKIP_UPDATE;\n          return getContentPartState(state, idx);\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n      this._threadBinding,\n    );\n  }\n\n  public getAttachmentByIndex(idx: number) {\n    return new MessageAttachmentRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ...this.path,\n          ref: this.path.ref + `${this.path.ref}.attachments[${idx}]`,\n          attachmentSource: \"message\",\n          attachmentSelector: { type: \"index\", index: idx },\n        },\n        getState: () => {\n          const attachments = this.getState().attachments;\n          const attachment = attachments?.[idx];\n          if (!attachment) return SKIP_UPDATE;\n\n          return {\n            ...attachment,\n            source: \"message\",\n          } satisfies AttachmentState & { source: \"message\" };\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n    );\n  }\n}\n"],"names":[],"mappings":";;;;;;AAiCA,SAAS,mBAAmB;AAZ5B;AAWA,SAAS,iCAAiC;AAjB1C,SAAS,4BAA4B;AAUrC;AASA,SAAS,6BAA6B;AAlBtC;;;;;;;;AAqBA,IAAM,kBAAqC,OAAO,MAAA,CAAO;IACvD,MAAM;AACR,CAAC;AAEM,IAAM,sBAAsB,CACjC,SACA,WACA,SAC8B;IAC9B,IAAI,QAAQ,IAAA,KAAS,YAAa,CAAA,OAAO;IAEzC,IAAI,KAAK,IAAA,KAAS,aAAa;QAC7B,IAAI,CAAC,KAAK,MAAA,EAAQ;YAChB,OAAO,QAAQ,MAAA;QACjB,OAAO;YACL,OAAO;QACT;IACF;IAEA,MAAM,aAAa,cAAc,KAAK,GAAA,CAAI,GAAG,QAAQ,OAAA,CAAQ,MAAA,GAAS,CAAC;IACvE,IAAI,QAAQ,MAAA,CAAO,IAAA,KAAS,kBAAmB,CAAA,OAAO;IACtD,OAAO,aAAc,QAAQ,MAAA,GAA+B;AAC9D;AAEO,IAAM,uBAAuB,OAAO,eAAe;AAC1D,IAAM,gBAAgB,OAAO,MAAA,CAAO;IAClC,MAAM;IACN,MAAM;IACN,CAAC,oBAAoB,CAAA,EAAG;AAC1B,CAAC;AAED,IAAM,sBAAsB,CAC1B,SACA,cACmC;IACnC,IAAI,OAAO,QAAQ,OAAA,CAAQ,SAAS,CAAA;IACpC,IAAI,CAAC,MAAM;QAET,IAAI,QAAQ,OAAA,CAAQ,MAAA,KAAW,KAAK,cAAc,GAAG;YACnD,OAAO;QACT,OAAO;YACL,iMAAO,cAAA;QACT;IACF,OAAA,IACE,QAAQ,OAAA,CAAQ,MAAA,KAAW,KAC3B,KAAK,IAAA,KAAS,UACd,KAAK,IAAA,CAAK,MAAA,KAAW,GACrB;QAEA,OAAO;IACT;IAGA,MAAM,SAAS,oBAAoB,SAAS,WAAW,IAAI;IAC3D,OAAO,OAAO,MAAA,CAAO;QAAE,GAAG,IAAA;QAAM;IAAO,CAAC;AAC1C;AA0DO,IAAM,qBAAN,MAAmD;IAKxD,YACU,KAAA,EACA,cAAA,CACR;QAFQ,IAAA,CAAA,KAAA,GAAA;QACA,IAAA,CAAA,cAAA,GAAA;QAER,IAAA,CAAK,QAAA,GAAW,kLAAI,0BAAA,CAClB,4MAAI,4BAAA,CAA0B;YAC5B,MAAM;gBACJ,GAAG,IAAA,CAAK,IAAA;gBACR,KAAK,IAAA,CAAK,IAAA,CAAK,GAAA,GAAM,GAAG,IAAA,CAAK,IAAA,CAAK,GAAG,CAAA,SAAA,CAAA;gBACrC,gBAAgB;YAClB;YACA,UAAU,IACR,IAAA,CAAK,cAAA,CACF,QAAA,CAAS,EACT,eAAA,CAAgB,IAAA,CAAK,KAAA,CAAM,QAAA,CAAS,EAAE,EAAE;YAC7C,WAAW,CAAC,WAAa,IAAA,CAAK,cAAA,CAAe,SAAA,CAAU,QAAQ;QACjE,CAAC,GACD,IAAM,IAAA,CAAK,cAAA,CAAe,QAAA,CAAS,EAAE,SAAA,CAAU,IAAA,CAAK,KAAA,CAAM,QAAA,CAAS,EAAE,EAAE;IAE3E;IAvBA,IAAW,OAAO;QAChB,OAAO,IAAA,CAAK,KAAA,CAAM,IAAA;IACpB;IAuBgB,SAAA;IAET,WAAW;QAChB,OAAO,IAAA,CAAK,KAAA,CAAM,QAAA,CAAS;IAC7B;IAEO,OAAO,EAAE,YAAY,CAAC,CAAA,CAAE,CAAA,GAAkB,CAAC,CAAA,EAAG;QACnD,MAAM,QAAQ,IAAA,CAAK,KAAA,CAAM,QAAA,CAAS;QAClC,IAAI,MAAM,IAAA,KAAS,aACjB,MAAM,IAAI,MAAM,oCAAoC;QAEtD,IAAA,CAAK,cAAA,CAAe,QAAA,CAAS,EAAE,QAAA,CAAS;YACtC,UAAU,MAAM,QAAA;YAChB;QACF,CAAC;IACH;IAEO,QAAQ;QACb,MAAM,QAAQ,IAAA,CAAK,KAAA,CAAM,QAAA,CAAS;QAClC,OAAO,IAAA,CAAK,cAAA,CAAe,QAAA,CAAS,EAAE,KAAA,CAAM,MAAM,EAAE;IACtD;IAEO,eAAe;QACpB,MAAM,QAAQ,IAAA,CAAK,KAAA,CAAM,QAAA,CAAS;QAClC,MAAM,SAAS,IAAA,CAAK,cAAA,CAAe,QAAA,CAAS;QAC5C,IAAI,OAAO,MAAA,EAAQ,cAAc,MAAM,EAAA,EAAI;YACzC,IAAA,CAAK,cAAA,CAAe,QAAA,CAAS,EAAE,YAAA,CAAa;QAC9C,OAAO;YACL,MAAM,IAAI,MAAM,6BAA6B;QAC/C;IACF;IAEO,eAAe,EAAE,IAAA,CAAK,CAAA,EAAsC;QACjE,MAAM,QAAQ,IAAA,CAAK,KAAA,CAAM,QAAA,CAAS;QAClC,IAAA,CAAK,cAAA,CAAe,QAAA,CAAS,EAAE,cAAA,CAAe;YAC5C,WAAW,MAAM,EAAA;YACjB;QACF,CAAC;IACH;IAEO,eAAe,EACpB,QAAA,EACA,QAAA,EACF,EAGG;QACD,MAAM,QAAQ,IAAA,CAAK,KAAA,CAAM,QAAA,CAAS;QAClC,IAAI,YAAY,UAAU;YACxB,MAAM,IAAI,MAAM,4CAA4C;QAC9D,OAAA,IAAW,CAAC,YAAY,CAAC,UAAU;YACjC,MAAM,IAAI,MAAM,0CAA0C;QAC5D;QAEA,MAAM,SAAS,IAAA,CAAK,cAAA,CAAe,QAAA,CAAS;QAC5C,MAAM,WAAW,OAAO,WAAA,CAAY,MAAM,EAAE;QAC5C,IAAI,eAAe;QACnB,IAAI,aAAa,YAAY;YAC3B,eAAe,QAAA,CAAS,MAAM,YAAA,GAAe,CAAC,CAAA;QAChD,OAAA,IAAW,aAAa,QAAQ;YAC9B,eAAe,QAAA,CAAS,MAAM,YAAY,CAAA;QAC5C;QACA,IAAI,CAAC,aAAc,CAAA,MAAM,IAAI,MAAM,kBAAkB;QAErD,IAAA,CAAK,cAAA,CAAe,QAAA,CAAS,EAAE,cAAA,CAAe,YAAY;IAC5D;IAEO,uBAAuB;QAC5B,gMAAO,uBAAA,EAAqB,IAAA,CAAK,QAAA,CAAS,CAAC;IAC7C;IAEO,UAAU,QAAA,EAAsB;QACrC,OAAO,IAAA,CAAK,KAAA,CAAM,SAAA,CAAU,QAAQ;IACtC;IAEO,sBAAsB,GAAA,EAAa;QACxC,IAAI,MAAM,EAAG,CAAA,MAAM,IAAI,MAAM,iCAAiC;QAC9D,OAAO,qLAAI,yBAAA,CACT,wMAAI,wBAAA,CAAsB;YACxB,MAAM;gBACJ,GAAG,IAAA,CAAK,IAAA;gBACR,KAAK,IAAA,CAAK,IAAA,CAAK,GAAA,GAAM,GAAG,IAAA,CAAK,IAAA,CAAK,GAAG,CAAA,SAAA,EAAY,GAAG,CAAA,CAAA,CAAA;gBACpD,qBAAqB;oBAAE,MAAM;oBAAS,OAAO;gBAAI;YACnD;YACA,UAAU,MAAM;gBACd,OAAO,oBAAoB,IAAA,CAAK,QAAA,CAAS,GAAG,GAAG;YACjD;YACA,WAAW,CAAC,WAAa,IAAA,CAAK,KAAA,CAAM,SAAA,CAAU,QAAQ;QACxD,CAAC,GACD,IAAA,CAAK,KAAA,EACL,IAAA,CAAK,cAAA;IAET;IAEO,2BAA2B,UAAA,EAAoB;QACpD,OAAO,qLAAI,yBAAA,CACT,wMAAI,wBAAA,CAAsB;YACxB,MAAM;gBACJ,GAAG,IAAA,CAAK,IAAA;gBACR,KACE,IAAA,CAAK,IAAA,CAAK,GAAA,GACV,GAAG,IAAA,CAAK,IAAA,CAAK,GAAG,CAAA,oBAAA,EAAuB,KAAK,SAAA,CAAU,UAAU,CAAC,CAAA,CAAA,CAAA;gBACnE,qBAAqB;oBAAE,MAAM;oBAAc;gBAAW;YACxD;YACA,UAAU,MAAM;gBACd,MAAM,QAAQ,IAAA,CAAK,KAAA,CAAM,QAAA,CAAS;gBAClC,MAAM,MAAM,MAAM,OAAA,CAAQ,SAAA,CACxB,CAAC,OACC,KAAK,IAAA,KAAS,eAAe,KAAK,UAAA,KAAe;gBAErD,IAAI,QAAQ,CAAA,EAAI,CAAA,iMAAO,cAAA;gBACvB,OAAO,oBAAoB,OAAO,GAAG;YACvC;YACA,WAAW,CAAC,WAAa,IAAA,CAAK,KAAA,CAAM,SAAA,CAAU,QAAQ;QACxD,CAAC,GACD,IAAA,CAAK,KAAA,EACL,IAAA,CAAK,cAAA;IAET;IAEO,qBAAqB,GAAA,EAAa;QACvC,OAAO,oLAAI,+BAAA,CACT,wMAAI,wBAAA,CAAsB;YACxB,MAAM;gBACJ,GAAG,IAAA,CAAK,IAAA;gBACR,KAAK,IAAA,CAAK,IAAA,CAAK,GAAA,GAAM,GAAG,IAAA,CAAK,IAAA,CAAK,GAAG,CAAA,aAAA,EAAgB,GAAG,CAAA,CAAA,CAAA;gBACxD,kBAAkB;gBAClB,oBAAoB;oBAAE,MAAM;oBAAS,OAAO;gBAAI;YAClD;YACA,UAAU,MAAM;gBACd,MAAM,cAAc,IAAA,CAAK,QAAA,CAAS,EAAE,WAAA;gBACpC,MAAM,aAAa,aAAA,CAAc,GAAG,CAAA;gBACpC,IAAI,CAAC,WAAY,CAAA,iMAAO,cAAA;gBAExB,OAAO;oBACL,GAAG,UAAA;oBACH,QAAQ;gBACV;YACF;YACA,WAAW,CAAC,WAAa,IAAA,CAAK,KAAA,CAAM,SAAA,CAAU,QAAQ;QACxD,CAAC;IAEL;AACF","ignoreList":[0]}},
    {"offset": {"line": 780, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 786, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/api/ThreadRuntime.ts"],"sourcesContent":["import {\n  ThreadSuggestion,\n  RuntimeCapabilities,\n  ThreadRuntimeCore,\n  SpeechState,\n  ThreadRuntimeEventType,\n  StartRunConfig,\n} from \"../runtimes/core/ThreadRuntimeCore\";\nimport { ExportedMessageRepository } from \"../runtimes/utils/MessageRepository\";\nimport {\n  AppendMessage,\n  ModelConfig,\n  ThreadMessage,\n  Unsubscribe,\n} from \"../types\";\nimport {\n  MessageRuntime,\n  MessageRuntimeImpl,\n  MessageState,\n} from \"./MessageRuntime\";\nimport { NestedSubscriptionSubject } from \"./subscribable/NestedSubscriptionSubject\";\nimport { ShallowMemoizeSubject } from \"./subscribable/ShallowMemoizeSubject\";\nimport {\n  Subscribable,\n  SubscribableWithState,\n} from \"./subscribable/Subscribable\";\nimport {\n  ThreadComposerRuntime,\n  ThreadComposerRuntimeImpl,\n} from \"./ComposerRuntime\";\nimport { LazyMemoizeSubject } from \"./subscribable/LazyMemoizeSubject\";\nimport { SKIP_UPDATE } from \"./subscribable/SKIP_UPDATE\";\nimport {\n  MessageRuntimePath,\n  ThreadListItemRuntimePath,\n  ThreadRuntimePath,\n} from \"./RuntimePathTypes\";\nimport { ThreadListItemState } from \"./ThreadListItemRuntime\";\n\nexport type CreateAppendMessage =\n  | string\n  | {\n      parentId?: string | null | undefined;\n      role?: AppendMessage[\"role\"] | undefined;\n      content: AppendMessage[\"content\"];\n      attachments?: AppendMessage[\"attachments\"] | undefined;\n      startRun?: boolean | undefined;\n    };\n\nconst toAppendMessage = (\n  messages: readonly ThreadMessage[],\n  message: CreateAppendMessage,\n): AppendMessage => {\n  if (typeof message === \"string\") {\n    return {\n      parentId: messages.at(-1)?.id ?? null,\n      role: \"user\",\n      content: [{ type: \"text\", text: message }],\n      attachments: [],\n    };\n  }\n\n  if (message.role && message.parentId && message.attachments) {\n    return message as AppendMessage;\n  }\n\n  return {\n    ...message,\n    parentId: message.parentId ?? messages.at(-1)?.id ?? null,\n    role: message.role ?? \"user\",\n    attachments: message.attachments ?? [],\n  } as AppendMessage;\n};\n\nexport type ThreadRuntimeCoreBinding = SubscribableWithState<\n  ThreadRuntimeCore,\n  ThreadRuntimePath\n> & {\n  outerSubscribe(callback: () => void): Unsubscribe;\n};\n\nexport type ThreadListItemRuntimeBinding = SubscribableWithState<\n  ThreadListItemState,\n  ThreadListItemRuntimePath\n>;\n\nexport type ThreadState = {\n  /**\n   * The thread ID.\n   * @deprecated This field is deprecated and will be removed in 0.8.0. Use `useThreadListItem().id` instead.\n   */\n  readonly threadId: string;\n\n  /**\n   * The thread metadata.\n   *\n   * @deprecated Use `useThreadListItem()` instead. This field is deprecated and will be removed in 0.8.0.\n   */\n  readonly metadata: ThreadListItemState;\n\n  /**\n   * Whether the thread is disabled. Disabled threads cannot receive new messages.\n   */\n  readonly isDisabled: boolean;\n\n  /**\n   * Whether the thread is running. A thread is considered running when there is an active stream connection to the backend.\n   */\n  readonly isRunning: boolean;\n\n  /**\n   * The capabilities of the thread, such as whether the thread supports editing, branch switching, etc.\n   */\n  readonly capabilities: RuntimeCapabilities;\n\n  /**\n   * The messages in the currently selected branch of the thread.\n   */\n  readonly messages: readonly ThreadMessage[];\n\n  /**\n   * Follow up message suggestions to show the user.\n   */\n  readonly suggestions: readonly ThreadSuggestion[];\n\n  /**\n   * Custom extra information provided by the runtime.\n   */\n  readonly extras: unknown;\n\n  /**\n   * @deprecated This API is still under active development and might change without notice.\n   */\n  readonly speech: SpeechState | undefined;\n};\n\nexport const getThreadState = (\n  runtime: ThreadRuntimeCore,\n  threadListItemState: ThreadListItemState,\n): ThreadState => {\n  const lastMessage = runtime.messages.at(-1);\n  return Object.freeze({\n    threadId: threadListItemState.id,\n    metadata: threadListItemState,\n    capabilities: runtime.capabilities,\n    isDisabled: runtime.isDisabled,\n    isRunning:\n      lastMessage?.role !== \"assistant\"\n        ? false\n        : lastMessage.status.type === \"running\",\n    messages: runtime.messages,\n    suggestions: runtime.suggestions,\n    extras: runtime.extras,\n    speech: runtime.speech,\n  });\n};\n\nexport type ThreadRuntime = {\n  /**\n   * The selector for the thread runtime.\n   */\n  readonly path: ThreadRuntimePath;\n\n  /**\n   * The thread composer runtime.\n   */\n  readonly composer: ThreadComposerRuntime;\n\n  /**\n   * Gets a snapshot of the thread state.\n   */\n  getState(): ThreadState;\n\n  /**\n   * Append a new message to the thread.\n   *\n   * @example ```ts\n   * // append a new user message with the text \"Hello, world!\"\n   * threadRuntime.append(\"Hello, world!\");\n   * ```\n   *\n   * @example ```ts\n   * // append a new assistant message with the text \"Hello, world!\"\n   * threadRuntime.append({\n   *   role: \"assistant\",\n   *   content: [{ type: \"text\", text: \"Hello, world!\" }],\n   * });\n   * ```\n   */\n  append(message: CreateAppendMessage): void;\n\n  /**\n   * @deprecated pass an object with `parentId` instead. This will be removed in 0.8.0.\n   */\n  startRun(parentId: string | null): void;\n  startRun(config: StartRunConfig): void;\n  subscribe(callback: () => void): Unsubscribe;\n  cancelRun(): void;\n  getModelConfig(): ModelConfig;\n  export(): ExportedMessageRepository;\n  import(repository: ExportedMessageRepository): void;\n  getMesssageByIndex(idx: number): MessageRuntime;\n  getMesssageById(messageId: string): MessageRuntime;\n\n  /**\n   * @deprecated This API is still under active development and might change without notice.\n   */\n  stopSpeaking: () => void;\n\n  unstable_on(event: ThreadRuntimeEventType, callback: () => void): Unsubscribe;\n};\n\nexport class ThreadRuntimeImpl implements ThreadRuntime {\n  public get path() {\n    return this._threadBinding.path;\n  }\n\n  public get __internal_threadBinding() {\n    return this._threadBinding;\n  }\n\n  private readonly _threadBinding: ThreadRuntimeCoreBinding & {\n    getStateState(): ThreadState;\n  };\n\n  constructor(\n    threadBinding: ThreadRuntimeCoreBinding,\n    threadListItemBinding: ThreadListItemRuntimeBinding,\n  ) {\n    const stateBinding = new LazyMemoizeSubject({\n      path: threadBinding.path,\n      getState: () =>\n        getThreadState(\n          threadBinding.getState(),\n          threadListItemBinding.getState(),\n        ),\n      subscribe: (callback) => {\n        const sub1 = threadBinding.subscribe(callback);\n        const sub2 = threadListItemBinding.subscribe(callback);\n        return () => {\n          sub1();\n          sub2();\n        };\n      },\n    });\n\n    this._threadBinding = {\n      path: threadBinding.path,\n      getState: () => threadBinding.getState(),\n      getStateState: () => stateBinding.getState(),\n      outerSubscribe: (callback) => threadBinding.outerSubscribe(callback),\n      subscribe: (callback) => threadBinding.subscribe(callback),\n    };\n\n    this.composer = new ThreadComposerRuntimeImpl(\n      new NestedSubscriptionSubject({\n        path: {\n          ...this.path,\n          ref: this.path.ref + `${this.path.ref}.composer`,\n          composerSource: \"thread\",\n        },\n        getState: () => this._threadBinding.getState().composer,\n        subscribe: (callback) => this._threadBinding.subscribe(callback),\n      }),\n    );\n  }\n\n  public readonly composer;\n\n  public getState() {\n    return this._threadBinding.getStateState();\n  }\n\n  public append(message: CreateAppendMessage) {\n    this._threadBinding\n      .getState()\n      .append(\n        toAppendMessage(this._threadBinding.getState().messages, message),\n      );\n  }\n\n  public subscribe(callback: () => void) {\n    return this._threadBinding.subscribe(callback);\n  }\n\n  public getModelConfig() {\n    return this._threadBinding.getState().getModelConfig();\n  }\n\n  public startRun(configOrParentId: string | null | StartRunConfig) {\n    const config =\n      configOrParentId === null || typeof configOrParentId === \"string\"\n        ? { parentId: configOrParentId }\n        : configOrParentId;\n    return this._threadBinding.getState().startRun(config);\n  }\n\n  public cancelRun() {\n    this._threadBinding.getState().cancelRun();\n  }\n\n  public stopSpeaking() {\n    return this._threadBinding.getState().stopSpeaking();\n  }\n\n  public getSubmittedFeedback(messageId: string) {\n    return this._threadBinding.getState().getSubmittedFeedback(messageId);\n  }\n\n  public export() {\n    return this._threadBinding.getState().export();\n  }\n\n  public import(data: ExportedMessageRepository) {\n    this._threadBinding.getState().import(data);\n  }\n\n  public getMesssageByIndex(idx: number) {\n    if (idx < 0) throw new Error(\"Message index must be >= 0\");\n\n    return this._getMessageRuntime(\n      {\n        ...this.path,\n        ref: this.path.ref + `${this.path.ref}.messages[${idx}]`,\n        messageSelector: { type: \"index\", index: idx },\n      },\n      () => {\n        const messages = this._threadBinding.getState().messages;\n        const message = messages[idx];\n        if (!message) return undefined;\n        return {\n          message,\n          parentId: messages[idx - 1]?.id ?? null,\n        };\n      },\n    );\n  }\n\n  public getMesssageById(messageId: string) {\n    return this._getMessageRuntime(\n      {\n        ...this.path,\n        ref:\n          this.path.ref +\n          `${this.path.ref}.messages[messageId=${JSON.stringify(messageId)}]`,\n        messageSelector: { type: \"messageId\", messageId: messageId },\n      },\n      () => this._threadBinding.getState().getMessageById(messageId),\n    );\n  }\n\n  private _getMessageRuntime(\n    path: MessageRuntimePath,\n    callback: () =>\n      | { parentId: string | null; message: ThreadMessage }\n      | undefined,\n  ) {\n    return new MessageRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path,\n        getState: () => {\n          const { message, parentId } = callback() ?? {};\n\n          const { messages, speech: speechState } =\n            this._threadBinding.getState();\n\n          if (!message || parentId === undefined) return SKIP_UPDATE;\n\n          const thread = this._threadBinding.getState();\n\n          const branches = thread.getBranches(message.id);\n          const submittedFeedback = thread.getSubmittedFeedback(message.id);\n\n          return {\n            ...message,\n\n            isLast: messages.at(-1)?.id === message.id,\n            parentId,\n\n            branchNumber: branches.indexOf(message.id) + 1,\n            branchCount: branches.length,\n\n            speech:\n              speechState?.messageId === message.id ? speechState : undefined,\n\n            submittedFeedback,\n          } satisfies MessageState;\n        },\n        subscribe: (callback) => this._threadBinding.subscribe(callback),\n      }),\n      this._threadBinding,\n    );\n  }\n\n  private _eventListenerNestedSubscriptions = new Map<\n    string,\n    NestedSubscriptionSubject<Subscribable, ThreadRuntimePath>\n  >();\n\n  public unstable_on(\n    event: ThreadRuntimeEventType,\n    callback: () => void,\n  ): Unsubscribe {\n    let subject = this._eventListenerNestedSubscriptions.get(event);\n    if (!subject) {\n      subject = new NestedSubscriptionSubject({\n        path: this.path,\n        getState: () => ({\n          subscribe: (callback) =>\n            this._threadBinding.getState().unstable_on(event, callback),\n        }),\n        subscribe: (callback) => this._threadBinding.outerSubscribe(callback),\n      });\n      this._eventListenerNestedSubscriptions.set(event, subject);\n    }\n    return subject.subscribe(callback);\n  }\n}\n"],"names":["callback"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 983, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 989, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/api/ThreadListItemRuntime.ts"],"sourcesContent":["import { Unsubscribe } from \"../types\";\nimport { ThreadListItemRuntimePath } from \"./RuntimePathTypes\";\nimport { SubscribableWithState } from \"./subscribable/Subscribable\";\nimport { ThreadListRuntimeCoreBinding } from \"./ThreadListRuntime\";\n\nexport type ThreadListItemEventType = \"switched-to\" | \"switched-away\";\n\nexport type ThreadListItemState = {\n  readonly isMain: boolean;\n\n  readonly id: string;\n  readonly remoteId: string | undefined;\n  readonly externalId: string | undefined;\n\n  /**\n   * @deprecated This field was renamed to `id`. This field will be removed in 0.8.0.\n   */\n  readonly threadId: string;\n\n  readonly status: \"archived\" | \"regular\" | \"new\" | \"deleted\";\n  readonly title?: string | undefined;\n};\n\nexport type ThreadListItemRuntime = {\n  readonly path: ThreadListItemRuntimePath;\n  getState(): ThreadListItemState;\n\n  switchTo(): Promise<void>;\n  rename(newTitle: string): Promise<void>;\n  archive(): Promise<void>;\n  unarchive(): Promise<void>;\n  delete(): Promise<void>;\n\n  subscribe(callback: () => void): Unsubscribe;\n\n  unstable_on(\n    event: ThreadListItemEventType,\n    callback: () => void,\n  ): Unsubscribe;\n};\n\nexport type ThreadListItemStateBinding = SubscribableWithState<\n  ThreadListItemState,\n  ThreadListItemRuntimePath\n>;\n\nexport class ThreadListItemRuntimeImpl implements ThreadListItemRuntime {\n  public get path() {\n    return this._core.path;\n  }\n\n  constructor(\n    private _core: ThreadListItemStateBinding,\n    private _threadListBinding: ThreadListRuntimeCoreBinding,\n  ) {}\n\n  public getState(): ThreadListItemState {\n    return this._core.getState();\n  }\n\n  public switchTo(): Promise<void> {\n    const state = this._core.getState();\n    return this._threadListBinding.switchToThread(state.id);\n  }\n\n  public rename(newTitle: string): Promise<void> {\n    const state = this._core.getState();\n\n    return this._threadListBinding.rename(state.id, newTitle);\n  }\n\n  public archive(): Promise<void> {\n    const state = this._core.getState();\n\n    return this._threadListBinding.archive(state.id);\n  }\n\n  public unarchive(): Promise<void> {\n    const state = this._core.getState();\n\n    return this._threadListBinding.unarchive(state.id);\n  }\n\n  public delete(): Promise<void> {\n    const state = this._core.getState();\n\n    return this._threadListBinding.delete(state.id);\n  }\n\n  public unstable_on(event: ThreadListItemEventType, callback: () => void) {\n    let prevIsMain = this._core.getState().isMain;\n    return this.subscribe(() => {\n      const newIsMain = this._core.getState().isMain;\n      if (prevIsMain === newIsMain) return;\n      prevIsMain = newIsMain;\n\n      if (event === \"switched-to\" && !newIsMain) return;\n      if (event === \"switched-away\" && newIsMain) return;\n      callback();\n    });\n  }\n\n  public subscribe(callback: () => void): Unsubscribe {\n    return this._core.subscribe(callback);\n  }\n}\n"],"names":[],"mappings":";;;;AA8CO,IAAM,4BAAN,MAAiE;IAKtE,YACU,KAAA,EACA,kBAAA,CACR;QAFQ,IAAA,CAAA,KAAA,GAAA;QACA,IAAA,CAAA,kBAAA,GAAA;IACP;IAPH,IAAW,OAAO;QAChB,OAAO,IAAA,CAAK,KAAA,CAAM,IAAA;IACpB;IAOO,WAAgC;QACrC,OAAO,IAAA,CAAK,KAAA,CAAM,QAAA,CAAS;IAC7B;IAEO,WAA0B;QAC/B,MAAM,QAAQ,IAAA,CAAK,KAAA,CAAM,QAAA,CAAS;QAClC,OAAO,IAAA,CAAK,kBAAA,CAAmB,cAAA,CAAe,MAAM,EAAE;IACxD;IAEO,OAAO,QAAA,EAAiC;QAC7C,MAAM,QAAQ,IAAA,CAAK,KAAA,CAAM,QAAA,CAAS;QAElC,OAAO,IAAA,CAAK,kBAAA,CAAmB,MAAA,CAAO,MAAM,EAAA,EAAI,QAAQ;IAC1D;IAEO,UAAyB;QAC9B,MAAM,QAAQ,IAAA,CAAK,KAAA,CAAM,QAAA,CAAS;QAElC,OAAO,IAAA,CAAK,kBAAA,CAAmB,OAAA,CAAQ,MAAM,EAAE;IACjD;IAEO,YAA2B;QAChC,MAAM,QAAQ,IAAA,CAAK,KAAA,CAAM,QAAA,CAAS;QAElC,OAAO,IAAA,CAAK,kBAAA,CAAmB,SAAA,CAAU,MAAM,EAAE;IACnD;IAEO,SAAwB;QAC7B,MAAM,QAAQ,IAAA,CAAK,KAAA,CAAM,QAAA,CAAS;QAElC,OAAO,IAAA,CAAK,kBAAA,CAAmB,MAAA,CAAO,MAAM,EAAE;IAChD;IAEO,YAAY,KAAA,EAAgC,QAAA,EAAsB;QACvE,IAAI,aAAa,IAAA,CAAK,KAAA,CAAM,QAAA,CAAS,EAAE,MAAA;QACvC,OAAO,IAAA,CAAK,SAAA,CAAU,MAAM;YAC1B,MAAM,YAAY,IAAA,CAAK,KAAA,CAAM,QAAA,CAAS,EAAE,MAAA;YACxC,IAAI,eAAe,UAAW,CAAA;YAC9B,aAAa;YAEb,IAAI,UAAU,iBAAiB,CAAC,UAAW,CAAA;YAC3C,IAAI,UAAU,mBAAmB,UAAW,CAAA;YAC5C,SAAS;QACX,CAAC;IACH;IAEO,UAAU,QAAA,EAAmC;QAClD,OAAO,IAAA,CAAK,KAAA,CAAM,SAAA,CAAU,QAAQ;IACtC;AACF","ignoreList":[0]}},
    {"offset": {"line": 1041, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1047, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/api/ThreadListRuntime.ts"],"sourcesContent":["import { LazyMemoizeSubject } from \"./subscribable/LazyMemoizeSubject\";\nimport { ThreadListRuntimeCore } from \"../runtimes/core/ThreadListRuntimeCore\";\nimport { Unsubscribe } from \"../types\";\nimport {\n  ThreadListItemRuntime,\n  ThreadListItemRuntimeImpl,\n  ThreadListItemState,\n} from \"./ThreadListItemRuntime\";\nimport { SKIP_UPDATE } from \"./subscribable/SKIP_UPDATE\";\nimport { ShallowMemoizeSubject } from \"./subscribable/ShallowMemoizeSubject\";\n\nexport type ThreadListState = {\n  readonly mainThreadId: string;\n  readonly newThread: string | undefined;\n  readonly threads: readonly string[];\n  readonly archivedThreads: readonly string[];\n};\n\nexport type ThreadListRuntime = {\n  getState(): ThreadListState;\n\n  subscribe(callback: () => void): Unsubscribe;\n\n  readonly mainItem: ThreadListItemRuntime;\n  getItemById(threadId: string): ThreadListItemRuntime;\n  getItemByIndex(idx: number): ThreadListItemRuntime;\n  getArchivedItemByIndex(idx: number): ThreadListItemRuntime;\n};\n\nconst getThreadListState = (\n  threadList: ThreadListRuntimeCore,\n): ThreadListState => {\n  return {\n    mainThreadId: threadList.mainThreadId,\n    newThread: threadList.newThreadId,\n    threads: threadList.threadIds,\n    archivedThreads: threadList.archivedThreadIds,\n  };\n};\n\nconst getThreadListItemState = (\n  threadList: ThreadListRuntimeCore,\n  threadId: string | undefined,\n): ThreadListItemState | SKIP_UPDATE => {\n  if (threadId === undefined) return SKIP_UPDATE;\n\n  const threadData = threadList.getItemById(threadId);\n  if (!threadData) return SKIP_UPDATE;\n  return {\n    id: threadData.threadId,\n    threadId: threadData.threadId, // TODO remove in 0.8.0\n    remoteId: threadData.remoteId,\n    externalId: threadData.externalId,\n    title: threadData.title,\n    status: threadData.status,\n    isMain: threadData.threadId === threadList.mainThreadId,\n  };\n};\n\nexport type ThreadListRuntimeCoreBinding = ThreadListRuntimeCore;\n\nexport class ThreadListRuntimeImpl implements ThreadListRuntime {\n  private _getState;\n  constructor(private _core: ThreadListRuntimeCoreBinding) {\n    const stateBinding = new LazyMemoizeSubject({\n      path: {},\n      getState: () => getThreadListState(_core),\n      subscribe: (callback) => _core.subscribe(callback),\n    });\n\n    this._getState = stateBinding.getState.bind(stateBinding);\n\n    this._mainThreadListItemRuntime = new ThreadListItemRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ref: `threadItems[main]`,\n          threadSelector: { type: \"main\" },\n        },\n        getState: () => {\n          return getThreadListItemState(this._core, this._core.mainThreadId);\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n    );\n  }\n\n  public getState(): ThreadListState {\n    return this._getState();\n  }\n\n  public subscribe(callback: () => void): Unsubscribe {\n    return this._core.subscribe(callback);\n  }\n\n  private _mainThreadListItemRuntime;\n\n  public get mainItem() {\n    return this._mainThreadListItemRuntime;\n  }\n\n  public getItemByIndex(idx: number) {\n    return new ThreadListItemRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ref: `threadItems[${idx}]`,\n          threadSelector: { type: \"index\", index: idx },\n        },\n        getState: () => {\n          return getThreadListItemState(this._core, this._core.threadIds[idx]);\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n    );\n  }\n\n  public getArchivedItemByIndex(idx: number) {\n    return new ThreadListItemRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ref: `archivedThreadItems[${idx}]`,\n          threadSelector: { type: \"archiveIndex\", index: idx },\n        },\n        getState: () => {\n          return getThreadListItemState(\n            this._core,\n            this._core.archivedThreadIds[idx],\n          );\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n    );\n  }\n\n  public getItemById(threadId: string) {\n    return new ThreadListItemRuntimeImpl(\n      new ShallowMemoizeSubject({\n        path: {\n          ref: `threadItems[threadId=${threadId}]`,\n          threadSelector: { type: \"threadId\", threadId },\n        },\n        getState: () => {\n          return getThreadListItemState(this._core, threadId);\n        },\n        subscribe: (callback) => this._core.subscribe(callback),\n      }),\n      this._core,\n    );\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1163, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1169, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/api/AssistantRuntime.ts"],"sourcesContent":["import { AssistantRuntimeCore } from \"../runtimes/core/AssistantRuntimeCore\";\nimport { NestedSubscriptionSubject } from \"./subscribable/NestedSubscriptionSubject\";\nimport { ModelConfigProvider } from \"../types/ModelConfigTypes\";\nimport {\n  ThreadListItemRuntimeBinding,\n  ThreadRuntime,\n  ThreadRuntimeCoreBinding,\n  ThreadRuntimeImpl,\n} from \"./ThreadRuntime\";\nimport { Unsubscribe } from \"../types\";\nimport { ThreadListRuntime, ThreadListRuntimeImpl } from \"./ThreadListRuntime\";\n\nexport type AssistantRuntime = {\n  /**\n   * The currently selected main thread.\n   */\n  readonly thread: ThreadRuntime;\n\n  /**\n   * The thread manager, to rename, archive and delete threads.\n   */\n  readonly threadList: ThreadListRuntime;\n\n  /**\n   * Switch to a new thread.\n   */\n  switchToNewThread(): void;\n\n  /**\n   * Switch to a thread.\n   *\n   * @param threadId The thread ID to switch to.\n   */\n  switchToThread(threadId: string): void;\n\n  /**\n   * Register a model config provider. Model config providers are configuration such as system message, temperature, etc. that are set in the frontend.\n   *\n   * @param provider The model config provider to register.\n   */\n  registerModelConfigProvider(provider: ModelConfigProvider): Unsubscribe;\n};\n\nexport class AssistantRuntimeImpl implements AssistantRuntime {\n  public readonly threadList;\n  public readonly _thread: ThreadRuntime;\n\n  protected constructor(\n    private readonly _core: AssistantRuntimeCore,\n    runtimeFactory: new (\n      binding: ThreadRuntimeCoreBinding,\n      threadListItemBinding: ThreadListItemRuntimeBinding,\n    ) => ThreadRuntime = ThreadRuntimeImpl,\n  ) {\n    this.threadList = new ThreadListRuntimeImpl(_core.threadList);\n    this._thread = new runtimeFactory(\n      new NestedSubscriptionSubject({\n        path: {\n          ref: \"threads.main\",\n          threadSelector: { type: \"main\" },\n        },\n        getState: () => _core.threadList.getMainThreadRuntimeCore(),\n        subscribe: (callback) => _core.threadList.subscribe(callback),\n      }),\n      this.threadList.mainItem, // TODO capture \"main\" threadListItem from context around useLocalRuntime / useExternalStoreRuntime\n    );\n  }\n\n  public get thread() {\n    return this._thread;\n  }\n\n  public switchToNewThread() {\n    return this._core.threadList.switchToNewThread();\n  }\n\n  public switchToThread(threadId: string) {\n    return this._core.threadList.switchToThread(threadId);\n  }\n\n  public registerModelConfigProvider(provider: ModelConfigProvider) {\n    return this._core.registerModelConfigProvider(provider);\n  }\n\n  public static create(\n    _core: AssistantRuntimeCore,\n    runtimeFactory: new (\n      binding: ThreadRuntimeCoreBinding,\n      threadListItemBinding: ThreadListItemRuntimeBinding,\n    ) => ThreadRuntime = ThreadRuntimeImpl,\n  ): AssistantRuntime {\n    return new AssistantRuntimeImpl(_core, runtimeFactory);\n  }\n}\n"],"names":[],"mappings":";;;;AAGA;AAOA,SAA4B,6BAA6B;AATzD,SAAS,iCAAiC;;;;AA0CnC,IAAM,uBAAN,MAAM,sBAAiD;IAIlD,YACS,KAAA,EACjB,6LAGqB,oBAAA,CACrB;QALiB,IAAA,CAAA,KAAA,GAAA;QAMjB,IAAA,CAAK,UAAA,GAAa,oLAAI,wBAAA,CAAsB,MAAM,UAAU;QAC5D,IAAA,CAAK,OAAA,GAAU,IAAI,eACjB,4MAAI,4BAAA,CAA0B;YAC5B,MAAM;gBACJ,KAAK;gBACL,gBAAgB;oBAAE,MAAM;gBAAO;YACjC;YACA,UAAU,IAAM,MAAM,UAAA,CAAW,wBAAA,CAAyB;YAC1D,WAAW,CAAC,WAAa,MAAM,UAAA,CAAW,SAAA,CAAU,QAAQ;QAC9D,CAAC,GACD,IAAA,CAAK,UAAA,CAAW,QAAA;IAEpB;IAtBgB,WAAA;IACA,QAAA;IAuBhB,IAAW,SAAS;QAClB,OAAO,IAAA,CAAK,OAAA;IACd;IAEO,oBAAoB;QACzB,OAAO,IAAA,CAAK,KAAA,CAAM,UAAA,CAAW,iBAAA,CAAkB;IACjD;IAEO,eAAe,QAAA,EAAkB;QACtC,OAAO,IAAA,CAAK,KAAA,CAAM,UAAA,CAAW,cAAA,CAAe,QAAQ;IACtD;IAEO,4BAA4B,QAAA,EAA+B;QAChE,OAAO,IAAA,CAAK,KAAA,CAAM,2BAAA,CAA4B,QAAQ;IACxD;IAEA,OAAc,OACZ,KAAA,EACA,6LAGqB,oBAAA,EACH;QAClB,OAAO,IAAI,sBAAqB,OAAO,cAAc;IACvD;AACF","ignoreList":[0]}},
    {"offset": {"line": 1214, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1220, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/types/ModelConfigTypes.ts"],"sourcesContent":["import { z } from \"zod\";\nimport type { JSONSchema7 } from \"json-schema\";\nimport { Unsubscribe } from \"./Unsubscribe\";\n\nexport const LanguageModelV1CallSettingsSchema = z.object({\n  maxTokens: z.number().int().positive().optional(),\n  temperature: z.number().optional(),\n  topP: z.number().optional(),\n  presencePenalty: z.number().optional(),\n  frequencyPenalty: z.number().optional(),\n  seed: z.number().int().optional(),\n  headers: z.record(z.string().optional()).optional(),\n});\n\nexport type LanguageModelV1CallSettings = z.infer<\n  typeof LanguageModelV1CallSettingsSchema\n>;\n\nexport const LanguageModelConfigSchema = z.object({\n  apiKey: z.string().optional(),\n  baseUrl: z.string().optional(),\n  modelName: z.string().optional(),\n});\n\nexport type LanguageModelConfig = z.infer<typeof LanguageModelConfigSchema>;\n\ntype ToolExecuteFunction<TArgs, TResult> = (\n  args: TArgs,\n  context: {\n    abortSignal: AbortSignal;\n  },\n) => TResult | Promise<TResult>;\n\nexport type Tool<\n  TArgs extends Record<string, unknown> = Record<string | number, unknown>,\n  TResult = unknown,\n> = {\n  description?: string | undefined;\n  parameters: z.ZodSchema<TArgs> | JSONSchema7;\n  execute?: ToolExecuteFunction<TArgs, TResult>;\n};\n\nexport type ModelConfig = {\n  priority?: number | undefined;\n  system?: string | undefined;\n  tools?: Record<string, Tool<any, any>> | undefined;\n  callSettings?: LanguageModelV1CallSettings | undefined;\n  config?: LanguageModelConfig | undefined;\n};\n\nexport type ModelConfigProvider = {\n  getModelConfig: () => ModelConfig;\n  subscribe?: (callback: () => void) => Unsubscribe;\n};\n\nexport const mergeModelConfigs = (\n  configSet: Set<ModelConfigProvider>,\n): ModelConfig => {\n  const configs = Array.from(configSet)\n    .map((c) => c.getModelConfig())\n    .sort((a, b) => (b.priority ?? 0) - (a.priority ?? 0));\n\n  return configs.reduce((acc, config) => {\n    if (config.system) {\n      if (acc.system) {\n        // TODO should the separator be configurable?\n        acc.system += `\\n\\n${config.system}`;\n      } else {\n        acc.system = config.system;\n      }\n    }\n    if (config.tools) {\n      for (const [name, tool] of Object.entries(config.tools)) {\n        if (acc.tools?.[name]) {\n          throw new Error(\n            `You tried to define a tool with the name ${name}, but it already exists.`,\n          );\n        }\n        if (!acc.tools) acc.tools = {};\n        acc.tools[name] = tool;\n      }\n    }\n    if (config.config) {\n      acc.config = {\n        ...acc.config,\n        ...config.config,\n      };\n    }\n    if (config.callSettings) {\n      acc.callSettings = {\n        ...acc.callSettings,\n        ...config.callSettings,\n      };\n    }\n    return acc;\n  }, {} as ModelConfig);\n};\n"],"names":[],"mappings":";;;;;;AAAA,SAAS,SAAS;;AAIX,IAAM,yKAAoC,IAAA,CAAE,MAAA,CAAO;IACxD,gJAAW,IAAA,CAAE,MAAA,CAAO,EAAE,GAAA,CAAI,EAAE,QAAA,CAAS,EAAE,QAAA,CAAS;IAChD,kJAAa,IAAA,CAAE,MAAA,CAAO,EAAE,QAAA,CAAS;IACjC,2IAAM,IAAA,CAAE,MAAA,CAAO,EAAE,QAAA,CAAS;IAC1B,sJAAiB,IAAA,CAAE,MAAA,CAAO,EAAE,QAAA,CAAS;IACrC,uJAAkB,IAAA,CAAE,MAAA,CAAO,EAAE,QAAA,CAAS;IACtC,2IAAM,IAAA,CAAE,MAAA,CAAO,EAAE,GAAA,CAAI,EAAE,QAAA,CAAS;IAChC,8IAAS,IAAA,CAAE,MAAA,sIAAO,IAAA,CAAE,MAAA,CAAO,EAAE,QAAA,CAAS,CAAC,EAAE,QAAA,CAAS;AACpD,CAAC;AAMM,IAAM,iKAA4B,IAAA,CAAE,MAAA,CAAO;IAChD,6IAAQ,IAAA,CAAE,MAAA,CAAO,EAAE,QAAA,CAAS;IAC5B,8IAAS,IAAA,CAAE,MAAA,CAAO,EAAE,QAAA,CAAS;IAC7B,gJAAW,IAAA,CAAE,MAAA,CAAO,EAAE,QAAA,CAAS;AACjC,CAAC;AAiCM,IAAM,oBAAoB,CAC/B,cACgB;IAChB,MAAM,UAAU,MAAM,IAAA,CAAK,SAAS,EACjC,GAAA,CAAI,CAAC,IAAM,EAAE,cAAA,CAAe,CAAC,EAC7B,IAAA,CAAK,CAAC,GAAG,IAAA,CAAO,EAAE,QAAA,IAAY,CAAA,IAAA,CAAM,EAAE,QAAA,IAAY,CAAA,CAAE;IAEvD,OAAO,QAAQ,MAAA,CAAO,CAAC,KAAK,WAAW;QACrC,IAAI,OAAO,MAAA,EAAQ;YACjB,IAAI,IAAI,MAAA,EAAQ;gBAEd,IAAI,MAAA,IAAU,CAAA;;AAAA,EAAO,OAAO,MAAM,EAAA;YACpC,OAAO;gBACL,IAAI,MAAA,GAAS,OAAO,MAAA;YACtB;QACF;QACA,IAAI,OAAO,KAAA,EAAO;YAChB,KAAA,MAAW,CAAC,MAAM,IAAI,CAAA,IAAK,OAAO,OAAA,CAAQ,OAAO,KAAK,EAAG;gBACvD,IAAI,IAAI,KAAA,EAAA,CAAQ,IAAI,CAAA,EAAG;oBACrB,MAAM,IAAI,MACR,CAAA,yCAAA,EAA4C,IAAI,CAAA,wBAAA,CAAA;gBAEpD;gBACA,IAAI,CAAC,IAAI,KAAA,CAAO,CAAA,IAAI,KAAA,GAAQ,CAAC;gBAC7B,IAAI,KAAA,CAAM,IAAI,CAAA,GAAI;YACpB;QACF;QACA,IAAI,OAAO,MAAA,EAAQ;YACjB,IAAI,MAAA,GAAS;gBACX,GAAG,IAAI,MAAA;gBACP,GAAG,OAAO,MAAA;YACZ;QACF;QACA,IAAI,OAAO,YAAA,EAAc;YACvB,IAAI,YAAA,GAAe;gBACjB,GAAG,IAAI,YAAA;gBACP,GAAG,OAAO,YAAA;YACZ;QACF;QACA,OAAO;IACT,GAAG,CAAC,CAAgB;AACtB","ignoreList":[0]}},
    {"offset": {"line": 1280, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1286, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/utils/ProxyConfigProvider.ts"],"sourcesContent":["import {\n  type ModelConfigProvider,\n  mergeModelConfigs,\n} from \"../types/ModelConfigTypes\";\n\nexport class ProxyConfigProvider implements ModelConfigProvider {\n  private _providers = new Set<ModelConfigProvider>();\n\n  getModelConfig() {\n    return mergeModelConfigs(this._providers);\n  }\n\n  registerModelConfigProvider(provider: ModelConfigProvider) {\n    this._providers.add(provider);\n    const unsubscribe = provider.subscribe?.(() => {\n      this.notifySubscribers();\n    });\n    this.notifySubscribers();\n    return () => {\n      this._providers.delete(provider);\n      unsubscribe?.();\n      this.notifySubscribers();\n    };\n  }\n\n  private _subscribers = new Set<() => void>();\n\n  notifySubscribers() {\n    for (const callback of this._subscribers) callback();\n  }\n\n  subscribe(callback: () => void) {\n    this._subscribers.add(callback);\n    return () => this._subscribers.delete(callback);\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAKO,IAAM,sBAAN,MAAyD;IACtD,aAAa,aAAA,GAAA,IAAI,IAAyB,EAAA;IAElD,iBAAiB;QACf,4LAAO,oBAAA,EAAkB,IAAA,CAAK,UAAU;IAC1C;IAEA,4BAA4B,QAAA,EAA+B;QACzD,IAAA,CAAK,UAAA,CAAW,GAAA,CAAI,QAAQ;QAC5B,MAAM,cAAc,SAAS,SAAA,GAAY,MAAM;YAC7C,IAAA,CAAK,iBAAA,CAAkB;QACzB,CAAC;QACD,IAAA,CAAK,iBAAA,CAAkB;QACvB,OAAO,MAAM;YACX,IAAA,CAAK,UAAA,CAAW,MAAA,CAAO,QAAQ;YAC/B,cAAc;YACd,IAAA,CAAK,iBAAA,CAAkB;QACzB;IACF;IAEQ,eAAe,aAAA,GAAA,IAAI,IAAgB,EAAA;IAE3C,oBAAoB;QAClB,KAAA,MAAW,YAAY,IAAA,CAAK,YAAA,CAAc,SAAS;IACrD;IAEA,UAAU,QAAA,EAAsB;QAC9B,IAAA,CAAK,YAAA,CAAa,GAAA,CAAI,QAAQ;QAC9B,OAAO,IAAM,IAAA,CAAK,YAAA,CAAa,MAAA,CAAO,QAAQ;IAChD;AACF","ignoreList":[0]}},
    {"offset": {"line": 1320, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1326, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/runtimes/core/BaseAssistantRuntimeCore.tsx"],"sourcesContent":["import { type ModelConfigProvider } from \"../../types/ModelConfigTypes\";\nimport type { Unsubscribe } from \"../../types/Unsubscribe\";\nimport type { AssistantRuntimeCore } from \"./AssistantRuntimeCore\";\nimport { ProxyConfigProvider } from \"../../utils/ProxyConfigProvider\";\nimport { ThreadListRuntimeCore } from \"./ThreadListRuntimeCore\";\n\nexport abstract class BaseAssistantRuntimeCore implements AssistantRuntimeCore {\n  protected readonly _proxyConfigProvider = new ProxyConfigProvider();\n  public abstract get threadList(): ThreadListRuntimeCore;\n\n  constructor() {}\n\n  public registerModelConfigProvider(\n    provider: ModelConfigProvider,\n  ): Unsubscribe {\n    return this._proxyConfigProvider.registerModelConfigProvider(provider);\n  }\n}\n"],"names":[],"mappings":";;;;AAGA,SAAS,2BAA2B;;AAG7B,IAAe,2BAAf,MAAwE;IAC1D,uBAAuB,wLAAI,sBAAA,CAAoB,EAAA;IAGlE,aAAc,CAAC;IAER,4BACL,QAAA,EACa;QACb,OAAO,IAAA,CAAK,oBAAA,CAAqB,2BAAA,CAA4B,QAAQ;IACvE;AACF","ignoreList":[0]}},
    {"offset": {"line": 1341, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1347, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/runtimes/remote-thread-list/BaseSubscribable.tsx"],"sourcesContent":["import { Unsubscribe } from \"../../types\";\n\nexport class BaseSubscribable {\n  private _subscribers = new Set<() => void>();\n\n  public subscribe(callback: () => void): Unsubscribe {\n    this._subscribers.add(callback);\n    return () => this._subscribers.delete(callback);\n  }\n\n  public waitForUpdate() {\n    return new Promise<void>((resolve) => {\n      const unsubscribe = this.subscribe(() => {\n        unsubscribe();\n        resolve();\n      });\n    });\n  }\n\n  protected _notifySubscribers() {\n    const errors = [];\n    for (const callback of this._subscribers) {\n      try {\n        callback();\n      } catch (error) {\n        errors.push(error);\n      }\n    }\n\n    if (errors.length > 0) {\n      if (errors.length === 1) {\n        throw errors[0];\n      } else {\n        throw new AggregateError(errors);\n      }\n    }\n  }\n}\n"],"names":[],"mappings":";;;;AAEO,IAAM,mBAAN,MAAuB;IACpB,eAAe,aAAA,GAAA,IAAI,IAAgB,EAAA;IAEpC,UAAU,QAAA,EAAmC;QAClD,IAAA,CAAK,YAAA,CAAa,GAAA,CAAI,QAAQ;QAC9B,OAAO,IAAM,IAAA,CAAK,YAAA,CAAa,MAAA,CAAO,QAAQ;IAChD;IAEO,gBAAgB;QACrB,OAAO,IAAI,QAAc,CAAC,YAAY;YACpC,MAAM,cAAc,IAAA,CAAK,SAAA,CAAU,MAAM;gBACvC,YAAY;gBACZ,QAAQ;YACV,CAAC;QACH,CAAC;IACH;IAEU,qBAAqB;QAC7B,MAAM,SAAS,CAAC,CAAA;QAChB,KAAA,MAAW,YAAY,IAAA,CAAK,YAAA,CAAc;YACxC,IAAI;gBACF,SAAS;YACX,EAAA,OAAS,OAAO;gBACd,OAAO,IAAA,CAAK,KAAK;YACnB;QACF;QAEA,IAAI,OAAO,MAAA,GAAS,GAAG;YACrB,IAAI,OAAO,MAAA,KAAW,GAAG;gBACvB,MAAM,MAAA,CAAO,CAAC,CAAA;YAChB,OAAO;gBACL,MAAM,IAAI,eAAe,MAAM;YACjC;QACF;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 1385, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1391, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/runtimes/composer/BaseComposerRuntimeCore.tsx"],"sourcesContent":["import {\n  Attachment,\n  CompleteAttachment,\n  PendingAttachment,\n} from \"../../types/AttachmentTypes\";\nimport { AppendMessage } from \"../../types\";\nimport { AttachmentAdapter } from \"../attachment\";\nimport {\n  ComposerRuntimeCore,\n  ComposerRuntimeEventType,\n} from \"../core/ComposerRuntimeCore\";\nimport { MessageRole, RunConfig } from \"../../types/AssistantTypes\";\nimport { BaseSubscribable } from \"../remote-thread-list/BaseSubscribable\";\n\nconst isAttachmentComplete = (a: Attachment): a is CompleteAttachment =>\n  a.status.type === \"complete\";\n\nexport abstract class BaseComposerRuntimeCore\n  extends BaseSubscribable\n  implements ComposerRuntimeCore\n{\n  public readonly isEditing = true;\n\n  protected abstract getAttachmentAdapter(): AttachmentAdapter | undefined;\n\n  public getAttachmentAccept(): string {\n    return this.getAttachmentAdapter()?.accept ?? \"*\";\n  }\n\n  private _attachments: readonly Attachment[] = [];\n  public get attachments() {\n    return this._attachments;\n  }\n\n  protected setAttachments(value: readonly Attachment[]) {\n    this._attachments = value;\n    this._notifySubscribers();\n  }\n\n  public abstract get canCancel(): boolean;\n\n  public get isEmpty() {\n    return !this.text.trim() && !this.attachments.length;\n  }\n\n  private _text = \"\";\n\n  get text() {\n    return this._text;\n  }\n\n  private _role: MessageRole = \"user\";\n\n  get role() {\n    return this._role;\n  }\n\n  private _runConfig: RunConfig = {};\n\n  get runConfig() {\n    return this._runConfig;\n  }\n\n  public setText(value: string) {\n    if (this._text === value) return;\n\n    this._text = value;\n    this._notifySubscribers();\n  }\n\n  public setRole(role: MessageRole) {\n    if (this._role === role) return;\n\n    this._role = role;\n    this._notifySubscribers();\n  }\n\n  public setRunConfig(runConfig: RunConfig) {\n    if (this._runConfig === runConfig) return;\n\n    this._runConfig = runConfig;\n    this._notifySubscribers();\n  }\n\n  private _emptyTextAndAttachments() {\n    this._attachments = [];\n    this._text = \"\";\n    this._notifySubscribers();\n  }\n\n  private async _onClearAttachments() {\n    const adapter = this.getAttachmentAdapter();\n    if (adapter) {\n      await Promise.all(this._attachments.map((a) => adapter.remove(a)));\n    }\n  }\n\n  public async reset() {\n    if (\n      this._attachments.length === 0 &&\n      this._text === \"\" &&\n      this._role === \"user\" &&\n      Object.keys(this._runConfig).length === 0\n    ) {\n      return;\n    }\n\n    this._role = \"user\";\n    this._runConfig = {};\n\n    const task = this._onClearAttachments();\n    this._emptyTextAndAttachments();\n    await task;\n  }\n\n  public async clearAttachments() {\n    const task = this._onClearAttachments();\n    this.setAttachments([]);\n\n    await task;\n  }\n\n  public async send() {\n    const adapter = this.getAttachmentAdapter();\n    const attachments =\n      adapter && this.attachments.length > 0\n        ? await Promise.all(\n            this.attachments.map(async (a) => {\n              if (isAttachmentComplete(a)) return a;\n              const result = await adapter.send(a);\n              return result as CompleteAttachment;\n            }),\n          )\n        : [];\n\n    const message: Omit<AppendMessage, \"parentId\"> = {\n      role: this.role,\n      content: this.text ? [{ type: \"text\", text: this.text }] : [],\n      attachments,\n      runConfig: this.runConfig,\n    };\n    this._emptyTextAndAttachments();\n\n    this.handleSend(message);\n    this._notifyEventSubscribers(\"send\");\n  }\n\n  public cancel() {\n    this.handleCancel();\n  }\n\n  protected abstract handleSend(message: Omit<AppendMessage, \"parentId\">): void;\n  protected abstract handleCancel(): void;\n\n  async addAttachment(file: File) {\n    const adapter = this.getAttachmentAdapter();\n    if (!adapter) throw new Error(\"Attachments are not supported\");\n\n    const attachment = await adapter.add({ file });\n\n    this._attachments = [...this._attachments, attachment as PendingAttachment];\n    this._notifySubscribers();\n  }\n\n  async removeAttachment(attachmentId: string) {\n    const adapter = this.getAttachmentAdapter();\n    if (!adapter) throw new Error(\"Attachments are not supported\");\n\n    const index = this._attachments.findIndex((a) => a.id === attachmentId);\n    if (index === -1) throw new Error(\"Attachment not found\");\n    const attachment = this._attachments[index]!;\n\n    await adapter.remove(attachment);\n\n    this._attachments = this._attachments.toSpliced(index, 1);\n    this._notifySubscribers();\n  }\n\n  private _eventSubscribers = new Map<\n    ComposerRuntimeEventType,\n    Set<() => void>\n  >();\n\n  protected _notifyEventSubscribers(event: ComposerRuntimeEventType) {\n    const subscribers = this._eventSubscribers.get(event);\n    if (!subscribers) return;\n\n    for (const callback of subscribers) callback();\n  }\n\n  public unstable_on(event: ComposerRuntimeEventType, callback: () => void) {\n    const subscribers = this._eventSubscribers.get(event);\n    if (!subscribers) {\n      this._eventSubscribers.set(event, new Set([callback]));\n    } else {\n      subscribers.add(callback);\n    }\n\n    return () => {\n      const subscribers = this._eventSubscribers.get(event);\n      if (!subscribers) return;\n      subscribers.delete(callback);\n    };\n  }\n}\n"],"names":["subscribers"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1538, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1544, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/runtimes/composer/DefaultThreadComposerRuntimeCore.tsx"],"sourcesContent":["import { AppendMessage, PendingAttachment } from \"../../types\";\nimport { AttachmentAdapter } from \"../attachment\";\nimport { ThreadComposerRuntimeCore } from \"../core/ComposerRuntimeCore\";\nimport { ThreadRuntimeCore } from \"../core/ThreadRuntimeCore\";\nimport { BaseComposerRuntimeCore } from \"./BaseComposerRuntimeCore\";\n\nexport class DefaultThreadComposerRuntimeCore\n  extends BaseComposerRuntimeCore\n  implements ThreadComposerRuntimeCore\n{\n  private _canCancel = false;\n  public get canCancel() {\n    return this._canCancel;\n  }\n\n  public override get attachments(): readonly PendingAttachment[] {\n    return super.attachments as readonly PendingAttachment[];\n  }\n\n  protected getAttachmentAdapter() {\n    return this.runtime.adapters?.attachments;\n  }\n\n  constructor(\n    private runtime: Omit<ThreadRuntimeCore, \"composer\"> & {\n      adapters?: { attachments?: AttachmentAdapter | undefined } | undefined;\n    },\n  ) {\n    super();\n    this.connect();\n  }\n\n  public connect() {\n    return this.runtime.subscribe(() => {\n      if (this.canCancel !== this.runtime.capabilities.cancel) {\n        this._canCancel = this.runtime.capabilities.cancel;\n        this._notifySubscribers();\n      }\n    });\n  }\n\n  public async handleSend(message: Omit<AppendMessage, \"parentId\">) {\n    this.runtime.append({\n      ...(message as AppendMessage),\n      parentId: this.runtime.messages.at(-1)?.id ?? null,\n    });\n  }\n\n  public async handleCancel() {\n    this.runtime.cancelRun();\n  }\n}\n"],"names":[],"mappings":";;;;AAIA,SAAS,+BAA+B;;AAEjC,IAAM,mCAAN,qNACG,0BAAA,CAEV;IAcE,YACU,OAAA,CAGR;QACA,KAAA,CAAM;QAJE,IAAA,CAAA,OAAA,GAAA;QAKR,IAAA,CAAK,OAAA,CAAQ;IACf;IApBQ,aAAa,MAAA;IACrB,IAAW,YAAY;QACrB,OAAO,IAAA,CAAK,UAAA;IACd;IAEA,IAAoB,cAA4C;QAC9D,OAAO,KAAA,CAAM;IACf;IAEU,uBAAuB;QAC/B,OAAO,IAAA,CAAK,OAAA,CAAQ,QAAA,EAAU;IAChC;IAWO,UAAU;QACf,OAAO,IAAA,CAAK,OAAA,CAAQ,SAAA,CAAU,MAAM;YAClC,IAAI,IAAA,CAAK,SAAA,KAAc,IAAA,CAAK,OAAA,CAAQ,YAAA,CAAa,MAAA,EAAQ;gBACvD,IAAA,CAAK,UAAA,GAAa,IAAA,CAAK,OAAA,CAAQ,YAAA,CAAa,MAAA;gBAC5C,IAAA,CAAK,kBAAA,CAAmB;YAC1B;QACF,CAAC;IACH;IAEA,MAAa,WAAW,OAAA,EAA0C;QAChE,IAAA,CAAK,OAAA,CAAQ,MAAA,CAAO;YAClB,GAAI,OAAA;YACJ,UAAU,IAAA,CAAK,OAAA,CAAQ,QAAA,CAAS,EAAA,CAAG,CAAA,CAAE,GAAG,MAAM;QAChD,CAAC;IACH;IAEA,MAAa,eAAe;QAC1B,IAAA,CAAK,OAAA,CAAQ,SAAA,CAAU;IACzB;AACF","ignoreList":[0]}},
    {"offset": {"line": 1586, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1592, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/utils/idUtils.tsx"],"sourcesContent":["import { customAlphabet } from \"nanoid/non-secure\";\n\nexport const generateId = customAlphabet(\n  \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\",\n  7,\n);\n\nconst optimisticPrefix = \"__optimistic__\";\nexport const generateOptimisticId = () => `${optimisticPrefix}${generateId()}`;\nexport const isOptimisticId = (id: string) => id.startsWith(optimisticPrefix);\n"],"names":[],"mappings":";;;;;;AAAA,SAAS,sBAAsB;;AAExB,IAAM,kKAAa,iBAAA,EACxB,kEACA;AAGF,IAAM,mBAAmB;AAClB,IAAM,uBAAuB,IAAM,GAAG,gBAAgB,GAAG,WAAW,CAAC,EAAA;AACrE,IAAM,iBAAiB,CAAC,KAAe,GAAG,UAAA,CAAW,gBAAgB","ignoreList":[0]}},
    {"offset": {"line": 1606, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1612, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/runtimes/edge/converters/fromCoreMessage.ts"],"sourcesContent":["import { generateId } from \"../../../internal\";\nimport {\n  ThreadMessage,\n  CoreMessage,\n  ToolCallContentPart,\n  MessageStatus,\n  CompleteAttachment,\n} from \"../../../types\";\n\nexport const fromCoreMessages = (\n  message: readonly CoreMessage[],\n): ThreadMessage[] => {\n  return message.map((message) => fromCoreMessage(message));\n};\n\nexport const fromCoreMessage = (\n  message: CoreMessage,\n  {\n    id = generateId(),\n    status = { type: \"complete\", reason: \"unknown\" } as MessageStatus,\n    attachments = [] as readonly CompleteAttachment[],\n  } = {},\n): ThreadMessage => {\n  const commonProps = {\n    id,\n    createdAt: new Date(),\n  };\n\n  const role = message.role;\n  switch (role) {\n    case \"assistant\":\n      return {\n        ...commonProps,\n        role,\n        content: message.content.map((part) => {\n          if (part.type === \"tool-call\") {\n            return {\n              ...part,\n              argsText: JSON.stringify(part.args),\n            } satisfies ToolCallContentPart;\n          }\n          return part;\n        }),\n        status,\n\n        metadata: { unstable_data: [], steps: [], custom: {} },\n      } satisfies ThreadMessage;\n\n    case \"user\":\n      return {\n        ...commonProps,\n        role,\n        content: message.content,\n        attachments,\n        metadata: { custom: {} },\n      } satisfies ThreadMessage;\n\n    case \"system\":\n      return {\n        ...commonProps,\n        role,\n        content: message.content,\n        metadata: { custom: {} },\n      } satisfies ThreadMessage;\n\n    default: {\n      const unsupportedRole: never = role;\n      throw new Error(`Unknown message role: ${unsupportedRole}`);\n    }\n  }\n};\n"],"names":["message"],"mappings":";;;;;AAAA,SAAS,kBAAkB;;AASpB,IAAM,mBAAmB,CAC9B,YACoB;IACpB,OAAO,QAAQ,GAAA,CAAI,CAACA,WAAY,gBAAgBA,QAAO,CAAC;AAC1D;AAEO,IAAM,kBAAkB,CAC7B,SACA,EACE,SAAK,qLAAA,CAAW,EAAA,EAChB,SAAS;IAAE,MAAM;IAAY,QAAQ;AAAU,CAAA,EAC/C,cAAc,CAAC,CAAA,EACjB,GAAI,CAAC,CAAA,KACa;IAClB,MAAM,cAAc;QAClB;QACA,WAAW,aAAA,GAAA,IAAI,KAAK;IACtB;IAEA,MAAM,OAAO,QAAQ,IAAA;IACrB,OAAQ,MAAM;QACZ,KAAK;YACH,OAAO;gBACL,GAAG,WAAA;gBACH;gBACA,SAAS,QAAQ,OAAA,CAAQ,GAAA,CAAI,CAAC,SAAS;oBACrC,IAAI,KAAK,IAAA,KAAS,aAAa;wBAC7B,OAAO;4BACL,GAAG,IAAA;4BACH,UAAU,KAAK,SAAA,CAAU,KAAK,IAAI;wBACpC;oBACF;oBACA,OAAO;gBACT,CAAC;gBACD;gBAEA,UAAU;oBAAE,eAAe,CAAC,CAAA;oBAAG,OAAO,CAAC,CAAA;oBAAG,QAAQ,CAAC;gBAAE;YACvD;QAEF,KAAK;YACH,OAAO;gBACL,GAAG,WAAA;gBACH;gBACA,SAAS,QAAQ,OAAA;gBACjB;gBACA,UAAU;oBAAE,QAAQ,CAAC;gBAAE;YACzB;QAEF,KAAK;YACH,OAAO;gBACL,GAAG,WAAA;gBACH;gBACA,SAAS,QAAQ,OAAA;gBACjB,UAAU;oBAAE,QAAQ,CAAC;gBAAE;YACzB;QAEF;YAAS;gBACP,MAAM,kBAAyB;gBAC/B,MAAM,IAAI,MAAM,CAAA,sBAAA,EAAyB,eAAe,EAAE;YAC5D;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 1680, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1686, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/runtimes/utils/MessageRepository.tsx"],"sourcesContent":["import type { CoreMessage, ThreadMessage } from \"../../types/AssistantTypes\";\nimport { generateOptimisticId } from \"../../utils/idUtils\";\nimport { fromCoreMessage } from \"../edge/converters/fromCoreMessage\";\n\ntype RepositoryParent = {\n  children: string[];\n  next: RepositoryMessage | null;\n};\n\ntype RepositoryMessage = RepositoryParent & {\n  prev: RepositoryMessage | null;\n  current: ThreadMessage;\n  level: number;\n};\n\nexport interface ExportedMessageRepository {\n  headId?: string | null;\n  messages: Array<{\n    message: ThreadMessage;\n    parentId: string | null;\n  }>;\n}\n\nconst findHead = (\n  message: RepositoryMessage | RepositoryParent,\n): RepositoryMessage | null => {\n  if (message.next) return findHead(message.next);\n  if (\"current\" in message) return message;\n  return null;\n};\n\nexport class MessageRepository {\n  private messages = new Map<string, RepositoryMessage>(); // message_id -> item\n  private head: RepositoryMessage | null = null;\n  private root: RepositoryParent = {\n    children: [],\n    next: null,\n  };\n\n  private performOp(\n    newParent: RepositoryMessage | null,\n    child: RepositoryMessage,\n    operation: \"cut\" | \"link\" | \"relink\",\n  ) {\n    const parentOrRoot = child.prev ?? this.root;\n    const newParentOrRoot = newParent ?? this.root;\n\n    if (operation === \"relink\" && parentOrRoot === newParentOrRoot) return;\n\n    // cut\n    if (operation !== \"link\") {\n      // remove from parentOrRoot.children\n      parentOrRoot.children = parentOrRoot.children.filter(\n        (m) => m !== child.current.id,\n      );\n\n      // update parentOrRoot.next\n      if (parentOrRoot.next === child) {\n        const fallbackId = parentOrRoot.children.at(-1);\n        const fallback = fallbackId ? this.messages.get(fallbackId) : null;\n        if (fallback === undefined) {\n          throw new Error(\n            \"MessageRepository(performOp/cut): Fallback sibling message not found. This is likely an internal bug in assistant-ui.\",\n          );\n        }\n        parentOrRoot.next = fallback;\n      }\n    }\n\n    // link\n    if (operation !== \"cut\") {\n      // ensure the child is not part of parent tree\n      for (\n        let current: RepositoryMessage | null = newParent;\n        current;\n        current = current.prev\n      ) {\n        if (current.current.id === child.current.id) {\n          throw new Error(\n            \"MessageRepository(performOp/link): A message with the same id already exists in the parent tree. This error occurs if the same message id is found multiple times. This is likely an internal bug in assistant-ui.\",\n          );\n        }\n      }\n\n      // add to parentOrRoot.children\n      newParentOrRoot.children = [\n        ...newParentOrRoot.children,\n        child.current.id,\n      ];\n\n      // update parentOrRoot.next\n      if (findHead(child) === this.head || newParentOrRoot.next === null) {\n        newParentOrRoot.next = child;\n      }\n\n      child.prev = newParent;\n    }\n  }\n  getMessages() {\n    const messages = new Array<ThreadMessage>(this.head?.level ?? 0);\n    for (let current = this.head; current; current = current.prev) {\n      messages[current.level] = current.current;\n    }\n    return messages;\n  }\n\n  addOrUpdateMessage(parentId: string | null, message: ThreadMessage) {\n    const existingItem = this.messages.get(message.id);\n    const prev = parentId ? this.messages.get(parentId) : null;\n    if (prev === undefined)\n      throw new Error(\n        \"MessageRepository(addOrUpdateMessage): Parent message not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    // update existing message\n    if (existingItem) {\n      existingItem.current = message;\n      this.performOp(prev, existingItem, \"relink\");\n      return;\n    }\n\n    // create a new message\n    const newItem: RepositoryMessage = {\n      prev,\n      current: message,\n      next: null,\n      children: [],\n      level: prev ? prev.level + 1 : 0,\n    };\n\n    this.messages.set(message.id, newItem);\n    this.performOp(prev, newItem, \"link\");\n\n    if (this.head === prev) {\n      this.head = newItem;\n    }\n  }\n\n  getMessage(messageId: string) {\n    const message = this.messages.get(messageId);\n    if (!message)\n      throw new Error(\n        \"MessageRepository(updateMessage): Message not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    return {\n      parentId: message.prev?.current.id ?? null,\n      message: message.current,\n    };\n  }\n\n  appendOptimisticMessage(parentId: string | null, message: CoreMessage) {\n    let optimisticId: string;\n    do {\n      optimisticId = generateOptimisticId();\n    } while (this.messages.has(optimisticId));\n\n    this.addOrUpdateMessage(\n      parentId,\n      fromCoreMessage(message, {\n        id: optimisticId,\n        status: { type: \"running\" },\n      }),\n    );\n\n    return optimisticId;\n  }\n\n  deleteMessage(messageId: string, replacementId?: string | null | undefined) {\n    const message = this.messages.get(messageId);\n\n    if (!message)\n      throw new Error(\n        \"MessageRepository(deleteMessage): Optimistic message not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    const replacement =\n      replacementId === undefined\n        ? message.prev // if no replacementId is provided, use the parent\n        : replacementId === null\n          ? null\n          : this.messages.get(replacementId);\n    if (replacement === undefined)\n      throw new Error(\n        \"MessageRepository(deleteMessage): Replacement not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    for (const child of message.children) {\n      const childMessage = this.messages.get(child);\n      if (!childMessage)\n        throw new Error(\n          \"MessageRepository(deleteMessage): Child message not found. This is likely an internal bug in assistant-ui.\",\n        );\n      this.performOp(replacement, childMessage, \"relink\");\n    }\n\n    this.performOp(null, message, \"cut\");\n    this.messages.delete(messageId);\n\n    if (this.head === message) {\n      this.head = findHead(replacement ?? this.root);\n    }\n  }\n\n  getBranches(messageId: string) {\n    const message = this.messages.get(messageId);\n    if (!message)\n      throw new Error(\n        \"MessageRepository(getBranches): Message not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    const { children } = message.prev ?? this.root;\n    return children;\n  }\n\n  switchToBranch(messageId: string) {\n    const message = this.messages.get(messageId);\n    if (!message)\n      throw new Error(\n        \"MessageRepository(switchToBranch): Branch not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    const prevOrRoot = message.prev ?? this.root;\n    prevOrRoot.next = message;\n\n    this.head = findHead(message);\n  }\n\n  resetHead(messageId: string | null) {\n    if (messageId === null) {\n      this.head = null;\n      return;\n    }\n\n    const message = this.messages.get(messageId);\n    if (!message)\n      throw new Error(\n        \"MessageRepository(resetHead): Branch not found. This is likely an internal bug in assistant-ui.\",\n      );\n\n    this.head = message;\n    for (\n      let current: RepositoryMessage | null = message;\n      current;\n      current = current.prev\n    ) {\n      if (current.prev) {\n        current.prev.next = current;\n      }\n    }\n  }\n\n  export(): ExportedMessageRepository {\n    const exportItems: ExportedMessageRepository[\"messages\"] = [];\n\n    // hint: we are relying on the insertion order of the messages\n    // this is important for the import function to properly link the messages\n    for (const [, message] of this.messages) {\n      exportItems.push({\n        message: message.current,\n        parentId: message.prev?.current.id ?? null,\n      });\n    }\n\n    return {\n      headId: this.head?.current.id ?? null,\n      messages: exportItems,\n    };\n  }\n\n  import({ headId, messages }: ExportedMessageRepository) {\n    for (const { message, parentId } of messages) {\n      this.addOrUpdateMessage(parentId, message);\n    }\n\n    // switch to the saved head id if it is not the most recent message\n    this.resetHead(headId ?? messages.at(-1)?.message.id ?? null);\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1853, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1859, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/ui/utils/withDefaults.tsx"],"sourcesContent":["import { ComponentPropsWithoutRef, ElementType, forwardRef } from \"react\";\nimport classNames from \"classnames\";\nimport { ComponentRef } from \"react\";\n\nexport const withDefaultProps =\n  <TProps extends { className?: string }>({\n    className,\n    ...defaultProps\n  }: Partial<TProps>) =>\n  ({ className: classNameProp, ...props }: TProps) => {\n    return {\n      className: classNames(className, classNameProp),\n      ...defaultProps,\n      ...props,\n    } as TProps;\n  };\n\nexport const withDefaults = <TComponent extends ElementType>(\n  Component: TComponent,\n  defaultProps: Partial<ComponentPropsWithoutRef<TComponent>>,\n) => {\n  type TComponentProps = typeof defaultProps;\n  const getProps = withDefaultProps<TComponentProps>(defaultProps);\n  const WithDefaults = forwardRef<ComponentRef<TComponent>, TComponentProps>(\n    (props, ref) => {\n      const ComponentAsAny = Component as any;\n      return <ComponentAsAny {...getProps(props as any)} ref={ref} />;\n    },\n  );\n  WithDefaults.displayName =\n    \"withDefaults(\" +\n    (typeof Component === \"string\" ? Component : Component.displayName) +\n    \")\";\n  return WithDefaults;\n};\n"],"names":[],"mappings":";;;;;AAAA,SAAgD,kBAAkB;AAClE,OAAO,gBAAgB;AAyBV;;;;AAtBN,IAAM,mBACX,CAAwC,EACtC,SAAA,EACA,GAAG,cACL,GACA,CAAC,EAAE,WAAW,aAAA,EAAe,GAAG,MAAM,CAAA,KAAc;QAClD,OAAO;YACL,YAAW,iJAAA,EAAW,WAAW,aAAa;YAC9C,GAAG,YAAA;YACH,GAAG,KAAA;QACL;IACF;AAEK,IAAM,eAAe,CAC1B,WACA,iBACG;IAEH,MAAM,WAAW,iBAAkC,YAAY;IAC/D,MAAM,eAAe,uNAAA,EACnB,CAAC,OAAO,QAAQ;QACd,MAAM,iBAAiB;QACvB,OAAO,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,gBAAA;YAAgB,GAAG,SAAS,KAAY,CAAA;YAAG;QAAA,CAAU;IAC/D;IAEF,aAAa,WAAA,GACX,kBAAA,CACC,OAAO,cAAc,WAAW,YAAY,UAAU,WAAA,IACvD;IACF,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 1891, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1897, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/ui/base/tooltip.tsx"],"sourcesContent":["\"use client\";\n\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\";\nimport { withDefaults } from \"../utils/withDefaults\";\nimport { FC } from \"react\";\n\nexport const Tooltip: FC<TooltipPrimitive.TooltipProps> = (props) => {\n  return (\n    <TooltipPrimitive.Provider>\n      <TooltipPrimitive.Root {...props} />\n    </TooltipPrimitive.Provider>\n  );\n};\n\nTooltip.displayName = \"Tooltip\";\n\nexport const TooltipTrigger = TooltipPrimitive.Trigger;\n\nexport const TooltipContent = withDefaults(TooltipPrimitive.Content, {\n  sideOffset: 4,\n  className: \"aui-tooltip-content\",\n});\n\nTooltipContent.displayName = \"TooltipContent\";\n"],"names":[],"mappings":";;;;;AASM;;AAPN,YAAY,sBAAsB;AAClC,SAAS,oBAAoB;;;;;AAGtB,IAAM,UAA6C,CAAC,UAAU;IACnE,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAkB,oKAAA,QAAA,EAAjB;QACC,UAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAkB,oKAAA,IAAA,EAAjB;YAAuB,GAAG,KAAA;QAAA,CAAO;IAAA,CACpC;AAEJ;AAEA,QAAQ,WAAA,GAAc;AAEf,IAAM,iBAAkC,oKAAA,OAAA;AAExC,IAAM,wMAAiB,eAAA,EAA8B,oKAAA,OAAA,EAAS;IACnE,YAAY;IACZ,WAAW;AACb,CAAC;AAED,eAAe,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 1926, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1932, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/ui/base/button.tsx"],"sourcesContent":["import { cva, type VariantProps } from \"class-variance-authority\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { ElementRef, forwardRef } from \"react\";\n\nconst buttonVariants = cva(\"aui-button\", {\n  variants: {\n    variant: {\n      default: \"aui-button-primary\",\n      outline: \"aui-button-outline\",\n      ghost: \"aui-button-ghost\",\n    },\n    size: {\n      default: \"aui-button-medium\",\n      icon: \"aui-button-icon\",\n    },\n  },\n  defaultVariants: {\n    variant: \"default\",\n    size: \"default\",\n  },\n});\n\ntype ButtonElement = ElementRef<typeof Primitive.button>;\n\nexport type ButtonProps = React.ComponentPropsWithoutRef<\n  typeof Primitive.button\n> &\n  VariantProps<typeof buttonVariants>;\n\nconst Button = forwardRef<ButtonElement, ButtonProps>(\n  ({ className, variant, size, ...props }, ref) => {\n    return (\n      <Primitive.button\n        className={buttonVariants({ variant, size, className })}\n        {...props}\n        ref={ref}\n      />\n    );\n  },\n);\n\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };\n"],"names":[],"mappings":";;;;;AAAA,SAAS,WAA8B;AAEvC,SAAqB,kBAAkB;AA8BjC;AA/BN,SAAS,iBAAiB;;;;;AAG1B,IAAM,sLAAiB,MAAA,EAAI,cAAc;IACvC,UAAU;QACR,SAAS;YACP,SAAS;YACT,SAAS;YACT,OAAO;QACT;QACA,MAAM;YACJ,SAAS;YACT,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF,CAAC;AASD,IAAM,mNAAS,aAAA,EACb,CAAC,EAAE,SAAA,EAAW,OAAA,EAAS,IAAA,EAAM,GAAG,MAAM,CAAA,EAAG,QAAQ;IAC/C,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,wKAAC,YAAA,CAAU,MAAA,EAAV;QACC,WAAW,eAAe;YAAE;YAAS;YAAM;QAAU,CAAC;QACrD,GAAG,KAAA;QACJ;IAAA;AAGN;AAGF,OAAO,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 1976, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1982, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/ui/base/tooltip-icon-button.tsx"],"sourcesContent":["\"use client\";\n\nimport { forwardRef } from \"react\";\nimport { Tooltip, TooltipContent, TooltipTrigger } from \"./tooltip\";\nimport { Button, ButtonProps } from \"./button\";\n\nexport namespace TooltipIconButton {\n  export type Props = ButtonProps & {\n    tooltip: string;\n    side?: \"top\" | \"bottom\" | \"left\" | \"right\";\n  };\n}\n\nexport const TooltipIconButton = forwardRef<\n  HTMLButtonElement,\n  TooltipIconButton.Props\n>(({ children, tooltip, side = \"bottom\", ...rest }, ref) => {\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>\n        <Button variant=\"ghost\" size=\"icon\" {...rest} ref={ref}>\n          {children}\n          <span className=\"aui-sr-only\">{tooltip}</span>\n        </Button>\n      </TooltipTrigger>\n      <TooltipContent side={side}>{tooltip}</TooltipContent>\n    </Tooltip>\n  );\n});\n\nTooltipIconButton.displayName = \"TooltipIconButton\";\n"],"names":[],"mappings":";;;;AAEA,SAAS,kBAAkB;AAkBnB,SAEE,KAFF;AAjBR,SAAS,SAAS,gBAAgB,sBAAsB;AACxD,SAAS,cAA2B;;;;;;AAS7B,IAAM,8NAAoB,aAAA,EAG/B,CAAC,EAAE,QAAA,EAAU,OAAA,EAAS,OAAO,QAAA,EAAU,GAAG,KAAK,CAAA,EAAG,QAAQ;IAC1D,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,OAAA,8KAAC,WAAA,EAAA;QACC,UAAA;YAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,+KAAC,iBAAA,EAAA;gBAAe,SAAO;gBACrB,UAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,OAAA,6KAAC,UAAA,EAAA;oBAAO,SAAQ;oBAAQ,MAAK;oBAAQ,GAAG,IAAA;oBAAM;oBAC3C,UAAA;wBAAA;wBACD,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,QAAA;4BAAK,WAAU;4BAAe,UAAA;wBAAA,CAAQ;qBAAA;gBAAA,CACzC;YAAA,CACF;YACA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,+KAAC,iBAAA,EAAA;gBAAe;gBAAa,UAAA;YAAA,CAAQ;SAAA;IAAA,CACvC;AAEJ,CAAC;AAED,kBAAkB,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 2024, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2030, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/utils/smooth/index.ts"],"sourcesContent":["export { useSmooth } from \"./useSmooth\";\nexport { useSmoothStatus } from \"./SmoothContext\";\nexport { withSmoothContextProvider } from \"./SmoothContext\";\n"],"names":[],"mappings":"","ignoreList":[0]}},
    {"offset": {"line": 2037, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2051, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/context/react/utils/createContextStoreHook.ts"],"sourcesContent":["import { UseBoundStore } from \"zustand\";\nimport { ReadonlyStore } from \"../../ReadonlyStore\";\n\n/**\n * Creates hooks for accessing a store within a context.\n * @param contextHook - The hook to access the context.\n * @param contextKey - The key of the store in the context.\n * @returns An object containing the hooks: `use...` and `use...Store`.\n */\nexport function createContextStoreHook<T, K extends keyof T & string>(\n  contextHook: (options?: { optional?: boolean }) => T | null,\n  contextKey: K,\n) {\n  type StoreType = T[K];\n  type StateType = StoreType extends ReadonlyStore<infer S> ? S : never;\n\n  // Define useStoreStoreHook with overloads\n  function useStoreStoreHook(): ReadonlyStore<StateType>;\n  function useStoreStoreHook(options: {\n    optional: true;\n  }): ReadonlyStore<StateType> | null;\n  function useStoreStoreHook(options?: {\n    optional?: boolean;\n  }): ReadonlyStore<StateType> | null {\n    const context = contextHook(options);\n    if (!context) return null;\n    return context[contextKey] as ReadonlyStore<StateType>;\n  }\n\n  // Define useStoreHook with overloads\n  function useStoreHook(): StateType;\n  function useStoreHook<TSelected>(\n    selector: (state: StateType) => TSelected,\n  ): TSelected;\n  function useStoreHook(options: { optional: true }): StateType | null;\n  function useStoreHook<TSelected>(options: {\n    optional: true;\n    selector?: (state: StateType) => TSelected;\n  }): TSelected | null;\n  function useStoreHook<TSelected>(\n    param?:\n      | ((state: StateType) => TSelected)\n      | {\n          optional?: boolean;\n          selector?: (state: StateType) => TSelected;\n        },\n  ): TSelected | StateType | null {\n    let optional = false;\n    let selector: ((state: StateType) => TSelected) | undefined;\n\n    if (typeof param === \"function\") {\n      selector = param;\n    } else if (param && typeof param === \"object\") {\n      optional = !!param.optional;\n      selector = param.selector;\n    }\n\n    const store = useStoreStoreHook({\n      optional,\n    } as any) as UseBoundStore<ReadonlyStore<StateType>>;\n    if (!store) return null;\n    return selector ? store(selector) : store();\n  }\n\n  // Return an object with keys based on contextKey\n  return {\n    [contextKey]: useStoreHook,\n    [`${contextKey}Store`]: useStoreStoreHook,\n  } as {\n    [P in K]: typeof useStoreHook;\n  } & {\n    [P in `${K}Store`]: typeof useStoreStoreHook;\n  };\n}\n"],"names":[],"mappings":";;;;AASO,SAAS,uBACd,WAAA,EACA,UAAA,EACA;IASA,SAAS,kBAAkB,OAAA,EAES;QAClC,MAAM,UAAU,YAAY,OAAO;QACnC,IAAI,CAAC,QAAS,CAAA,OAAO;QACrB,OAAO,OAAA,CAAQ,UAAU,CAAA;IAC3B;IAYA,SAAS,aACP,KAAA,EAM8B;QAC9B,IAAI,WAAW;QACf,IAAI;QAEJ,IAAI,OAAO,UAAU,YAAY;YAC/B,WAAW;QACb,OAAA,IAAW,SAAS,OAAO,UAAU,UAAU;YAC7C,WAAW,CAAC,CAAC,MAAM,QAAA;YACnB,WAAW,MAAM,QAAA;QACnB;QAEA,MAAM,QAAQ,kBAAkB;YAC9B;QACF,CAAQ;QACR,IAAI,CAAC,MAAO,CAAA,OAAO;QACnB,OAAO,WAAW,MAAM,QAAQ,IAAI,MAAM;IAC5C;IAGA,OAAO;QACL,CAAC,UAAU,CAAA,EAAG;QACd,CAAC,GAAG,UAAU,CAAA,KAAA,CAAO,CAAA,EAAG;IAC1B;AAKF","ignoreList":[0]}},
    {"offset": {"line": 2083, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2089, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/context/react/utils/createContextHook.ts"],"sourcesContent":["import { useContext, Context } from \"react\";\n\n/**\n * Creates a context hook with optional support.\n * @param context - The React context to consume.\n * @param providerName - The name of the provider for error messages.\n * @returns A hook function that provides the context value.\n */\nexport function createContextHook<T>(\n  context: Context<T | null>,\n  providerName: string,\n) {\n  function useContextHook(options?: { optional?: false | undefined }): T;\n  function useContextHook(options?: {\n    optional?: boolean | undefined;\n  }): T | null;\n  function useContextHook(options?: { optional?: boolean | undefined }) {\n    const contextValue = useContext(context);\n    if (!options?.optional && !contextValue) {\n      throw new Error(`This component must be used within ${providerName}.`);\n    }\n    return contextValue;\n  }\n\n  return useContextHook;\n}\n"],"names":[],"mappings":";;;;AAAA,SAAS,kBAA2B;;AAQ7B,SAAS,kBACd,OAAA,EACA,YAAA,EACA;IAKA,SAAS,eAAe,OAAA,EAA8C;QACpE,MAAM,yNAAe,aAAA,EAAW,OAAO;QACvC,IAAI,CAAC,SAAS,YAAY,CAAC,cAAc;YACvC,MAAM,IAAI,MAAM,CAAA,mCAAA,EAAsC,YAAY,CAAA,CAAA,CAAG;QACvE;QACA,OAAO;IACT;IAEA,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 2107, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2113, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/context/react/MessageContext.ts"],"sourcesContent":["\"use client\";\n\nimport { createContext } from \"react\";\nimport { ReadonlyStore } from \"../ReadonlyStore\";\nimport { MessageUtilsState } from \"../stores/MessageUtils\";\nimport { createContextHook } from \"./utils/createContextHook\";\nimport { createContextStoreHook } from \"./utils/createContextStoreHook\";\nimport { UseBoundStore } from \"zustand\";\nimport { MessageRuntime } from \"../../api/MessageRuntime\";\nimport { MessageState } from \"../../api/MessageRuntime\";\nimport { EditComposerState } from \"../../api/ComposerRuntime\";\n\nexport type MessageContextValue = {\n  useMessageRuntime: UseBoundStore<ReadonlyStore<MessageRuntime>>;\n  useMessage: UseBoundStore<ReadonlyStore<MessageState>>;\n  useMessageUtils: UseBoundStore<ReadonlyStore<MessageUtilsState>>;\n  useEditComposer: UseBoundStore<ReadonlyStore<EditComposerState>>;\n};\n\nexport const MessageContext = createContext<MessageContextValue | null>(null);\n\nexport const useMessageContext = createContextHook(\n  MessageContext,\n  \"a component passed to <ThreadPrimitive.Messages components={...} />\",\n);\n\nexport function useMessageRuntime(options?: {\n  optional?: false | undefined;\n}): MessageRuntime;\nexport function useMessageRuntime(options?: {\n  optional?: boolean | undefined;\n}): MessageRuntime | null;\nexport function useMessageRuntime(options?: {\n  optional?: boolean | undefined;\n}) {\n  const context = useMessageContext(options);\n  if (!context) return null;\n  return context.useMessageRuntime();\n}\n\nexport const { useMessage } = createContextStoreHook(\n  useMessageContext,\n  \"useMessage\",\n);\n\nexport const { useMessageUtils, useMessageUtilsStore } = createContextStoreHook(\n  useMessageContext,\n  \"useMessageUtils\",\n);\n\nexport const { useEditComposer } = createContextStoreHook(\n  useMessageContext,\n  \"useEditComposer\",\n);\n"],"names":[],"mappings":";;;;;;;;;;AAEA,SAAS,qBAAqB;AAI9B,SAAS,8BAA8B;AADvC,SAAS,yBAAyB;;;;;AAc3B,IAAM,2NAAiB,gBAAA,EAA0C,IAAI;AAErE,IAAM,8NAAoB,oBAAA,EAC/B,gBACA;AASK,SAAS,kBAAkB,OAAA,EAE/B;IACD,MAAM,UAAU,kBAAkB,OAAO;IACzC,IAAI,CAAC,QAAS,CAAA,OAAO;IACrB,OAAO,QAAQ,iBAAA,CAAkB;AACnC;AAEO,IAAM,EAAE,UAAA,CAAW,CAAA,kNAAI,yBAAA,EAC5B,mBACA;AAGK,IAAM,EAAE,eAAA,EAAiB,oBAAA,CAAqB,CAAA,kNAAI,yBAAA,EACvD,mBACA;AAGK,IAAM,EAAE,eAAA,CAAgB,CAAA,kNAAI,yBAAA,EACjC,mBACA","ignoreList":[0]}},
    {"offset": {"line": 2142, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2148, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/context/react/ContentPartContext.ts"],"sourcesContent":["\"use client\";\n\nimport { createContext } from \"react\";\nimport { ReadonlyStore } from \"../ReadonlyStore\";\nimport { createContextStoreHook } from \"./utils/createContextStoreHook\";\nimport { createContextHook } from \"./utils/createContextHook\";\nimport { UseBoundStore } from \"zustand\";\nimport { ContentPartRuntime } from \"../../api/ContentPartRuntime\";\nimport { ContentPartState } from \"../../api/ContentPartRuntime\";\n\nexport type ContentPartContextValue = {\n  useContentPartRuntime: UseBoundStore<ReadonlyStore<ContentPartRuntime>>;\n  useContentPart: UseBoundStore<ReadonlyStore<ContentPartState>>;\n};\n\nexport const ContentPartContext = createContext<ContentPartContextValue | null>(\n  null,\n);\n\nexport const useContentPartContext = createContextHook(\n  ContentPartContext,\n  \"a component passed to <MessagePrimitive.Content components={...}>\",\n);\n\nexport function useContentPartRuntime(options?: {\n  optional?: false | undefined;\n}): ContentPartRuntime;\nexport function useContentPartRuntime(options?: {\n  optional?: boolean | undefined;\n}): ContentPartRuntime | null;\nexport function useContentPartRuntime(options?: {\n  optional?: boolean | undefined;\n}) {\n  const context = useContentPartContext(options);\n  if (!context) return null;\n  return context.useContentPartRuntime();\n}\n\nexport const { useContentPart } = createContextStoreHook(\n  useContentPartContext,\n  \"useContentPart\",\n);\n"],"names":[],"mappings":";;;;;;;AAEA,SAAS,qBAAqB;AAE9B,SAAS,8BAA8B;AACvC,SAAS,yBAAyB;;;;;AAU3B,IAAM,+NAAqB,gBAAA,EAChC;AAGK,IAAM,kOAAwB,oBAAA,EACnC,oBACA;AASK,SAAS,sBAAsB,OAAA,EAEnC;IACD,MAAM,UAAU,sBAAsB,OAAO;IAC7C,IAAI,CAAC,QAAS,CAAA,OAAO;IACrB,OAAO,QAAQ,qBAAA,CAAsB;AACvC;AAEO,IAAM,EAAE,cAAA,CAAe,CAAA,kNAAI,yBAAA,EAChC,uBACA","ignoreList":[0]}},
    {"offset": {"line": 2172, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2178, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/utils/smooth/SmoothContext.tsx"],"sourcesContent":["import {\n  ComponentType,\n  createContext,\n  FC,\n  forwardRef,\n  PropsWithChildren,\n  useContext,\n  useState,\n} from \"react\";\nimport { ReadonlyStore } from \"../../context/ReadonlyStore\";\nimport { create, UseBoundStore } from \"zustand\";\nimport {\n  ContentPartStatus,\n  ToolCallContentPartStatus,\n} from \"../../types/AssistantTypes\";\nimport { useContentPartRuntime } from \"../../context/react/ContentPartContext\";\nimport { createContextStoreHook } from \"../../context/react/utils/createContextStoreHook\";\n\ntype SmoothContextValue = {\n  useSmoothStatus: UseBoundStore<\n    ReadonlyStore<ContentPartStatus | ToolCallContentPartStatus>\n  >;\n};\n\nconst SmoothContext = createContext<SmoothContextValue | null>(null);\n\nconst makeSmoothContext = (\n  initialState: ContentPartStatus | ToolCallContentPartStatus,\n) => {\n  const useSmoothStatus = create(() => initialState);\n  return { useSmoothStatus };\n};\n\nexport const SmoothContextProvider: FC<PropsWithChildren> = ({ children }) => {\n  const outer = useSmoothContext({ optional: true });\n  const contentPartRuntime = useContentPartRuntime();\n\n  const [context] = useState(() =>\n    makeSmoothContext(contentPartRuntime.getState().status),\n  );\n\n  // do not wrap if there is an outer SmoothContextProvider\n  if (outer) return children;\n\n  return (\n    <SmoothContext.Provider value={context}>{children}</SmoothContext.Provider>\n  );\n};\n\nexport const withSmoothContextProvider = <C extends ComponentType<any>>(\n  Component: C,\n): C => {\n  const Wrapped = forwardRef((props, ref) => {\n    return (\n      <SmoothContextProvider>\n        <Component {...(props as any)} ref={ref} />\n      </SmoothContextProvider>\n    );\n  });\n  Wrapped.displayName = Component.displayName;\n  return Wrapped as any;\n};\n\nfunction useSmoothContext(options?: {\n  optional?: false | undefined;\n}): SmoothContextValue;\nfunction useSmoothContext(options?: {\n  optional?: boolean | undefined;\n}): SmoothContextValue | null;\nfunction useSmoothContext(options?: { optional?: boolean | undefined }) {\n  const context = useContext(SmoothContext);\n  if (!options?.optional && !context)\n    throw new Error(\n      \"This component must be used within a SmoothContextProvider.\",\n    );\n  return context;\n}\n\nexport const { useSmoothStatus, useSmoothStatusStore } = createContextStoreHook(\n  useSmoothContext,\n  \"useSmoothStatus\",\n);\n"],"names":["useSmoothStatus"],"mappings":";;;;;;;AAAA;AA6CI;AA7BJ,SAAS,8BAA8B;AANvC,SAAS,cAA6B;AAKtC,SAAS,6BAA6B;;;;;;AAStC,IAAM,0NAAgB,gBAAA,EAAyC,IAAI;AAEnE,IAAM,oBAAoB,CACxB,iBACG;IACH,MAAMA,uBAAkB,kJAAA,EAAO,IAAM,YAAY;IACjD,OAAO;QAAE,iBAAAA;IAAgB;AAC3B;AAEO,IAAM,wBAA+C,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;IAC5E,MAAM,QAAQ,iBAAiB;QAAE,UAAU;IAAK,CAAC;IACjD,MAAM,sBAAqB,yNAAA,CAAsB;IAEjD,MAAM,CAAC,OAAO,CAAA,6MAAI,WAAA,EAAS,IACzB,kBAAkB,mBAAmB,QAAA,CAAS,EAAE,MAAM;IAIxD,IAAI,MAAO,CAAA,OAAO;IAElB,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,cAAc,QAAA,EAAd;QAAuB,OAAO;QAAU;IAAA,CAAS;AAEtD;AAEO,IAAM,4BAA4B,CACvC,cACM;IACN,MAAM,WAAU,sNAAA,EAAW,CAAC,OAAO,QAAQ;QACzC,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,uBAAA;YACC,UAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,WAAA;gBAAW,GAAI,KAAA;gBAAe;YAAA,CAAU;QAAA,CAC3C;IAEJ,CAAC;IACD,QAAQ,WAAA,GAAc,UAAU,WAAA;IAChC,OAAO;AACT;AAQA,SAAS,iBAAiB,OAAA,EAA8C;IACtE,MAAM,oNAAU,aAAA,EAAW,aAAa;IACxC,IAAI,CAAC,SAAS,YAAY,CAAC,SACzB,MAAM,IAAI,MACR;IAEJ,OAAO;AACT;AAEO,IAAM,EAAE,eAAA,EAAiB,oBAAA,CAAqB,CAAA,kNAAI,yBAAA,EACvD,kBACA","ignoreList":[0]}},
    {"offset": {"line": 2234, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2240, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/context/ReadonlyStore.ts"],"sourcesContent":["import type { StoreApi } from \"zustand\";\n\nexport type ReadonlyStore<T> = Omit<StoreApi<T>, \"setState\" | \"destroy\">;\n\nexport const writableStore = <T>(store: ReadonlyStore<T> | undefined) => {\n  return store as unknown as StoreApi<T>;\n};\n"],"names":[],"mappings":";;;;AAIO,IAAM,gBAAgB,CAAI,UAAwC;IACvE,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 2249, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2255, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/utils/smooth/useSmooth.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useMessage } from \"../../context\";\nimport { ContentPartStatus, TextContentPart } from \"../../types/AssistantTypes\";\nimport { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useSmoothStatusStore } from \"./SmoothContext\";\nimport { writableStore } from \"../../context/ReadonlyStore\";\nimport { ContentPartState } from \"../../api/ContentPartRuntime\";\n\nclass TextStreamAnimator {\n  private animationFrameId: number | null = null;\n  private lastUpdateTime: number = Date.now();\n\n  public targetText: string = \"\";\n\n  constructor(\n    public currentText: string,\n    private setText: (newText: string) => void,\n  ) {}\n\n  start() {\n    if (this.animationFrameId !== null) return;\n    this.lastUpdateTime = Date.now();\n    this.animate();\n  }\n\n  stop() {\n    if (this.animationFrameId !== null) {\n      cancelAnimationFrame(this.animationFrameId);\n      this.animationFrameId = null;\n    }\n  }\n\n  private animate = () => {\n    const currentTime = Date.now();\n    const deltaTime = currentTime - this.lastUpdateTime;\n    let timeToConsume = deltaTime;\n\n    const remainingChars = this.targetText.length - this.currentText.length;\n    const baseTimePerChar = Math.min(5, 250 / remainingChars);\n\n    let charsToAdd = 0;\n    while (timeToConsume >= baseTimePerChar && charsToAdd < remainingChars) {\n      charsToAdd++;\n      timeToConsume -= baseTimePerChar;\n    }\n\n    if (charsToAdd !== remainingChars) {\n      this.animationFrameId = requestAnimationFrame(this.animate);\n    } else {\n      this.animationFrameId = null;\n    }\n    if (charsToAdd === 0) return;\n\n    this.currentText = this.targetText.slice(\n      0,\n      this.currentText.length + charsToAdd,\n    );\n    this.lastUpdateTime = currentTime - timeToConsume;\n    this.setText(this.currentText);\n  };\n}\n\nconst SMOOTH_STATUS: ContentPartStatus = Object.freeze({\n  type: \"running\",\n});\n\nexport const useSmooth = (\n  state: ContentPartState & TextContentPart,\n  smooth: boolean = false,\n): ContentPartState & TextContentPart => {\n  const { text } = state;\n  const id = useMessage({\n    optional: true,\n    selector: (m: { id: string }) => m.id,\n  });\n\n  const idRef = useRef(id);\n  const [displayedText, setDisplayedText] = useState(text);\n\n  const smoothStatusStore = useSmoothStatusStore({ optional: true });\n  const setText = useCallbackRef((text: string) => {\n    setDisplayedText(text);\n    if (smoothStatusStore) {\n      writableStore(smoothStatusStore).setState(\n        text !== state.text ? SMOOTH_STATUS : state.status,\n      );\n    }\n  });\n\n  // TODO this is hacky\n  useEffect(() => {\n    if (smoothStatusStore) {\n      writableStore(smoothStatusStore).setState(\n        text !== state.text ? SMOOTH_STATUS : state.status,\n      );\n    }\n  }, [smoothStatusStore, text, displayedText, state.status, state.text]);\n\n  const [animatorRef] = useState<TextStreamAnimator>(\n    new TextStreamAnimator(text, setText),\n  );\n\n  useEffect(() => {\n    if (!smooth) {\n      animatorRef.stop();\n      return;\n    }\n\n    if (idRef.current !== id || !text.startsWith(animatorRef.targetText)) {\n      idRef.current = id;\n      setText(text);\n\n      animatorRef.currentText = text;\n      animatorRef.targetText = text;\n      animatorRef.stop();\n\n      return;\n    }\n\n    animatorRef.targetText = text;\n    animatorRef.start();\n  }, [setText, animatorRef, id, smooth, text]);\n\n  useEffect(() => {\n    return () => {\n      animatorRef.stop();\n    };\n  }, [animatorRef]);\n\n  return useMemo(\n    () =>\n      smooth\n        ? {\n            type: \"text\",\n            text: displayedText,\n            status: text === displayedText ? state.status : SMOOTH_STATUS,\n          }\n        : state,\n    [smooth, displayedText, state, text],\n  );\n};\n"],"names":["text"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 2385, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2478, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/context/react/AssistantContext.ts"],"sourcesContent":["\"use client\";\n\nimport { createContext } from \"react\";\nimport type { AssistantToolUIsState } from \"../stores/AssistantToolUIs\";\nimport { ReadonlyStore } from \"../ReadonlyStore\";\nimport { createContextHook } from \"./utils/createContextHook\";\nimport { createContextStoreHook } from \"./utils/createContextStoreHook\";\nimport { UseBoundStore } from \"zustand\";\nimport { AssistantRuntime } from \"../../api/AssistantRuntime\";\nimport { ThreadListState } from \"../../api/ThreadListRuntime\";\n\nexport type AssistantContextValue = {\n  useToolUIs: UseBoundStore<ReadonlyStore<AssistantToolUIsState>>;\n  useAssistantRuntime: UseBoundStore<ReadonlyStore<AssistantRuntime>>;\n  useThreadList: UseBoundStore<ReadonlyStore<ThreadListState>>;\n};\n\nexport const AssistantContext = createContext<AssistantContextValue | null>(\n  null,\n);\n\nexport const useAssistantContext = createContextHook(\n  AssistantContext,\n  \"AssistantRuntimeProvider\",\n);\n\nexport function useAssistantRuntime(options?: {\n  optional?: false | undefined;\n}): AssistantRuntime;\nexport function useAssistantRuntime(options?: {\n  optional?: boolean | undefined;\n}): AssistantRuntime | null;\nexport function useAssistantRuntime(options?: {\n  optional?: boolean | undefined;\n}) {\n  const context = useAssistantContext(options);\n  if (!context) return null;\n  return context.useAssistantRuntime();\n}\n\nexport const { useToolUIs, useToolUIsStore } = createContextStoreHook(\n  useAssistantContext,\n  \"useToolUIs\",\n);\n\nexport const { useThreadList } = createContextStoreHook(\n  useAssistantContext,\n  \"useThreadList\",\n);\n"],"names":[],"mappings":";;;;;;;;;AAEA,SAAS,qBAAqB;AAI9B,SAAS,8BAA8B;AADvC,SAAS,yBAAyB;;;;;AAY3B,IAAM,6NAAmB,gBAAA,EAC9B;AAGK,IAAM,uBAAsB,6NAAA,EACjC,kBACA;AASK,SAAS,oBAAoB,OAAA,EAEjC;IACD,MAAM,UAAU,oBAAoB,OAAO;IAC3C,IAAI,CAAC,QAAS,CAAA,OAAO;IACrB,OAAO,QAAQ,mBAAA,CAAoB;AACrC;AAEO,IAAM,EAAE,UAAA,EAAY,eAAA,CAAgB,CAAA,kNAAI,yBAAA,EAC7C,qBACA;AAGK,IAAM,EAAE,aAAA,CAAc,CAAA,kNAAI,yBAAA,EAC/B,qBACA","ignoreList":[0]}},
    {"offset": {"line": 2505, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2511, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/context/stores/AssistantToolUIs.ts"],"sourcesContent":["\"use client\";\n\nimport { create } from \"zustand\";\nimport type { ToolCallContentPartComponent } from \"../../types/ContentPartComponentTypes\";\nimport { Unsubscribe } from \"../../types\";\n\nexport type AssistantToolUIsState = {\n  /**\n   * Get the tool UI configured for a given tool name.\n   */\n  getToolUI: (toolName: string) => ToolCallContentPartComponent | null;\n\n  /**\n   * Registers a tool UI for a given tool name. Returns an unsubscribe function to remove the tool UI.\n   */\n  setToolUI: (\n    toolName: string,\n    render: ToolCallContentPartComponent,\n  ) => Unsubscribe;\n};\n\nexport const makeAssistantToolUIsStore = () =>\n  create<AssistantToolUIsState>((set) => {\n    const renderers = new Map<string, ToolCallContentPartComponent[]>();\n\n    return Object.freeze({\n      getToolUI: (name) => {\n        const arr = renderers.get(name);\n        const last = arr?.at(-1);\n        if (last) return last;\n        return null;\n      },\n      setToolUI: (name, render) => {\n        let arr = renderers.get(name);\n        if (!arr) {\n          arr = [];\n          renderers.set(name, arr);\n        }\n        arr.push(render);\n        set({}); // notify the store listeners\n\n        return () => {\n          const index = arr.indexOf(render);\n          if (index !== -1) {\n            arr.splice(index, 1);\n          }\n          if (index === arr.length) {\n            set({}); // notify the store listeners\n          }\n        };\n      },\n    }) satisfies AssistantToolUIsState;\n  });\n"],"names":[],"mappings":";;;;AAEA,SAAS,cAAc;;;AAmBhB,IAAM,4BAA4B,iJACvC,SAAA,EAA8B,CAAC,QAAQ;QACrC,MAAM,YAAY,aAAA,GAAA,IAAI,IAA4C;QAElE,OAAO,OAAO,MAAA,CAAO;YACnB,WAAW,CAAC,SAAS;gBACnB,MAAM,MAAM,UAAU,GAAA,CAAI,IAAI;gBAC9B,MAAM,OAAO,KAAK,GAAG,CAAA,CAAE;gBACvB,IAAI,KAAM,CAAA,OAAO;gBACjB,OAAO;YACT;YACA,WAAW,CAAC,MAAM,WAAW;gBAC3B,IAAI,MAAM,UAAU,GAAA,CAAI,IAAI;gBAC5B,IAAI,CAAC,KAAK;oBACR,MAAM,CAAC,CAAA;oBACP,UAAU,GAAA,CAAI,MAAM,GAAG;gBACzB;gBACA,IAAI,IAAA,CAAK,MAAM;gBACf,IAAI,CAAC,CAAC;gBAEN,OAAO,MAAM;oBACX,MAAM,QAAQ,IAAI,OAAA,CAAQ,MAAM;oBAChC,IAAI,UAAU,CAAA,GAAI;wBAChB,IAAI,MAAA,CAAO,OAAO,CAAC;oBACrB;oBACA,IAAI,UAAU,IAAI,MAAA,EAAQ;wBACxB,IAAI,CAAC,CAAC;oBACR;gBACF;YACF;QACF,CAAC;IACH,CAAC","ignoreList":[0]}},
    {"offset": {"line": 2549, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2555, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/context/stores/ThreadViewport.tsx"],"sourcesContent":["import { create } from \"zustand\";\nimport type { Unsubscribe } from \"../../types/Unsubscribe\";\n\nexport type ThreadViewportState = {\n  readonly isAtBottom: boolean;\n  readonly scrollToBottom: () => void;\n  readonly onScrollToBottom: (callback: () => void) => Unsubscribe;\n};\n\nexport const makeThreadViewportStore = () => {\n  const scrollToBottomListeners = new Set<() => void>();\n\n  return create<ThreadViewportState>(() => ({\n    isAtBottom: true,\n    scrollToBottom: () => {\n      for (const listener of scrollToBottomListeners) {\n        listener();\n      }\n    },\n    onScrollToBottom: (callback) => {\n      scrollToBottomListeners.add(callback);\n      return () => {\n        scrollToBottomListeners.delete(callback);\n      };\n    },\n  }));\n};\n"],"names":[],"mappings":";;;;AAAA,SAAS,cAAc;;AAShB,IAAM,0BAA0B,MAAM;IAC3C,MAAM,0BAA0B,aAAA,GAAA,IAAI,IAAgB;IAEpD,oJAAO,SAAA,EAA4B,IAAA,CAAO;YACxC,YAAY;YACZ,gBAAgB,MAAM;gBACpB,KAAA,MAAW,YAAY,wBAAyB;oBAC9C,SAAS;gBACX;YACF;YACA,kBAAkB,CAAC,aAAa;gBAC9B,wBAAwB,GAAA,CAAI,QAAQ;gBACpC,OAAO,MAAM;oBACX,wBAAwB,MAAA,CAAO,QAAQ;gBACzC;YACF;QACF,CAAA,CAAE;AACJ","ignoreList":[0]}},
    {"offset": {"line": 2580, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2586, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/context/react/ThreadListItemContext.ts"],"sourcesContent":["\"use client\";\n\nimport { createContext } from \"react\";\nimport { ReadonlyStore } from \"../ReadonlyStore\";\nimport { createContextStoreHook } from \"./utils/createContextStoreHook\";\nimport { createContextHook } from \"./utils/createContextHook\";\nimport { UseBoundStore } from \"zustand\";\nimport { ThreadListItemRuntime } from \"../../api/ThreadListItemRuntime\";\nimport { ThreadListItemState } from \"../../api/ThreadListItemRuntime\";\n\nexport type ThreadListItemContextValue = {\n  useThreadListItemRuntime: UseBoundStore<ReadonlyStore<ThreadListItemRuntime>>;\n  useThreadListItem: UseBoundStore<ReadonlyStore<ThreadListItemState>>;\n};\n\nexport const ThreadListItemContext =\n  createContext<ThreadListItemContextValue | null>(null);\n\nexport const useThreadListItemContext = createContextHook(\n  ThreadListItemContext,\n  \"a component passed to <ThreadListPrimitive.Items components={...}>\",\n);\n\nexport function useThreadListItemRuntime(options?: {\n  optional?: false | undefined;\n}): ThreadListItemRuntime;\nexport function useThreadListItemRuntime(options?: {\n  optional?: boolean | undefined;\n}): ThreadListItemRuntime | null;\nexport function useThreadListItemRuntime(options?: {\n  optional?: boolean | undefined;\n}) {\n  const context = useThreadListItemContext(options);\n  if (!context) return null;\n  return context.useThreadListItemRuntime();\n}\n\nexport const { useThreadListItem } = createContextStoreHook(\n  useThreadListItemContext,\n  \"useThreadListItem\",\n);\n"],"names":[],"mappings":";;;;;;;AAEA,SAAS,qBAAqB;AAE9B,SAAS,8BAA8B;AACvC,SAAS,yBAAyB;;;;;AAU3B,IAAM,kOACX,gBAAA,EAAiD,IAAI;AAEhD,IAAM,qOAA2B,oBAAA,EACtC,uBACA;AASK,SAAS,yBAAyB,OAAA,EAEtC;IACD,MAAM,UAAU,yBAAyB,OAAO;IAChD,IAAI,CAAC,QAAS,CAAA,OAAO;IACrB,OAAO,QAAQ,wBAAA,CAAyB;AAC1C;AAEO,IAAM,EAAE,iBAAA,CAAkB,CAAA,kNAAI,yBAAA,EACnC,0BACA","ignoreList":[0]}},
    {"offset": {"line": 2610, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2616, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/context/providers/ThreadListItemRuntimeProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport { type FC, type PropsWithChildren, useEffect, useState } from \"react\";\nimport { create } from \"zustand\";\nimport {\n  ThreadListItemContext,\n  type ThreadListItemContextValue,\n} from \"../react/ThreadListItemContext\";\nimport { writableStore } from \"../ReadonlyStore\";\nimport { ThreadListItemRuntime } from \"../../api/ThreadListItemRuntime\";\n\nexport namespace ThreadListItemRuntimeProvider {\n  export type Props = PropsWithChildren<{\n    runtime: ThreadListItemRuntime;\n  }>;\n}\n\nconst useThreadListItemRuntimeStore = (runtime: ThreadListItemRuntime) => {\n  const [store] = useState(() => create(() => runtime));\n\n  useEffect(() => {\n    writableStore(store).setState(runtime, true);\n  }, [runtime, store]);\n\n  return store;\n};\n\nexport const useThreadListItemStore = (runtime: ThreadListItemRuntime) => {\n  const [store] = useState(() => create(() => runtime.getState()));\n  useEffect(() => {\n    const updateState = () =>\n      writableStore(store).setState(runtime.getState(), true);\n    updateState();\n    return runtime.subscribe(updateState);\n  }, [runtime, store]);\n\n  return store;\n};\n\nexport const ThreadListItemRuntimeProvider: FC<\n  ThreadListItemRuntimeProvider.Props\n> = ({ runtime, children }) => {\n  const useThreadListItemRuntime = useThreadListItemRuntimeStore(runtime);\n  const useThreadListItem = useThreadListItemStore(runtime);\n  const [context] = useState<ThreadListItemContextValue>(() => {\n    return { useThreadListItemRuntime, useThreadListItem };\n  });\n\n  return (\n    <ThreadListItemContext.Provider value={context}>\n      {children}\n    </ThreadListItemContext.Provider>\n  );\n};\n"],"names":[],"mappings":";;;;;AAEA,SAA0C,WAAW,gBAAgB;AA+CjE;AA9CJ,SAAS,cAAc;AAKvB,SAAS,qBAAqB;AAJ9B;;;;;;;AAaA,IAAM,gCAAgC,CAAC,YAAmC;IACxE,MAAM,CAAC,KAAK,CAAA,6MAAI,WAAA,EAAS,IAAM,sJAAA,EAAO,IAAM,OAAO,CAAC;IAEpD,CAAA,GAAA,qMAAA,CAAA,YAAA,EAAU,MAAM;QACd,CAAA,GAAA,+KAAA,CAAA,gBAAA,EAAc,KAAK,EAAE,QAAA,CAAS,SAAS,IAAI;IAC7C,GAAG;QAAC;QAAS,KAAK;KAAC;IAEnB,OAAO;AACT;AAEO,IAAM,yBAAyB,CAAC,YAAmC;IACxE,MAAM,CAAC,KAAK,CAAA,6MAAI,WAAA,EAAS,iJAAM,SAAA,EAAO,IAAM,QAAQ,QAAA,CAAS,CAAC,CAAC;IAC/D,CAAA,GAAA,qMAAA,CAAA,YAAA,EAAU,MAAM;QACd,MAAM,cAAc,IAClB,oMAAA,EAAc,KAAK,EAAE,QAAA,CAAS,QAAQ,QAAA,CAAS,GAAG,IAAI;QACxD,YAAY;QACZ,OAAO,QAAQ,SAAA,CAAU,WAAW;IACtC,GAAG;QAAC;QAAS,KAAK;KAAC;IAEnB,OAAO;AACT;AAEO,IAAM,gCAET,CAAC,EAAE,OAAA,EAAS,QAAA,CAAS,CAAA,KAAM;IAC7B,MAAM,2BAA2B,8BAA8B,OAAO;IACtE,MAAM,oBAAoB,uBAAuB,OAAO;IACxD,MAAM,CAAC,OAAO,CAAA,6MAAI,WAAA,EAAqC,MAAM;QAC3D,OAAO;YAAE;YAA0B;QAAkB;IACvD,CAAC;IAED,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,mMAAC,wBAAA,CAAsB,QAAA,EAAtB;QAA+B,OAAO;QACpC;IAAA,CACH;AAEJ","ignoreList":[0]}},
    {"offset": {"line": 2670, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2676, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/context/react/ThreadContext.ts"],"sourcesContent":["\"use client\";\n\nimport { createContext, useEffect, useState } from \"react\";\nimport type { ThreadViewportState } from \"../stores/ThreadViewport\";\nimport { ReadonlyStore } from \"../ReadonlyStore\";\nimport { UseBoundStore } from \"zustand\";\nimport { createContextHook } from \"./utils/createContextHook\";\nimport { createContextStoreHook } from \"./utils/createContextStoreHook\";\nimport { ThreadRuntime } from \"../../api/ThreadRuntime\";\nimport { ThreadState } from \"../../api/ThreadRuntime\";\nimport { ModelConfig } from \"../../types\";\nimport { ThreadComposerState } from \"../../api/ComposerRuntime\";\n\nexport type ThreadContextValue = {\n  useThread: UseBoundStore<ReadonlyStore<ThreadState>>;\n  useThreadRuntime: UseBoundStore<ReadonlyStore<ThreadRuntime>>;\n  useComposer: UseBoundStore<ReadonlyStore<ThreadComposerState>>;\n  useViewport: UseBoundStore<ReadonlyStore<ThreadViewportState>>;\n};\n\nexport const ThreadContext = createContext<ThreadContextValue | null>(null);\n\nexport const useThreadContext = createContextHook(\n  ThreadContext,\n  \"AssistantRuntimeProvider\",\n);\n\nexport function useThreadRuntime(options?: {\n  optional?: false | undefined;\n}): ThreadRuntime;\nexport function useThreadRuntime(options?: {\n  optional?: boolean | undefined;\n}): ThreadRuntime | null;\nexport function useThreadRuntime(options?: { optional?: boolean | undefined }) {\n  const context = useThreadContext(options);\n  if (!context) return null;\n  return context.useThreadRuntime();\n}\n\nexport const { useThread } = createContextStoreHook(\n  useThreadContext,\n  \"useThread\",\n);\n\nexport const { useComposer: useThreadComposer } = createContextStoreHook(\n  useThreadContext,\n  \"useComposer\",\n);\n\nexport const {\n  useViewport: useThreadViewport,\n  useViewportStore: useThreadViewportStore,\n} = createContextStoreHook(useThreadContext, \"useViewport\");\n\nexport function useThreadModelConfig(options?: {\n  optional?: false | undefined;\n}): ModelConfig;\nexport function useThreadModelConfig(options?: {\n  optional?: boolean | undefined;\n}): ModelConfig | null;\nexport function useThreadModelConfig(options?: {\n  optional?: boolean | undefined;\n}): ModelConfig | null {\n  const [, rerender] = useState({});\n\n  const runtime = useThreadRuntime(options);\n  useEffect(() => {\n    return runtime?.unstable_on(\"model-config-update\", () => rerender({}));\n  }, [runtime]);\n\n  if (!runtime) return null;\n  return runtime?.getModelConfig();\n}\n"],"names":[],"mappings":";;;;;;;;;;;AAEA,SAAS,eAAe,WAAW,gBAAgB;AAInD,SAAS,yBAAyB;AAClC,SAAS,8BAA8B;;;;;AAahC,IAAM,0NAAgB,gBAAA,EAAyC,IAAI;AAEnE,IAAM,uBAAmB,0NAAA,EAC9B,eACA;AASK,SAAS,iBAAiB,OAAA,EAA8C;IAC7E,MAAM,UAAU,iBAAiB,OAAO;IACxC,IAAI,CAAC,QAAS,CAAA,OAAO;IACrB,OAAO,QAAQ,gBAAA,CAAiB;AAClC;AAEO,IAAM,EAAE,SAAA,CAAU,CAAA,kNAAI,yBAAA,EAC3B,kBACA;AAGK,IAAM,EAAE,aAAa,iBAAA,CAAkB,CAAA,kNAAI,yBAAA,EAChD,kBACA;AAGK,IAAM,EACX,aAAa,iBAAA,EACb,kBAAkB,sBAAA,EACpB,kNAAI,yBAAA,EAAuB,kBAAkB,aAAa;AAQnD,SAAS,qBAAqB,OAAA,EAEd;IACrB,MAAM,CAAC,EAAE,QAAQ,CAAA,6MAAI,WAAA,EAAS,CAAC,CAAC;IAEhC,MAAM,UAAU,iBAAiB,OAAO;IACxC,CAAA,GAAA,qMAAA,CAAA,YAAA,EAAU,MAAM;QACd,OAAO,SAAS,YAAY,uBAAuB,IAAM,SAAS,CAAC,CAAC,CAAC;IACvE,GAAG;QAAC,OAAO;KAAC;IAEZ,IAAI,CAAC,QAAS,CAAA,OAAO;IACrB,OAAO,SAAS,eAAe;AACjC","ignoreList":[0]}},
    {"offset": {"line": 2717, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2723, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/context/providers/ThreadRuntimeProvider.tsx"],"sourcesContent":["import type { FC, PropsWithChildren } from \"react\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport type { ThreadContextValue } from \"../react/ThreadContext\";\nimport { ThreadContext } from \"../react/ThreadContext\";\nimport { makeThreadViewportStore } from \"../stores/ThreadViewport\";\nimport { writableStore } from \"../ReadonlyStore\";\nimport { ThreadRuntime } from \"../../api/ThreadRuntime\";\nimport { create } from \"zustand\";\nimport { ThreadComposerRuntime } from \"../../api/ComposerRuntime\";\nimport { ThreadListItemRuntime } from \"../../api/ThreadListItemRuntime\";\nimport { ThreadListItemRuntimeProvider } from \"./ThreadListItemRuntimeProvider\";\n\ntype ThreadProviderProps = {\n  listItemRuntime: ThreadListItemRuntime;\n  runtime: ThreadRuntime;\n};\n\nconst useThreadRuntimeStore = (runtime: ThreadRuntime) => {\n  const [store] = useState(() => create(() => runtime));\n\n  useEffect(() => {\n    writableStore(store).setState(runtime, true);\n  }, [runtime, store]);\n\n  return store;\n};\n\nconst useThreadStore = (runtime: ThreadRuntime) => {\n  const [store] = useState(() => create(() => runtime.getState()));\n  useEffect(() => {\n    const updateState = () =>\n      writableStore(store).setState(runtime.getState(), true);\n    updateState();\n    return runtime.subscribe(updateState);\n  }, [runtime, store]);\n\n  return store;\n};\n\nconst useThreadComposerStore = (runtime: ThreadComposerRuntime) => {\n  const [store] = useState(() => create(() => runtime.getState()));\n\n  useEffect(() => {\n    const updateState = () =>\n      writableStore(store).setState(runtime.getState(), true);\n    updateState();\n    return runtime.subscribe(updateState);\n  }, [runtime, store]);\n\n  return store;\n};\n\nexport const ThreadRuntimeProvider: FC<\n  PropsWithChildren<ThreadProviderProps>\n> = ({ children, listItemRuntime: threadListItemRuntime, runtime }) => {\n  const useThreadRuntime = useThreadRuntimeStore(runtime);\n  const useThread = useThreadStore(runtime);\n  const useThreadComposer = useThreadComposerStore(runtime.composer);\n\n  const context = useMemo<ThreadContextValue>(() => {\n    const useViewport = makeThreadViewportStore();\n\n    return {\n      useThread,\n      useThreadRuntime,\n      useComposer: useThreadComposer,\n      useViewport,\n    };\n  }, [useThread, useThreadRuntime, useThreadComposer]);\n\n  return (\n    <ThreadListItemRuntimeProvider runtime={threadListItemRuntime}>\n      <ThreadContext.Provider value={context}>\n        {children}\n      </ThreadContext.Provider>\n    </ThreadListItemRuntimeProvider>\n  );\n};\n"],"names":[],"mappings":";;;;AACA,SAAS,WAAW,SAAS,gBAAgB;AAuEvC;AAjEN,SAAS,cAAc;AAFvB,SAAS,qBAAqB;AAD9B,SAAS,+BAA+B;AAMxC,SAAS,qCAAqC;AAP9C,SAAS,qBAAqB;;;;;;;;AAc9B,IAAM,wBAAwB,CAAC,YAA2B;IACxD,MAAM,CAAC,KAAK,CAAA,6MAAI,WAAA,EAAS,gJAAM,UAAA,EAAO,IAAM,OAAO,CAAC;IAEpD,CAAA,GAAA,qMAAA,CAAA,YAAA,EAAU,MAAM;QACd,CAAA,GAAA,+KAAA,CAAA,gBAAA,EAAc,KAAK,EAAE,QAAA,CAAS,SAAS,IAAI;IAC7C,GAAG;QAAC;QAAS,KAAK;KAAC;IAEnB,OAAO;AACT;AAEA,IAAM,iBAAiB,CAAC,YAA2B;IACjD,MAAM,CAAC,KAAK,CAAA,IAAI,oNAAA,EAAS,iJAAM,SAAA,EAAO,IAAM,QAAQ,QAAA,CAAS,CAAC,CAAC;IAC/D,CAAA,GAAA,qMAAA,CAAA,YAAA,EAAU,MAAM;QACd,MAAM,cAAc,wLAClB,gBAAA,EAAc,KAAK,EAAE,QAAA,CAAS,QAAQ,QAAA,CAAS,GAAG,IAAI;QACxD,YAAY;QACZ,OAAO,QAAQ,SAAA,CAAU,WAAW;IACtC,GAAG;QAAC;QAAS,KAAK;KAAC;IAEnB,OAAO;AACT;AAEA,IAAM,yBAAyB,CAAC,YAAmC;IACjE,MAAM,CAAC,KAAK,CAAA,6MAAI,WAAA,EAAS,IAAM,sJAAA,EAAO,IAAM,QAAQ,QAAA,CAAS,CAAC,CAAC;IAE/D,CAAA,GAAA,qMAAA,CAAA,YAAA,EAAU,MAAM;QACd,MAAM,cAAc,wLAClB,gBAAA,EAAc,KAAK,EAAE,QAAA,CAAS,QAAQ,QAAA,CAAS,GAAG,IAAI;QACxD,YAAY;QACZ,OAAO,QAAQ,SAAA,CAAU,WAAW;IACtC,GAAG;QAAC;QAAS,KAAK;KAAC;IAEnB,OAAO;AACT;AAEO,IAAM,wBAET,CAAC,EAAE,QAAA,EAAU,iBAAiB,qBAAA,EAAuB,OAAA,CAAQ,CAAA,KAAM;IACrE,MAAM,mBAAmB,sBAAsB,OAAO;IACtD,MAAM,YAAY,eAAe,OAAO;IACxC,MAAM,oBAAoB,uBAAuB,QAAQ,QAAQ;IAEjE,MAAM,oNAAU,UAAA,EAA4B,MAAM;QAChD,MAAM,eAAc,wNAAA,CAAwB;QAE5C,OAAO;YACL;YACA;YACA,aAAa;YACb;QACF;IACF,GAAG;QAAC;QAAW;QAAkB,iBAAiB;KAAC;IAEnD,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,+MAAC,gCAAA,EAAA;QAA8B,SAAS;QACtC,UAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,2LAAC,gBAAA,CAAc,QAAA,EAAd;YAAuB,OAAO;YAC5B;QAAA,CACH;IAAA,CACF;AAEJ","ignoreList":[0]}},
    {"offset": {"line": 2802, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2808, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/context/providers/AssistantRuntimeProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC, PropsWithChildren } from \"react\";\nimport { memo, useEffect, useMemo, useState } from \"react\";\nimport { AssistantContext } from \"../react/AssistantContext\";\nimport { makeAssistantToolUIsStore } from \"../stores/AssistantToolUIs\";\nimport { ThreadRuntimeProvider } from \"./ThreadRuntimeProvider\";\nimport { AssistantRuntime } from \"../../api/AssistantRuntime\";\nimport { create } from \"zustand\";\nimport { writableStore } from \"../ReadonlyStore\";\nimport { AssistantRuntimeCore } from \"../../runtimes/core/AssistantRuntimeCore\";\n\nexport namespace AssistantRuntimeProvider {\n  export type Props = PropsWithChildren<{\n    /**\n     * The runtime to provide to the rest of your app.\n     */\n    runtime: AssistantRuntime;\n  }>;\n}\n\nconst useAssistantRuntimeStore = (runtime: AssistantRuntime) => {\n  const [store] = useState(() => create(() => runtime));\n\n  useEffect(() => {\n    writableStore(store).setState(runtime, true);\n  }, [runtime, store]);\n\n  return store;\n};\n\nconst useAssistantToolUIsStore = () => {\n  return useMemo(() => makeAssistantToolUIsStore(), []);\n};\n\nconst useThreadListStore = (runtime: AssistantRuntime) => {\n  const [store] = useState(() => create(() => runtime.threadList.getState()));\n\n  useEffect(() => {\n    const updateState = () =>\n      writableStore(store).setState(runtime.threadList.getState(), true);\n    updateState();\n    return runtime.threadList.subscribe(updateState);\n  }, [runtime, store]);\n\n  return store;\n};\n\nconst getRenderComponent = (runtime: AssistantRuntime) => {\n  return (runtime as { _core?: AssistantRuntimeCore })._core?.RenderComponent;\n};\n\nexport const AssistantRuntimeProviderImpl: FC<\n  AssistantRuntimeProvider.Props\n> = ({ children, runtime }) => {\n  const useAssistantRuntime = useAssistantRuntimeStore(runtime);\n  const useToolUIs = useAssistantToolUIsStore();\n  const useThreadList = useThreadListStore(runtime);\n  const context = useMemo(() => {\n    return {\n      useToolUIs,\n      useAssistantRuntime,\n      useThreadList,\n    };\n  }, [useAssistantRuntime, useToolUIs, useThreadList]);\n\n  const RenderComponent = getRenderComponent(runtime);\n\n  return (\n    <AssistantContext.Provider value={context}>\n      {RenderComponent && <RenderComponent />}\n      <ThreadRuntimeProvider\n        runtime={runtime.thread}\n        listItemRuntime={runtime.threadList.mainItem}\n      >\n        {children}\n      </ThreadRuntimeProvider>\n    </AssistantContext.Provider>\n  );\n};\n\nexport const AssistantRuntimeProvider = memo(AssistantRuntimeProviderImpl);\n"],"names":[],"mappings":";;;;;AAGA,SAAS,MAAM,WAAW,SAAS,gBAAgB;AAkE/C,SACsB,KADtB;AA7DJ,SAAS,cAAc;AACvB,SAAS,qBAAqB;AAJ9B,SAAS,iCAAiC;AAD1C,SAAS,wBAAwB;AAEjC,SAAS,6BAA6B;;;;;;;;;AAetC,IAAM,2BAA2B,CAAC,YAA8B;IAC9D,MAAM,CAAC,KAAK,CAAA,6MAAI,WAAA,EAAS,gJAAM,UAAA,EAAO,IAAM,OAAO,CAAC;IAEpD,CAAA,GAAA,qMAAA,CAAA,YAAA,EAAU,MAAM;QACd,CAAA,GAAA,+KAAA,CAAA,gBAAA,EAAc,KAAK,EAAE,QAAA,CAAS,SAAS,IAAI;IAC7C,GAAG;QAAC;QAAS,KAAK;KAAC;IAEnB,OAAO;AACT;AAEA,IAAM,2BAA2B,MAAM;IACrC,OAAO,oNAAA,EAAQ,qMAAM,4BAAA,CAA0B,IAAG,CAAC,CAAC;AACtD;AAEA,IAAM,qBAAqB,CAAC,YAA8B;IACxD,MAAM,CAAC,KAAK,CAAA,6MAAI,WAAA,EAAS,iJAAM,SAAA,EAAO,IAAM,QAAQ,UAAA,CAAW,QAAA,CAAS,CAAC,CAAC;IAE1E,CAAA,GAAA,qMAAA,CAAA,YAAA,EAAU,MAAM;QACd,MAAM,cAAc,KAClB,mMAAA,EAAc,KAAK,EAAE,QAAA,CAAS,QAAQ,UAAA,CAAW,QAAA,CAAS,GAAG,IAAI;QACnE,YAAY;QACZ,OAAO,QAAQ,UAAA,CAAW,SAAA,CAAU,WAAW;IACjD,GAAG;QAAC;QAAS,KAAK;KAAC;IAEnB,OAAO;AACT;AAEA,IAAM,qBAAqB,CAAC,YAA8B;IACxD,OAAQ,QAA6C,KAAA,EAAO;AAC9D;AAEO,IAAM,+BAET,CAAC,EAAE,QAAA,EAAU,OAAA,CAAQ,CAAA,KAAM;IAC7B,MAAM,sBAAsB,yBAAyB,OAAO;IAC5D,MAAM,aAAa,yBAAyB;IAC5C,MAAM,gBAAgB,mBAAmB,OAAO;IAChD,MAAM,UAAU,oNAAA,EAAQ,MAAM;QAC5B,OAAO;YACL;YACA;YACA;QACF;IACF,GAAG;QAAC;QAAqB;QAAY,aAAa;KAAC;IAEnD,MAAM,kBAAkB,mBAAmB,OAAO;IAElD,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,OAAA,6LAAC,oBAAA,CAAiB,QAAA,EAAjB;QAA0B,OAAO;QAC/B,UAAA;YAAA,mBAAmB,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,iBAAA,CAAA,CAAgB;YACrC,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,uMAAC,wBAAA,EAAA;gBACC,SAAS,QAAQ,MAAA;gBACjB,iBAAiB,QAAQ,UAAA,CAAW,QAAA;gBAEnC;YAAA;SACH;IAAA,CACF;AAEJ;AAEO,IAAM,qOAA2B,OAAA,EAAK,4BAA4B","ignoreList":[0]}},
    {"offset": {"line": 2887, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2893, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/ui/thread-config.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ComponentType,\n  FC,\n  PropsWithChildren,\n  ReactNode,\n  createContext,\n  useContext,\n} from \"react\";\n\nimport { AssistantRuntime } from \"../api/AssistantRuntime\";\nimport { AvatarProps } from \"./base/avatar\";\nimport {\n  EmptyContentPartComponent,\n  TextContentPartComponent,\n  ToolCallContentPartProps,\n} from \"../types\";\nimport { AssistantRuntimeProvider } from \"../context\";\nimport { AssistantToolUI } from \"../model-config\";\nimport { useAssistantRuntime } from \"../context/react/AssistantContext\";\n\nexport type SuggestionConfig = {\n  text?: ReactNode | undefined;\n  prompt: string;\n};\n\nexport type ThreadWelcomeConfig = {\n  message?: string | null | undefined;\n  suggestions?: SuggestionConfig[] | undefined;\n};\n\nexport type UserMessageConfig = {\n  allowEdit?: boolean | undefined;\n};\n\nexport type AssistantMessageConfig = {\n  allowReload?: boolean | undefined;\n  allowCopy?: boolean | undefined;\n  allowSpeak?: boolean | undefined;\n  allowFeedbackPositive?: boolean | undefined;\n  allowFeedbackNegative?: boolean | undefined;\n  components?:\n    | {\n        Text?: TextContentPartComponent | undefined;\n        Empty?: EmptyContentPartComponent | undefined;\n        ToolFallback?: ComponentType<ToolCallContentPartProps> | undefined;\n      }\n    | undefined;\n};\n\nexport type BranchPickerConfig = {\n  allowBranchPicker?: boolean | undefined;\n};\n\nexport type ComposerConfig = {\n  allowAttachments?: boolean | undefined;\n};\n\nexport type StringsConfig = {\n  assistantModal?: {\n    open: {\n      button: {\n        tooltip?: string | undefined;\n      };\n    };\n    closed: {\n      button: {\n        tooltip?: string | undefined;\n      };\n    };\n  };\n  threadList?: {\n    new?: {\n      label?: string | undefined;\n    };\n    item?: {\n      title?: {\n        fallback?: string | undefined;\n      };\n      archive?: {\n        tooltip?: string | undefined;\n      };\n    };\n  };\n  thread?: {\n    scrollToBottom?: {\n      tooltip?: string | undefined;\n    };\n  };\n  welcome?: {\n    message?: string | undefined;\n  };\n  userMessage?: {\n    edit?: {\n      tooltip?: string | undefined;\n    };\n  };\n  assistantMessage?: {\n    reload?: {\n      tooltip?: string | undefined;\n    };\n    copy?: {\n      tooltip?: string | undefined;\n    };\n    speak?: {\n      tooltip?: string | undefined;\n      stop?: {\n        tooltip?: string | undefined;\n      };\n    };\n    feedback?: {\n      positive?: {\n        tooltip?: string | undefined;\n      };\n      negative?: {\n        tooltip?: string | undefined;\n      };\n    };\n  };\n  branchPicker?: {\n    previous?: {\n      tooltip?: string | undefined;\n    };\n    next?: {\n      tooltip?: string | undefined;\n    };\n  };\n  composer?: {\n    send?:\n      | {\n          tooltip?: string | undefined;\n        }\n      | undefined;\n    cancel?:\n      | {\n          tooltip?: string | undefined;\n        }\n      | undefined;\n    addAttachment?:\n      | {\n          tooltip?: string | undefined;\n        }\n      | undefined;\n    removeAttachment?: {\n      tooltip?: string | undefined;\n    };\n    input?: {\n      placeholder?: string | undefined;\n    };\n  };\n  editComposer?: {\n    send?: {\n      label?: string | undefined;\n    };\n    cancel?: {\n      label?: string | undefined;\n    };\n  };\n  code?: {\n    header?: {\n      copy?: {\n        tooltip?: string | undefined;\n      };\n    };\n  };\n};\n\nconst ThreadConfigContext = createContext<ThreadConfig>({});\n\nexport type ThreadConfig = {\n  runtime?: AssistantRuntime | undefined;\n\n  assistantAvatar?: AvatarProps | undefined;\n\n  welcome?: ThreadWelcomeConfig | undefined;\n  assistantMessage?: AssistantMessageConfig | undefined;\n  userMessage?: UserMessageConfig | undefined;\n\n  branchPicker?: BranchPickerConfig | undefined;\n\n  composer?: ComposerConfig | undefined;\n\n  strings?: StringsConfig | undefined;\n\n  tools?: AssistantToolUI[] | undefined; // TODO add AssistantTool support\n\n  components?:\n    | {\n        UserMessage?: ComponentType | undefined;\n        AssistantMessage?: ComponentType | undefined;\n        EditComposer?: ComponentType | undefined;\n        Composer?: ComponentType | undefined;\n        ThreadWelcome?: ComponentType | undefined;\n      }\n    | undefined;\n};\n\nexport const useThreadConfig = (): Omit<ThreadConfig, \"runtime\"> => {\n  return useContext(ThreadConfigContext);\n};\n\nexport type ThreadConfigProviderProps = PropsWithChildren<{\n  config?: ThreadConfig | undefined;\n}>;\n\nexport const ThreadConfigProvider: FC<ThreadConfigProviderProps> = ({\n  children,\n  config,\n}) => {\n  const hasAssistant = !!useAssistantRuntime({ optional: true });\n\n  const hasConfig = config && Object.keys(config).length > 0;\n  const outerConfig = useThreadConfig();\n\n  if (hasConfig && Object.keys(outerConfig).length > 0) {\n    throw new Error(\n      \"You are providing ThreadConfig to several nested components. Please provide all configuration to the same component.\",\n    );\n  }\n\n  const configProvider = hasConfig ? (\n    <ThreadConfigContext.Provider value={config}>\n      {children}\n    </ThreadConfigContext.Provider>\n  ) : (\n    <>{children}</>\n  );\n\n  if (!config?.runtime) return configProvider;\n\n  if (hasAssistant) {\n    throw new Error(\n      \"You provided a runtime to <Thread> while simulataneously using <AssistantRuntimeProvider>. This is not allowed.\",\n    );\n  }\n  return (\n    <AssistantRuntimeProvider runtime={config.runtime}>\n      {configProvider}\n    </AssistantRuntimeProvider>\n  );\n};\n\nThreadConfigProvider.displayName = \"ThreadConfigProvider\";\n"],"names":[],"mappings":";;;;;AAEA;AA4NI,SAIA,UAJA;AA1MJ,SAAS,2BAA2B;AAFpC,SAAS,gCAAgC;;;;;;AAsJzC,IAAM,gOAAsB,gBAAA,EAA4B,CAAC,CAAC;AA8BnD,IAAM,kBAAkB,MAAqC;IAClE,WAAO,mNAAA,EAAW,mBAAmB;AACvC;AAMO,IAAM,uBAAsD,CAAC,EAClE,QAAA,EACA,MAAA,EACF,KAAM;IACJ,MAAM,eAAe,CAAC,iMAAC,sBAAA,EAAoB;QAAE,UAAU;IAAK,CAAC;IAE7D,MAAM,YAAY,UAAU,OAAO,IAAA,CAAK,MAAM,EAAE,MAAA,GAAS;IACzD,MAAM,cAAc,gBAAgB;IAEpC,IAAI,aAAa,OAAO,IAAA,CAAK,WAAW,EAAE,MAAA,GAAS,GAAG;QACpD,MAAM,IAAI,MACR;IAEJ;IAEA,MAAM,iBAAiB,YACrB,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,oBAAoB,QAAA,EAApB;QAA6B,OAAO;QAClC;IAAA,CACH,IAEA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAA,uNAAA,CAAA,WAAA,EAAA;QAAG;IAAA,CAAS;IAGd,IAAI,CAAC,QAAQ,QAAS,CAAA,OAAO;IAE7B,IAAI,cAAc;QAChB,MAAM,IAAI,MACR;IAEJ;IACA,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,0MAAC,2BAAA,EAAA;QAAyB,SAAS,OAAO,OAAA;QACvC,UAAA;IAAA,CACH;AAEJ;AAEA,qBAAqB,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 2938, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2944, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/contentPart/useContentPartText.tsx"],"sourcesContent":["import { ContentPartState } from \"../../api/ContentPartRuntime\";\nimport { useContentPart } from \"../../context/react/ContentPartContext\";\nimport { TextContentPart } from \"../../types\";\n\nexport const useContentPartText = () => {\n  const text = useContentPart((c) => {\n    if (c.type !== \"text\")\n      throw new Error(\n        \"ContentPartText can only be used inside text content parts.\",\n      );\n\n    return c as ContentPartState & TextContentPart;\n  });\n\n  return text;\n};\n"],"names":[],"mappings":";;;;AACA,SAAS,sBAAsB;;AAGxB,IAAM,qBAAqB,MAAM;IACtC,MAAM,yMAAO,iBAAA,EAAe,CAAC,MAAM;QACjC,IAAI,EAAE,IAAA,KAAS,QACb,MAAM,IAAI,MACR;QAGJ,OAAO;IACT,CAAC;IAED,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 2959, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2965, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/runtimes/external-store/ThreadMessageConverter.ts"],"sourcesContent":["import { ThreadMessage } from \"../../types\";\n\nexport type ConverterCallback<TIn> = (\n  cache: ThreadMessage | undefined,\n  message: TIn,\n  idx: number,\n) => ThreadMessage;\n\nexport class ThreadMessageConverter {\n  private readonly cache = new WeakMap<WeakKey, ThreadMessage>();\n\n  convertMessages<TIn extends WeakKey>(\n    messages: TIn[],\n    converter: ConverterCallback<TIn>,\n  ): ThreadMessage[] {\n    return messages.map((m, idx) => {\n      const cached = this.cache.get(m);\n      const newMessage = converter(cached, m, idx);\n      this.cache.set(m, newMessage);\n      return newMessage;\n    });\n  }\n}\n"],"names":[],"mappings":";;;;AAQO,IAAM,yBAAN,MAA6B;IACjB,QAAQ,aAAA,GAAA,IAAI,QAAgC,EAAA;IAE7D,gBACE,QAAA,EACA,SAAA,EACiB;QACjB,OAAO,SAAS,GAAA,CAAI,CAAC,GAAG,QAAQ;YAC9B,MAAM,SAAS,IAAA,CAAK,KAAA,CAAM,GAAA,CAAI,CAAC;YAC/B,MAAM,aAAa,UAAU,QAAQ,GAAG,GAAG;YAC3C,IAAA,CAAK,KAAA,CAAM,GAAA,CAAI,GAAG,UAAU;YAC5B,OAAO;QACT,CAAC;IACH;AACF","ignoreList":[0]}},
    {"offset": {"line": 2982, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2988, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/runtimes/external-store/auto-status.tsx"],"sourcesContent":["import { MessageStatus } from \"../../types\";\n\nconst AUTO_STATUS_RUNNING = Object.freeze({ type: \"running\" });\nconst AUTO_STATUS_COMPLETE = Object.freeze({\n  type: \"complete\",\n  reason: \"unknown\",\n});\n\nexport const isAutoStatus = (status: MessageStatus) =>\n  status === AUTO_STATUS_RUNNING || status === AUTO_STATUS_COMPLETE;\n\nexport const getAutoStatus = (isLast: boolean, isRunning: boolean) =>\n  isLast && isRunning ? AUTO_STATUS_RUNNING : AUTO_STATUS_COMPLETE;\n"],"names":[],"mappings":";;;;;AAEA,IAAM,sBAAsB,OAAO,MAAA,CAAO;IAAE,MAAM;AAAU,CAAC;AAC7D,IAAM,uBAAuB,OAAO,MAAA,CAAO;IACzC,MAAM;IACN,QAAQ;AACV,CAAC;AAEM,IAAM,eAAe,CAAC,SAC3B,WAAW,uBAAuB,WAAW;AAExC,IAAM,gBAAgB,CAAC,QAAiB,YAC7C,UAAU,YAAY,sBAAsB","ignoreList":[0]}},
    {"offset": {"line": 3004, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3010, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/runtimes/external-store/getExternalStoreMessage.tsx"],"sourcesContent":["import { ThreadMessage } from \"../../types\";\n\nexport const symbolInnerMessage = Symbol(\"innerMessage\");\n\nexport type ExternalStoreThreadMessage<T> = ThreadMessage & {\n  [symbolInnerMessage]?: T;\n};\n\nexport const getExternalStoreMessage = <T,>(message: ThreadMessage) => {\n  return (message as ExternalStoreThreadMessage<T>)[symbolInnerMessage];\n};\n"],"names":[],"mappings":";;;;;AAEO,IAAM,qBAAqB,OAAO,cAAc;AAMhD,IAAM,0BAA0B,CAAK,YAA2B;IACrE,OAAQ,OAAA,CAA0C,kBAAkB,CAAA;AACtE","ignoreList":[0]}},
    {"offset": {"line": 3021, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3027, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/runtimes/external-store/ThreadMessageLike.tsx"],"sourcesContent":["import {\n  MessageStatus,\n  TextContentPart,\n  ImageContentPart,\n  ToolCallContentPart,\n  UIContentPart,\n  ThreadMessage,\n  ThreadAssistantContentPart,\n  ThreadAssistantMessage,\n  ThreadUserContentPart,\n  ThreadUserMessage,\n  ThreadSystemMessage,\n  CompleteAttachment,\n} from \"../../types\";\nimport {\n  CoreToolCallContentPart,\n  ThreadStep,\n  Unstable_AudioContentPart,\n} from \"../../types/AssistantTypes\";\n\nexport type ThreadMessageLike = {\n  role: \"assistant\" | \"user\" | \"system\";\n  content:\n    | string\n    | readonly (\n        | TextContentPart\n        | ImageContentPart\n        | Unstable_AudioContentPart\n        | ToolCallContentPart<any, any>\n        | CoreToolCallContentPart<any, any>\n        | UIContentPart\n      )[];\n  id?: string | undefined;\n  createdAt?: Date | undefined;\n  status?: MessageStatus | undefined;\n  attachments?: readonly CompleteAttachment[] | undefined;\n  metadata?: {\n    unstable_data?: readonly Record<string, unknown>[] | undefined;\n    steps?: readonly ThreadStep[] | undefined;\n    custom?: Record<string, unknown> | undefined;\n  };\n};\n\nexport const fromThreadMessageLike = (\n  like: ThreadMessageLike,\n  fallbackId: string,\n  fallbackStatus: MessageStatus,\n): ThreadMessage => {\n  const { role, id, createdAt, attachments, status, metadata } = like;\n  const common = {\n    id: id ?? fallbackId,\n    createdAt: createdAt ?? new Date(),\n  };\n\n  const content =\n    typeof like.content === \"string\"\n      ? [{ type: \"text\" as const, text: like.content }]\n      : like.content;\n\n  if (role !== \"user\" && attachments)\n    throw new Error(\"attachments are only supported for user messages\");\n\n  if (role !== \"assistant\" && status)\n    throw new Error(\"status is only supported for assistant messages\");\n\n  if (role !== \"assistant\" && metadata?.steps)\n    throw new Error(\"metadata.steps is only supported for assistant messages\");\n\n  switch (role) {\n    case \"assistant\":\n      return {\n        ...common,\n        role,\n        content: content\n          .map((part): ThreadAssistantContentPart | null => {\n            const type = part.type;\n            switch (type) {\n              case \"text\":\n                if (part.text.trim().length === 0) return null;\n                return part;\n\n              case \"ui\":\n                return part;\n\n              case \"tool-call\": {\n                if (\"argsText\" in part) return part;\n                return {\n                  ...part,\n                  argsText: JSON.stringify(part.args),\n                };\n              }\n\n              default: {\n                const unhandledType: \"image\" | \"audio\" = type;\n                throw new Error(`Unknown content part type: ${unhandledType}`);\n              }\n            }\n          })\n          .filter((c) => !!c),\n        status: status ?? fallbackStatus,\n        metadata: {\n          unstable_data: metadata?.unstable_data ?? [],\n          custom: metadata?.custom ?? {},\n          steps: metadata?.steps ?? [],\n        },\n      } satisfies ThreadAssistantMessage;\n\n    case \"user\":\n      return {\n        ...common,\n        role,\n        content: content.map((part): ThreadUserContentPart => {\n          const type = part.type;\n          switch (type) {\n            case \"text\":\n            case \"ui\":\n            case \"image\":\n            case \"audio\":\n              return part;\n\n            default: {\n              const unhandledType: \"tool-call\" = type;\n              throw new Error(`Unknown content part type: ${unhandledType}`);\n            }\n          }\n        }),\n        attachments: attachments ?? [],\n        metadata: {\n          custom: metadata?.custom ?? {},\n        },\n      } satisfies ThreadUserMessage;\n\n    case \"system\":\n      if (content.length !== 1 || content[0]!.type !== \"text\")\n        throw new Error(\n          \"System messages must have exactly one text content part.\",\n        );\n\n      return {\n        ...common,\n        role,\n        content: content as [TextContentPart],\n        metadata: {\n          custom: metadata?.custom ?? {},\n        },\n      } satisfies ThreadSystemMessage;\n\n    default: {\n      const unsupportedRole: never = role;\n      throw new Error(`Unknown message role: ${unsupportedRole}`);\n    }\n  }\n};\n"],"names":[],"mappings":";;;;AA2CO,IAAM,wBAAwB,CACnC,MACA,YACA,mBACkB;IAClB,MAAM,EAAE,IAAA,EAAM,EAAA,EAAI,SAAA,EAAW,WAAA,EAAa,MAAA,EAAQ,QAAA,CAAS,CAAA,GAAI;IAC/D,MAAM,SAAS;QACb,IAAI,MAAM;QACV,WAAW,aAAa,aAAA,GAAA,IAAI,KAAK;IACnC;IAEA,MAAM,UACJ,OAAO,KAAK,OAAA,KAAY,WACpB;QAAC;YAAE,MAAM;YAAiB,MAAM,KAAK,OAAA;QAAQ,CAAC;KAAA,GAC9C,KAAK,OAAA;IAEX,IAAI,SAAS,UAAU,aACrB,MAAM,IAAI,MAAM,kDAAkD;IAEpE,IAAI,SAAS,eAAe,QAC1B,MAAM,IAAI,MAAM,iDAAiD;IAEnE,IAAI,SAAS,eAAe,UAAU,OACpC,MAAM,IAAI,MAAM,yDAAyD;IAE3E,OAAQ,MAAM;QACZ,KAAK;YACH,OAAO;gBACL,GAAG,MAAA;gBACH;gBACA,SAAS,QACN,GAAA,CAAI,CAAC,SAA4C;oBAChD,MAAM,OAAO,KAAK,IAAA;oBAClB,OAAQ,MAAM;wBACZ,KAAK;4BACH,IAAI,KAAK,IAAA,CAAK,IAAA,CAAK,EAAE,MAAA,KAAW,EAAG,CAAA,OAAO;4BAC1C,OAAO;wBAET,KAAK;4BACH,OAAO;wBAET,KAAK;4BAAa;gCAChB,IAAI,cAAc,KAAM,CAAA,OAAO;gCAC/B,OAAO;oCACL,GAAG,IAAA;oCACH,UAAU,KAAK,SAAA,CAAU,KAAK,IAAI;gCACpC;4BACF;wBAEA;4BAAS;gCACP,MAAM,gBAAmC;gCACzC,MAAM,IAAI,MAAM,CAAA,2BAAA,EAA8B,aAAa,EAAE;4BAC/D;oBACF;gBACF,CAAC,EACA,MAAA,CAAO,CAAC,IAAM,CAAC,CAAC,CAAC;gBACpB,QAAQ,UAAU;gBAClB,UAAU;oBACR,eAAe,UAAU,iBAAiB,CAAC,CAAA;oBAC3C,QAAQ,UAAU,UAAU,CAAC;oBAC7B,OAAO,UAAU,SAAS,CAAC,CAAA;gBAC7B;YACF;QAEF,KAAK;YACH,OAAO;gBACL,GAAG,MAAA;gBACH;gBACA,SAAS,QAAQ,GAAA,CAAI,CAAC,SAAgC;oBACpD,MAAM,OAAO,KAAK,IAAA;oBAClB,OAAQ,MAAM;wBACZ,KAAK;wBACL,KAAK;wBACL,KAAK;wBACL,KAAK;4BACH,OAAO;wBAET;4BAAS;gCACP,MAAM,gBAA6B;gCACnC,MAAM,IAAI,MAAM,CAAA,2BAAA,EAA8B,aAAa,EAAE;4BAC/D;oBACF;gBACF,CAAC;gBACD,aAAa,eAAe,CAAC,CAAA;gBAC7B,UAAU;oBACR,QAAQ,UAAU,UAAU,CAAC;gBAC/B;YACF;QAEF,KAAK;YACH,IAAI,QAAQ,MAAA,KAAW,KAAK,OAAA,CAAQ,CAAC,CAAA,CAAG,IAAA,KAAS,QAC/C,MAAM,IAAI,MACR;YAGJ,OAAO;gBACL,GAAG,MAAA;gBACH;gBACA;gBACA,UAAU;oBACR,QAAQ,UAAU,UAAU,CAAC;gBAC/B;YACF;QAEF;YAAS;gBACP,MAAM,kBAAyB;gBAC/B,MAAM,IAAI,MAAM,CAAA,sBAAA,EAAyB,eAAe,EAAE;YAC5D;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 3124, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3130, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/runtimes/external-store/external-message-converter.tsx"],"sourcesContent":["import { useMemo } from \"react\";\nimport { ThreadMessageConverter } from \"./ThreadMessageConverter\";\nimport {\n  getExternalStoreMessage,\n  symbolInnerMessage,\n} from \"./getExternalStoreMessage\";\nimport { fromThreadMessageLike, ThreadMessageLike } from \"./ThreadMessageLike\";\nimport { getAutoStatus, isAutoStatus } from \"./auto-status\";\nimport { ToolCallContentPart } from \"../../types\";\n\nexport namespace useExternalMessageConverter {\n  export type Message =\n    | ThreadMessageLike\n    | {\n        role: \"tool\";\n        toolCallId: string;\n        toolName?: string | undefined;\n        result: any;\n      };\n\n  export type Callback<T> = (message: T) => Message | Message[];\n}\n\ntype CallbackResult<T> = {\n  input: T;\n  outputs: useExternalMessageConverter.Message[];\n};\n\ntype ChunkResult<T> = {\n  inputs: T[];\n  outputs: useExternalMessageConverter.Message[];\n};\n\nconst joinExternalMessages = (\n  messages: readonly useExternalMessageConverter.Message[],\n): ThreadMessageLike => {\n  const assistantMessage: ThreadMessageLike & { content: any[] } = {\n    role: \"assistant\",\n    content: [],\n  };\n  for (const output of messages) {\n    if (output.role === \"tool\") {\n      const toolCallIdx = assistantMessage.content.findIndex(\n        (c) => c.type === \"tool-call\" && c.toolCallId === output.toolCallId,\n      );\n      if (toolCallIdx !== -1) {\n        const toolCall = assistantMessage.content[\n          toolCallIdx\n        ]! as ToolCallContentPart;\n        if (output.toolName) {\n          if (toolCall.toolName !== output.toolName)\n            throw new Error(\n              `Tool call name ${output.toolCallId} ${output.toolName} does not match existing tool call ${toolCall.toolName}`,\n            );\n        }\n        assistantMessage.content[toolCallIdx] = {\n          ...toolCall,\n          result: output.result,\n        };\n      } else {\n        throw new Error(\n          `Tool call ${output.toolCallId} ${output.toolName} not found in assistant message`,\n        );\n      }\n    } else {\n      const role = output.role;\n      switch (role) {\n        case \"system\":\n        case \"user\":\n          return output;\n        case \"assistant\":\n          if (assistantMessage.content.length === 0) {\n            assistantMessage.id = output.id;\n            assistantMessage.createdAt ??= output.createdAt;\n            assistantMessage.status ??= output.status;\n            // TODO keep this in sync\n          }\n          assistantMessage.content.push(...output.content);\n          break;\n        default: {\n          const unsupportedRole: never = role;\n          throw new Error(`Unknown message role: ${unsupportedRole}`);\n        }\n      }\n    }\n  }\n  return assistantMessage;\n};\n\nconst chunkExternalMessages = <T,>(callbackResults: CallbackResult<T>[]) => {\n  const results: ChunkResult<T>[] = [];\n  let isAssistant = false;\n  let inputs: T[] = [];\n  let outputs: useExternalMessageConverter.Message[] = [];\n\n  const flush = () => {\n    if (outputs.length) {\n      results.push({\n        inputs,\n        outputs,\n      });\n    }\n    inputs = [];\n    outputs = [];\n  };\n\n  for (const callbackResult of callbackResults) {\n    for (const output of callbackResult.outputs) {\n      if (!isAssistant || output.role === \"user\" || output.role === \"system\") {\n        flush();\n      }\n      isAssistant = output.role === \"assistant\" || output.role === \"tool\";\n\n      if (inputs.at(-1) !== callbackResult.input) {\n        inputs.push(callbackResult.input);\n      }\n      outputs.push(output);\n    }\n  }\n  flush();\n  return results;\n};\n\nexport const useExternalMessageConverter = <T extends WeakKey>({\n  callback,\n  messages,\n  isRunning,\n}: {\n  callback: useExternalMessageConverter.Callback<T>;\n  messages: T[];\n  isRunning: boolean;\n}) => {\n  const state = useMemo(\n    () => ({\n      callback,\n      callbackCache: new WeakMap<T, CallbackResult<T>>(),\n      chunkCache: new WeakMap<\n        useExternalMessageConverter.Message,\n        ChunkResult<T>\n      >(),\n      converterCache: new ThreadMessageConverter(),\n    }),\n    [callback],\n  );\n\n  return useMemo(() => {\n    const callbackResults: CallbackResult<T>[] = [];\n    for (const message of messages) {\n      let result = state.callbackCache.get(message);\n      if (!result) {\n        const output = state.callback(message);\n        const outputs = Array.isArray(output) ? output : [output];\n        result = { input: message, outputs };\n        state.callbackCache.set(message, result);\n      }\n      callbackResults.push(result);\n    }\n\n    const chunks = chunkExternalMessages(callbackResults).map((m) => {\n      const key = m.outputs[0];\n      if (!key) return m;\n\n      const cached = state.chunkCache.get(key);\n      if (cached && shallowArrayEqual(cached.outputs, m.outputs)) return cached;\n      state.chunkCache.set(key, m);\n      return m;\n    });\n\n    return state.converterCache.convertMessages(\n      chunks,\n      (cache, message, idx) => {\n        const isLast = idx === chunks.length - 1;\n        const autoStatus = getAutoStatus(isLast, isRunning);\n\n        if (\n          cache &&\n          (cache.role !== \"assistant\" ||\n            !isAutoStatus(cache.status) ||\n            cache.status === autoStatus)\n        ) {\n          const inputs = getExternalStoreMessage(cache) as T[];\n          if (shallowArrayEqual(inputs, message.inputs)) {\n            return cache;\n          }\n        }\n\n        const newMessage = fromThreadMessageLike(\n          joinExternalMessages(message.outputs),\n          idx.toString(),\n          autoStatus,\n        );\n        (newMessage as any)[symbolInnerMessage] = message.inputs;\n        return newMessage;\n      },\n    );\n  }, [state, messages, isRunning]);\n};\n\nconst shallowArrayEqual = (a: unknown[], b: unknown[]) => {\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n};\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3280, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3286, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/runtimes/attachment/SimpleImageAttachmentAdapter.ts"],"sourcesContent":["import {\n  PendingAttachment,\n  CompleteAttachment,\n} from \"../../types/AttachmentTypes\";\nimport { AttachmentAdapter } from \"./AttachmentAdapter\";\n\nexport class SimpleImageAttachmentAdapter implements AttachmentAdapter {\n  public accept = \"image/*\";\n\n  public async add(state: { file: File }): Promise<PendingAttachment> {\n    return {\n      id: state.file.name,\n      type: \"image\",\n      name: state.file.name,\n      contentType: state.file.type,\n      file: state.file,\n      status: { type: \"requires-action\", reason: \"composer-send\" },\n    };\n  }\n\n  public async send(\n    attachment: PendingAttachment,\n  ): Promise<CompleteAttachment> {\n    return {\n      ...attachment,\n      status: { type: \"complete\" },\n      content: [\n        {\n          type: \"image\",\n          image: await getFileDataURL(attachment.file),\n        },\n      ],\n    };\n  }\n\n  public async remove() {\n    // noop\n  }\n}\n\nconst getFileDataURL = (file: File) =>\n  new Promise<string>((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.onload = () => resolve(reader.result as string);\n    reader.onerror = (error) => reject(error);\n\n    reader.readAsDataURL(file);\n  });\n"],"names":[],"mappings":";;;;AAMO,IAAM,+BAAN,MAAgE;IAC9D,SAAS,UAAA;IAEhB,MAAa,IAAI,KAAA,EAAmD;QAClE,OAAO;YACL,IAAI,MAAM,IAAA,CAAK,IAAA;YACf,MAAM;YACN,MAAM,MAAM,IAAA,CAAK,IAAA;YACjB,aAAa,MAAM,IAAA,CAAK,IAAA;YACxB,MAAM,MAAM,IAAA;YACZ,QAAQ;gBAAE,MAAM;gBAAmB,QAAQ;YAAgB;QAC7D;IACF;IAEA,MAAa,KACX,UAAA,EAC6B;QAC7B,OAAO;YACL,GAAG,UAAA;YACH,QAAQ;gBAAE,MAAM;YAAW;YAC3B,SAAS;gBACP;oBACE,MAAM;oBACN,OAAO,MAAM,eAAe,WAAW,IAAI;gBAC7C;aACF;QACF;IACF;IAEA,MAAa,SAAS,CAEtB;AACF;AAEA,IAAM,iBAAiB,CAAC,OACtB,IAAI,QAAgB,CAAC,SAAS,WAAW;QACvC,MAAM,SAAS,IAAI,WAAW;QAE9B,OAAO,MAAA,GAAS,IAAM,QAAQ,OAAO,MAAgB;QACrD,OAAO,OAAA,GAAU,CAAC,QAAU,OAAO,KAAK;QAExC,OAAO,aAAA,CAAc,IAAI;IAC3B,CAAC","ignoreList":[0]}},
    {"offset": {"line": 3329, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3335, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/runtimes/external-store/ExternalStoreThreadListRuntimeCore.tsx"],"sourcesContent":["import type { Unsubscribe } from \"../../types\";\nimport { ExternalStoreThreadRuntimeCore } from \"./ExternalStoreThreadRuntimeCore\";\nimport { ThreadListRuntimeCore } from \"../core/ThreadListRuntimeCore\";\nimport {\n  ExternalStoreThreadData,\n  ExternalStoreThreadListAdapter,\n} from \"./ExternalStoreAdapter\";\n\nexport type ExternalStoreThreadFactory = () => ExternalStoreThreadRuntimeCore;\n\nconst EMPTY_ARRAY = Object.freeze([]);\nconst DEFAULT_THREAD_ID = \"DEFAULT_THREAD_ID\";\nconst DEFAULT_THREADS = Object.freeze([DEFAULT_THREAD_ID]);\nconst DEFAULT_THREAD: ExternalStoreThreadData<\"regular\"> = Object.freeze({\n  threadId: DEFAULT_THREAD_ID,\n  status: \"regular\",\n});\nconst RESOLVED_PROMISE = Promise.resolve();\n\nexport class ExternalStoreThreadListRuntimeCore\n  implements ThreadListRuntimeCore\n{\n  private _mainThreadId: string = DEFAULT_THREAD_ID;\n  private _threads: readonly string[] = DEFAULT_THREADS;\n  private _archivedThreads: readonly string[] = EMPTY_ARRAY;\n\n  public get newThreadId() {\n    return undefined;\n  }\n\n  public get threadIds() {\n    return this._threads;\n  }\n\n  public get archivedThreadIds() {\n    return this._archivedThreads;\n  }\n\n  public getLoadThreadsPromise() {\n    return RESOLVED_PROMISE;\n  }\n\n  private _mainThread: ExternalStoreThreadRuntimeCore;\n\n  public get mainThreadId() {\n    return this._mainThreadId;\n  }\n\n  constructor(\n    private adapter: ExternalStoreThreadListAdapter = {},\n    private threadFactory: ExternalStoreThreadFactory,\n  ) {\n    this._mainThread = this.threadFactory();\n  }\n\n  public getMainThreadRuntimeCore() {\n    return this._mainThread;\n  }\n\n  public getItemById(threadId: string) {\n    for (const thread of this.adapter.threads ?? []) {\n      if (thread.threadId === threadId) return thread;\n    }\n    for (const thread of this.adapter.archivedThreads ?? []) {\n      if (thread.threadId === threadId) return thread;\n    }\n    if (threadId === DEFAULT_THREAD_ID) return DEFAULT_THREAD;\n    return undefined;\n  }\n\n  public __internal_setAdapter(adapter: ExternalStoreThreadListAdapter) {\n    const previousAdapter = this.adapter;\n    this.adapter = adapter;\n\n    const newThreadId = adapter.threadId ?? DEFAULT_THREAD_ID;\n    const newThreads = adapter.threads ?? EMPTY_ARRAY;\n    const newArchivedThreads = adapter.archivedThreads ?? EMPTY_ARRAY;\n\n    const previousThreadId = previousAdapter.threadId ?? DEFAULT_THREAD_ID;\n    const previousThreads = previousAdapter.threads ?? EMPTY_ARRAY;\n    const previousArchivedThreads =\n      previousAdapter.archivedThreads ?? EMPTY_ARRAY;\n\n    if (\n      previousThreadId === newThreadId &&\n      previousThreads === newThreads &&\n      previousArchivedThreads === newArchivedThreads\n    ) {\n      return;\n    }\n\n    if (previousThreads !== newThreads) {\n      this._threads =\n        this.adapter.threads?.map((t) => t.threadId) ?? EMPTY_ARRAY;\n    }\n\n    if (previousArchivedThreads !== newArchivedThreads) {\n      this._archivedThreads =\n        this.adapter.archivedThreads?.map((t) => t.threadId) ?? EMPTY_ARRAY;\n    }\n\n    if (previousThreadId !== newThreadId) {\n      this._mainThreadId = newThreadId;\n      this._mainThread = this.threadFactory();\n    }\n\n    this._notifySubscribers();\n  }\n\n  public async switchToThread(threadId: string): Promise<void> {\n    if (this._mainThreadId === threadId) return;\n    const onSwitchToThread = this.adapter.onSwitchToThread;\n    if (!onSwitchToThread)\n      throw new Error(\n        \"External store adapter does not support switching to thread\",\n      );\n    onSwitchToThread(threadId);\n  }\n\n  public async switchToNewThread(): Promise<void> {\n    const onSwitchToNewThread = this.adapter.onSwitchToNewThread;\n    if (!onSwitchToNewThread)\n      throw new Error(\n        \"External store adapter does not support switching to new thread\",\n      );\n\n    onSwitchToNewThread();\n  }\n\n  public async rename(threadId: string, newTitle: string): Promise<void> {\n    const onRename = this.adapter.onRename;\n    if (!onRename)\n      throw new Error(\"External store adapter does not support renaming\");\n\n    onRename(threadId, newTitle);\n  }\n\n  public async archive(threadId: string): Promise<void> {\n    const onArchive = this.adapter.onArchive;\n    if (!onArchive)\n      throw new Error(\"External store adapter does not support archiving\");\n\n    onArchive(threadId);\n  }\n\n  public async unarchive(threadId: string): Promise<void> {\n    const onUnarchive = this.adapter.onUnarchive;\n    if (!onUnarchive)\n      throw new Error(\"External store adapter does not support unarchiving\");\n\n    onUnarchive(threadId);\n  }\n\n  public async delete(threadId: string): Promise<void> {\n    const onDelete = this.adapter.onDelete;\n    if (!onDelete)\n      throw new Error(\"External store adapter does not support deleting\");\n\n    onDelete(threadId);\n  }\n\n  private _subscriptions = new Set<() => void>();\n\n  public subscribe(callback: () => void): Unsubscribe {\n    this._subscriptions.add(callback);\n    return () => this._subscriptions.delete(callback);\n  }\n\n  private _notifySubscribers() {\n    for (const callback of this._subscriptions) callback();\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3453, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3459, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/runtimes/composer/DefaultEditComposerRuntimeCore.tsx"],"sourcesContent":["import { AppendMessage, ThreadMessage } from \"../../types\";\nimport { getThreadMessageText } from \"../../utils/getThreadMessageText\";\nimport { AttachmentAdapter } from \"../attachment\";\nimport { ThreadRuntimeCore } from \"../core/ThreadRuntimeCore\";\nimport { BaseComposerRuntimeCore } from \"./BaseComposerRuntimeCore\";\n\nexport class DefaultEditComposerRuntimeCore extends BaseComposerRuntimeCore {\n  public get canCancel() {\n    return true;\n  }\n\n  protected getAttachmentAdapter() {\n    return this.runtime.adapters?.attachments;\n  }\n\n  private _nonTextParts;\n  private _previousText;\n  private _parentId;\n  constructor(\n    private runtime: Omit<ThreadRuntimeCore, \"composer\"> & {\n      adapters?: { attachments?: AttachmentAdapter | undefined } | undefined;\n    },\n    private endEditCallback: () => void,\n    { parentId, message }: { parentId: string | null; message: ThreadMessage },\n  ) {\n    super();\n    this._parentId = parentId;\n    this._previousText = getThreadMessageText(message);\n    this.setText(this._previousText);\n\n    this.setRole(message.role);\n    this.setAttachments(message.attachments ?? []);\n\n    this._nonTextParts = message.content.filter(\n      (part) => part.type !== \"text\" && part.type !== \"ui\",\n    );\n  }\n\n  public async handleSend(message: Omit<AppendMessage, \"parentId\">) {\n    const text = getThreadMessageText(message as AppendMessage);\n    if (text !== this._previousText) {\n      this.runtime.append({\n        ...(message as AppendMessage),\n        content: [...message.content, ...this._nonTextParts] as any,\n        parentId: this._parentId,\n      });\n    }\n\n    this.handleCancel();\n  }\n\n  public handleCancel() {\n    this.endEditCallback();\n    this._notifySubscribers();\n  }\n}\n"],"names":[],"mappings":";;;;AACA,SAAS,4BAA4B;AAGrC,SAAS,+BAA+B;;;AAEjC,IAAM,iCAAN,qNAA6C,0BAAA,CAAwB;IAY1E,YACU,OAAA,EAGA,eAAA,EACR,EAAE,QAAA,EAAU,OAAA,CAAQ,CAAA,CACpB;QACA,KAAA,CAAM;QANE,IAAA,CAAA,OAAA,GAAA;QAGA,IAAA,CAAA,eAAA,GAAA;QAIR,IAAA,CAAK,SAAA,GAAY;QACjB,IAAA,CAAK,aAAA,4LAAgB,uBAAA,EAAqB,OAAO;QACjD,IAAA,CAAK,OAAA,CAAQ,IAAA,CAAK,aAAa;QAE/B,IAAA,CAAK,OAAA,CAAQ,QAAQ,IAAI;QACzB,IAAA,CAAK,cAAA,CAAe,QAAQ,WAAA,IAAe,CAAC,CAAC;QAE7C,IAAA,CAAK,aAAA,GAAgB,QAAQ,OAAA,CAAQ,MAAA,CACnC,CAAC,OAAS,KAAK,IAAA,KAAS,UAAU,KAAK,IAAA,KAAS;IAEpD;IA7BA,IAAW,YAAY;QACrB,OAAO;IACT;IAEU,uBAAuB;QAC/B,OAAO,IAAA,CAAK,OAAA,CAAQ,QAAA,EAAU;IAChC;IAEQ,cAAA;IACA,cAAA;IACA,UAAA;IAqBR,MAAa,WAAW,OAAA,EAA0C;QAChE,MAAM,gMAAO,uBAAA,EAAqB,OAAwB;QAC1D,IAAI,SAAS,IAAA,CAAK,aAAA,EAAe;YAC/B,IAAA,CAAK,OAAA,CAAQ,MAAA,CAAO;gBAClB,GAAI,OAAA;gBACJ,SAAS,CAAC;uBAAG,QAAQ,OAAA,EAAS;uBAAG,IAAA,CAAK,aAAa;iBAAA;gBACnD,UAAU,IAAA,CAAK,SAAA;YACjB,CAAC;QACH;QAEA,IAAA,CAAK,YAAA,CAAa;IACpB;IAEO,eAAe;QACpB,IAAA,CAAK,eAAA,CAAgB;QACrB,IAAA,CAAK,kBAAA,CAAmB;IAC1B;AACF","ignoreList":[0]}},
    {"offset": {"line": 3509, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3515, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/runtimes/core/BaseThreadRuntimeCore.tsx"],"sourcesContent":["import type {\n  ModelConfigProvider,\n  AppendMessage,\n  Unsubscribe,\n} from \"../../types\";\nimport {\n  ExportedMessageRepository,\n  MessageRepository,\n} from \"../utils/MessageRepository\";\nimport { DefaultThreadComposerRuntimeCore } from \"../composer/DefaultThreadComposerRuntimeCore\";\nimport {\n  AddToolResultOptions,\n  ThreadSuggestion,\n  SubmitFeedbackOptions,\n  ThreadRuntimeCore,\n  SpeechState,\n  RuntimeCapabilities,\n  SubmittedFeedback,\n  ThreadRuntimeEventType,\n  StartRunConfig,\n} from \"../core/ThreadRuntimeCore\";\nimport { DefaultEditComposerRuntimeCore } from \"../composer/DefaultEditComposerRuntimeCore\";\nimport { SpeechSynthesisAdapter } from \"../speech/SpeechAdapterTypes\";\nimport { FeedbackAdapter } from \"../feedback/FeedbackAdapter\";\nimport { AttachmentAdapter } from \"../attachment\";\nimport { getThreadMessageText } from \"../../utils/getThreadMessageText\";\n\ntype BaseThreadAdapters = {\n  speech?: SpeechSynthesisAdapter | undefined;\n  feedback?: FeedbackAdapter | undefined;\n  attachments?: AttachmentAdapter | undefined;\n};\n\nexport abstract class BaseThreadRuntimeCore implements ThreadRuntimeCore {\n  private _subscriptions = new Set<() => void>();\n  private _isInitialized = false;\n\n  protected readonly repository = new MessageRepository();\n  public abstract get adapters(): BaseThreadAdapters | undefined;\n  public abstract get isDisabled(): boolean;\n  public abstract get suggestions(): readonly ThreadSuggestion[];\n  public abstract get extras(): unknown;\n\n  public abstract get capabilities(): RuntimeCapabilities;\n  public abstract append(message: AppendMessage): void;\n  public abstract startRun(config: StartRunConfig): void;\n  public abstract addToolResult(options: AddToolResultOptions): void;\n  public abstract cancelRun(): void;\n\n  public get messages() {\n    return this.repository.getMessages();\n  }\n\n  public readonly composer = new DefaultThreadComposerRuntimeCore(this);\n\n  constructor(private readonly _configProvider: ModelConfigProvider) {}\n\n  public getModelConfig() {\n    return this._configProvider.getModelConfig();\n  }\n\n  private _editComposers = new Map<string, DefaultEditComposerRuntimeCore>();\n  public getEditComposer(messageId: string) {\n    return this._editComposers.get(messageId);\n  }\n  public beginEdit(messageId: string) {\n    if (this._editComposers.has(messageId))\n      throw new Error(\"Edit already in progress\");\n\n    this._editComposers.set(\n      messageId,\n      new DefaultEditComposerRuntimeCore(\n        this,\n        () => this._editComposers.delete(messageId),\n        this.repository.getMessage(messageId),\n      ),\n    );\n    this._notifySubscribers();\n  }\n\n  public getMessageById(messageId: string) {\n    return this.repository.getMessage(messageId);\n  }\n\n  public getBranches(messageId: string): string[] {\n    return this.repository.getBranches(messageId);\n  }\n\n  public switchToBranch(branchId: string): void {\n    this.repository.switchToBranch(branchId);\n    this._notifySubscribers();\n  }\n\n  protected _notifySubscribers() {\n    for (const callback of this._subscriptions) callback();\n  }\n\n  public _notifyEventSubscribers(event: ThreadRuntimeEventType) {\n    const subscribers = this._eventSubscribers.get(event);\n    if (!subscribers) return;\n\n    for (const callback of subscribers) callback();\n  }\n\n  public subscribe(callback: () => void): Unsubscribe {\n    this._subscriptions.add(callback);\n    return () => this._subscriptions.delete(callback);\n  }\n\n  private _submittedFeedback: Record<string, SubmittedFeedback> = {};\n\n  public getSubmittedFeedback(messageId: string) {\n    return this._submittedFeedback[messageId];\n  }\n\n  public submitFeedback({ messageId, type }: SubmitFeedbackOptions) {\n    const adapter = this.adapters?.feedback;\n    if (!adapter) throw new Error(\"Feedback adapter not configured\");\n\n    const { message } = this.repository.getMessage(messageId);\n    adapter.submit({ message, type });\n\n    this._submittedFeedback[messageId] = { type };\n    this._notifySubscribers();\n  }\n\n  private _stopSpeaking: Unsubscribe | undefined;\n  public speech: SpeechState | undefined;\n\n  public speak(messageId: string) {\n    const adapter = this.adapters?.speech;\n    if (!adapter) throw new Error(\"Speech adapter not configured\");\n\n    const { message } = this.repository.getMessage(messageId);\n\n    this._stopSpeaking?.();\n\n    const utterance = adapter.speak(getThreadMessageText(message));\n    const unsub = utterance.subscribe(() => {\n      if (utterance.status.type === \"ended\") {\n        this._stopSpeaking = undefined;\n        this.speech = undefined;\n      } else {\n        this.speech = { messageId, status: utterance.status };\n      }\n      this._notifySubscribers();\n    });\n\n    this.speech = { messageId, status: utterance.status };\n    this._notifySubscribers();\n\n    this._stopSpeaking = () => {\n      utterance.cancel();\n      unsub();\n      this.speech = undefined;\n      this._stopSpeaking = undefined;\n    };\n  }\n\n  public stopSpeaking() {\n    if (!this._stopSpeaking) throw new Error(\"No message is being spoken\");\n    this._stopSpeaking();\n    this._notifySubscribers();\n  }\n\n  protected ensureInitialized() {\n    if (!this._isInitialized) {\n      this._isInitialized = true;\n      this._notifyEventSubscribers(\"initialize\");\n    }\n  }\n\n  public export() {\n    return this.repository.export();\n  }\n\n  public import(data: ExportedMessageRepository) {\n    this.ensureInitialized();\n\n    this.repository.import(data);\n    this._notifySubscribers();\n  }\n\n  private _eventSubscribers = new Map<\n    ThreadRuntimeEventType,\n    Set<() => void>\n  >();\n\n  public unstable_on(event: ThreadRuntimeEventType, callback: () => void) {\n    if (event === \"model-config-update\") {\n      return this._configProvider.subscribe?.(callback) ?? (() => {});\n    }\n\n    const subscribers = this._eventSubscribers.get(event);\n    if (!subscribers) {\n      this._eventSubscribers.set(event, new Set([callback]));\n    } else {\n      subscribers.add(callback);\n    }\n\n    return () => {\n      const subscribers = this._eventSubscribers.get(event)!;\n      subscribers.delete(callback);\n    };\n  }\n}\n"],"names":["subscribers"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3661, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3667, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/runtimes/external-store/ExternalStoreThreadRuntimeCore.tsx"],"sourcesContent":["import {\n  AddToolResultOptions,\n  StartRunConfig,\n  ThreadSuggestion,\n} from \"../core/ThreadRuntimeCore\";\n\nimport { AppendMessage, ModelConfigProvider, ThreadMessage } from \"../../types\";\nimport { ExternalStoreAdapter } from \"./ExternalStoreAdapter\";\nimport {\n  getExternalStoreMessage,\n  symbolInnerMessage,\n} from \"./getExternalStoreMessage\";\nimport { ThreadMessageConverter } from \"./ThreadMessageConverter\";\nimport { getAutoStatus, isAutoStatus } from \"./auto-status\";\nimport { fromThreadMessageLike } from \"./ThreadMessageLike\";\nimport { getThreadMessageText } from \"../../utils/getThreadMessageText\";\nimport {\n  RuntimeCapabilities,\n  ThreadRuntimeCore,\n} from \"../core/ThreadRuntimeCore\";\nimport { BaseThreadRuntimeCore } from \"../core/BaseThreadRuntimeCore\";\n\nconst EMPTY_ARRAY = Object.freeze([]);\n\nexport const hasUpcomingMessage = (\n  isRunning: boolean,\n  messages: ThreadMessage[],\n) => {\n  return isRunning && messages[messages.length - 1]?.role !== \"assistant\";\n};\n\nexport class ExternalStoreThreadRuntimeCore\n  extends BaseThreadRuntimeCore\n  implements ThreadRuntimeCore\n{\n  private assistantOptimisticId: string | null = null;\n\n  private _capabilities: RuntimeCapabilities = {\n    switchToBranch: false,\n    edit: false,\n    reload: false,\n    cancel: false,\n    unstable_copy: false,\n    speech: false,\n    attachments: false,\n    feedback: false,\n  };\n\n  public get capabilities() {\n    return this._capabilities;\n  }\n\n  private _messages!: ThreadMessage[];\n  public isDisabled!: boolean;\n\n  public override get messages() {\n    return this._messages;\n  }\n\n  public get adapters() {\n    return this._store.adapters;\n  }\n\n  public suggestions: readonly ThreadSuggestion[] = [];\n  public extras: unknown = undefined;\n\n  private _converter = new ThreadMessageConverter();\n\n  private _store!: ExternalStoreAdapter<any>;\n\n  public override beginEdit(messageId: string) {\n    if (!this._store.onEdit)\n      throw new Error(\"Runtime does not support editing.\");\n\n    super.beginEdit(messageId);\n  }\n\n  constructor(\n    configProvider: ModelConfigProvider,\n    store: ExternalStoreAdapter<any>,\n  ) {\n    super(configProvider);\n    this.__internal_setAdapter(store);\n  }\n\n  public __internal_setAdapter(store: ExternalStoreAdapter<any>) {\n    if (this._store === store) return;\n\n    const isRunning = store.isRunning ?? false;\n    this.isDisabled = store.isDisabled ?? false;\n\n    const oldStore = this._store as ExternalStoreAdapter<any> | undefined;\n    this._store = store;\n    this.extras = store.extras;\n    this.suggestions = store.suggestions ?? EMPTY_ARRAY;\n    this._capabilities = {\n      switchToBranch: this._store.setMessages !== undefined,\n      edit: this._store.onEdit !== undefined,\n      reload: this._store.onReload !== undefined,\n      cancel: this._store.onCancel !== undefined,\n      speech: this._store.adapters?.speech !== undefined,\n      unstable_copy: this._store.unstable_capabilities?.copy !== false, // default true\n      attachments: !!this._store.adapters?.attachments,\n      feedback: !!this._store.adapters?.feedback,\n    };\n\n    if (oldStore) {\n      // flush the converter cache when the convertMessage prop changes\n      if (oldStore.convertMessage !== store.convertMessage) {\n        this._converter = new ThreadMessageConverter();\n      } else if (\n        oldStore.isRunning === store.isRunning &&\n        oldStore.messages === store.messages\n      ) {\n        this._notifySubscribers();\n        // no conversion update\n        return;\n      }\n    }\n\n    const messages = !store.convertMessage\n      ? store.messages\n      : this._converter.convertMessages(store.messages, (cache, m, idx) => {\n          if (!store.convertMessage) return m;\n\n          const isLast = idx === store.messages.length - 1;\n          const autoStatus = getAutoStatus(isLast, isRunning);\n\n          if (\n            cache &&\n            (cache.role !== \"assistant\" ||\n              !isAutoStatus(cache.status) ||\n              cache.status === autoStatus)\n          )\n            return cache;\n\n          const messageLike = store.convertMessage(m, idx);\n          const newMessage = fromThreadMessageLike(\n            messageLike,\n            idx.toString(),\n            autoStatus,\n          );\n          (newMessage as any)[symbolInnerMessage] = m;\n          return newMessage;\n        });\n\n    if (messages.length > 0) this.ensureInitialized();\n\n    for (let i = 0; i < messages.length; i++) {\n      const message = messages[i]!;\n      const parent = messages[i - 1];\n      this.repository.addOrUpdateMessage(parent?.id ?? null, message);\n    }\n\n    if (this.assistantOptimisticId) {\n      this.repository.deleteMessage(this.assistantOptimisticId);\n      this.assistantOptimisticId = null;\n    }\n\n    if (hasUpcomingMessage(isRunning, messages)) {\n      this.assistantOptimisticId = this.repository.appendOptimisticMessage(\n        messages.at(-1)?.id ?? null,\n        {\n          role: \"assistant\",\n          content: [],\n        },\n      );\n    }\n\n    this.repository.resetHead(\n      this.assistantOptimisticId ?? messages.at(-1)?.id ?? null,\n    );\n\n    this._messages = this.repository.getMessages();\n    this._notifySubscribers();\n  }\n\n  public override switchToBranch(branchId: string): void {\n    if (!this._store.setMessages)\n      throw new Error(\"Runtime does not support switching branches.\");\n\n    this.repository.switchToBranch(branchId);\n    this.updateMessages(this.repository.getMessages());\n  }\n\n  public async append(message: AppendMessage): Promise<void> {\n    if (message.parentId !== (this.messages.at(-1)?.id ?? null)) {\n      if (!this._store.onEdit)\n        throw new Error(\"Runtime does not support editing messages.\");\n      await this._store.onEdit(message);\n    } else {\n      await this._store.onNew(message);\n    }\n  }\n\n  public async startRun(config: StartRunConfig): Promise<void> {\n    if (!this._store.onReload)\n      throw new Error(\"Runtime does not support reloading messages.\");\n\n    await this._store.onReload(config.parentId, config);\n  }\n\n  public cancelRun(): void {\n    if (!this._store.onCancel)\n      throw new Error(\"Runtime does not support cancelling runs.\");\n\n    this._store.onCancel();\n\n    if (this.assistantOptimisticId) {\n      this.repository.deleteMessage(this.assistantOptimisticId);\n      this.assistantOptimisticId = null;\n    }\n\n    let messages = this.repository.getMessages();\n    const previousMessage = messages[messages.length - 1];\n    if (\n      previousMessage?.role === \"user\" &&\n      previousMessage.id === messages.at(-1)?.id // ensure the previous message is a leaf node\n    ) {\n      this.repository.deleteMessage(previousMessage.id);\n      if (!this.composer.text.trim()) {\n        this.composer.setText(getThreadMessageText(previousMessage));\n      }\n\n      messages = this.repository.getMessages();\n    } else {\n      this._notifySubscribers();\n    }\n\n    // resync messages (for reloading, to restore the previous branch)\n    setTimeout(() => {\n      this.updateMessages(messages);\n    }, 0);\n  }\n\n  public addToolResult(options: AddToolResultOptions) {\n    if (!this._store.onAddToolResult)\n      throw new Error(\"Runtime does not support tool results.\");\n    this._store.onAddToolResult(options);\n  }\n\n  private updateMessages = (messages: ThreadMessage[]) => {\n    const hasConverter = this._store.convertMessage !== undefined;\n    if (hasConverter) {\n      this._store.setMessages?.(\n        messages.flatMap(getExternalStoreMessage).filter((m) => m != null),\n      );\n    } else {\n      this._store.setMessages?.(messages);\n    }\n  };\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3834, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3840, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/runtimes/external-store/ExternalStoreRuntimeCore.tsx"],"sourcesContent":["import { BaseAssistantRuntimeCore } from \"../../internal\";\nimport { ExternalStoreThreadListRuntimeCore } from \"./ExternalStoreThreadListRuntimeCore\";\nimport { ExternalStoreAdapter } from \"./ExternalStoreAdapter\";\nimport { ExternalStoreThreadRuntimeCore } from \"./ExternalStoreThreadRuntimeCore\";\n\nconst getThreadListAdapter = (store: ExternalStoreAdapter<any>) => {\n  return {\n    ...store.adapters?.threadList,\n  };\n};\n\nexport class ExternalStoreRuntimeCore extends BaseAssistantRuntimeCore {\n  public readonly threadList;\n\n  constructor(adapter: ExternalStoreAdapter<any>) {\n    super();\n    this.threadList = new ExternalStoreThreadListRuntimeCore(\n      getThreadListAdapter(adapter),\n      () =>\n        new ExternalStoreThreadRuntimeCore(this._proxyConfigProvider, adapter),\n    );\n  }\n\n  public setAdapter(adapter: ExternalStoreAdapter<any>) {\n    // Update the thread list adapter and propagate store changes to the main thread\n    this.threadList.__internal_setAdapter(getThreadListAdapter(adapter));\n    this.threadList.getMainThreadRuntimeCore().__internal_setAdapter(adapter);\n  }\n}\n"],"names":[],"mappings":";;;;AACA,SAAS,0CAA0C;AAEnD,SAAS,sCAAsC;AAH/C,SAAS,gCAAgC;;;;AAKzC,IAAM,uBAAuB,CAAC,UAAqC;IACjE,OAAO;QACL,GAAG,MAAM,QAAA,EAAU,UAAA;IACrB;AACF;AAEO,IAAM,2BAAN,cAAuC,+NAAA,CAAyB;IACrD,WAAA;IAEhB,YAAY,OAAA,CAAoC;QAC9C,KAAA,CAAM;QACN,IAAA,CAAK,UAAA,GAAa,+NAAI,qCAAA,CACpB,qBAAqB,OAAO,GAC5B,IACE,2NAAI,iCAAA,CAA+B,IAAA,CAAK,oBAAA,EAAsB,OAAO;IAE3E;IAEO,WAAW,OAAA,EAAoC;QAEpD,IAAA,CAAK,UAAA,CAAW,qBAAA,CAAsB,qBAAqB,OAAO,CAAC;QACnE,IAAA,CAAK,UAAA,CAAW,wBAAA,CAAyB,EAAE,qBAAA,CAAsB,OAAO;IAC1E;AACF","ignoreList":[0]}},
    {"offset": {"line": 3868, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3874, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/runtimes/external-store/useExternalStoreRuntime.tsx"],"sourcesContent":["import { useEffect, useMemo, useState } from \"react\";\nimport { ExternalStoreRuntimeCore } from \"./ExternalStoreRuntimeCore\";\nimport { ExternalStoreAdapter } from \"./ExternalStoreAdapter\";\nimport { AssistantRuntimeImpl } from \"../../api/AssistantRuntime\";\nimport { ThreadRuntimeImpl } from \"../../api/ThreadRuntime\";\n\nexport const useExternalStoreRuntime = <T,>(store: ExternalStoreAdapter<T>) => {\n  const [runtime] = useState(() => new ExternalStoreRuntimeCore(store));\n\n  useEffect(() => {\n    runtime.setAdapter(store);\n  });\n\n  return useMemo(\n    () => AssistantRuntimeImpl.create(runtime, ThreadRuntimeImpl),\n    [runtime],\n  );\n};\n"],"names":[],"mappings":";;;;AAAA,SAAS,WAAW,SAAS,gBAAgB;AAC7C,SAAS,gCAAgC;AAEzC,SAAS,4BAA4B;AACrC,SAAS,yBAAyB;;;;;AAE3B,IAAM,0BAA0B,CAAK,UAAmC;IAC7E,MAAM,CAAC,OAAO,CAAA,IAAI,oNAAA,EAAS,IAAM,qNAAI,2BAAA,CAAyB,KAAK,CAAC;IAEpE,CAAA,GAAA,qMAAA,CAAA,YAAA,EAAU,MAAM;QACd,QAAQ,UAAA,CAAW,KAAK;IAC1B,CAAC;IAED,iNAAO,UAAA,EACL,mLAAM,uBAAA,CAAqB,MAAA,CAAO,qLAAS,oBAAiB,GAC5D;QAAC,OAAO;KAAA;AAEZ","ignoreList":[0]}},
    {"offset": {"line": 3897, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3903, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/composer/index.ts"],"sourcesContent":["export { ComposerPrimitiveRoot as Root } from \"./ComposerRoot\";\nexport { ComposerPrimitiveInput as Input } from \"./ComposerInput\";\nexport { ComposerPrimitiveSend as Send } from \"./ComposerSend\";\nexport { ComposerPrimitiveCancel as Cancel } from \"./ComposerCancel\";\nexport { ComposerPrimitiveAddAttachment as AddAttachment } from \"./ComposerAddAttachment\";\nexport { ComposerPrimitiveAttachments as Attachments } from \"./ComposerAttachments\";\nexport { ComposerPrimitiveIf as If } from \"./ComposerIf\";\n"],"names":[],"mappings":"","ignoreList":[0]}},
    {"offset": {"line": 3914, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3928, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/utils/createActionButton.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ElementRef,\n  forwardRef,\n  ComponentPropsWithoutRef,\n  MouseEventHandler,\n} from \"react\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\n\ntype ActionButtonCallback<TProps> = (\n  props: TProps,\n) => MouseEventHandler<HTMLButtonElement> | null;\n\ntype PrimitiveButtonProps = ComponentPropsWithoutRef<typeof Primitive.button>;\n\nexport type ActionButtonProps<THook> = PrimitiveButtonProps &\n  (THook extends (props: infer TProps) => unknown ? TProps : never);\n\nexport type ActionButtonElement = ElementRef<typeof Primitive.button>;\n\nexport const createActionButton = <TProps,>(\n  displayName: string,\n  useActionButton: ActionButtonCallback<TProps>,\n  forwardProps: (keyof NonNullable<TProps>)[] = [],\n) => {\n  const ActionButton = forwardRef<\n    ActionButtonElement,\n    PrimitiveButtonProps & TProps\n  >((props, forwardedRef) => {\n    const forwardedProps = {} as TProps;\n    const primitiveProps = {} as PrimitiveButtonProps;\n\n    (Object.keys(props) as Array<keyof typeof props>).forEach((key) => {\n      if (forwardProps.includes(key as keyof TProps)) {\n        (forwardedProps as any)[key] = props[key];\n      } else {\n        (primitiveProps as any)[key] = props[key];\n      }\n    });\n\n    const callback = useActionButton(forwardedProps as TProps) ?? undefined;\n    return (\n      <Primitive.button\n        type=\"button\"\n        {...primitiveProps}\n        ref={forwardedRef}\n        disabled={primitiveProps.disabled || !callback}\n        onClick={composeEventHandlers(primitiveProps.onClick, callback)}\n      />\n    );\n  });\n\n  ActionButton.displayName = displayName;\n\n  return ActionButton;\n};\n"],"names":[],"mappings":";;;;AAEA;AA0CM;AApCN,SAAS,iBAAiB;AAC1B,SAAS,4BAA4B;;;;;;AAa9B,IAAM,qBAAqB,CAChC,aACA,iBACA,eAA8C,CAAC,CAAA,KAC5C;IACH,MAAM,yNAAe,aAAA,EAGnB,CAAC,OAAO,iBAAiB;QACzB,MAAM,iBAAiB,CAAC;QACxB,MAAM,iBAAiB,CAAC;QAEvB,OAAO,IAAA,CAAK,KAAK,EAAgC,OAAA,CAAQ,CAAC,QAAQ;YACjE,IAAI,aAAa,QAAA,CAAS,GAAmB,GAAG;gBAC7C,cAAA,CAAuB,GAAG,CAAA,GAAI,KAAA,CAAM,GAAG,CAAA;YAC1C,OAAO;gBACJ,cAAA,CAAuB,GAAG,CAAA,GAAI,KAAA,CAAM,GAAG,CAAA;YAC1C;QACF,CAAC;QAED,MAAM,WAAW,gBAAgB,cAAwB,KAAK,KAAA;QAC9D,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,wKAAC,YAAA,CAAU,MAAA,EAAV;YACC,MAAK;YACJ,GAAG,cAAA;YACJ,KAAK;YACL,UAAU,eAAe,QAAA,IAAY,CAAC;YACtC,0KAAS,uBAAA,EAAqB,eAAe,OAAA,EAAS,QAAQ;QAAA;IAGpE,CAAC;IAED,aAAa,WAAA,GAAc;IAE3B,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 3966, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3972, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/context/react/ComposerContext.ts"],"sourcesContent":["import { useMemo } from \"react\";\nimport { useMessageContext, useMessageRuntime } from \"./MessageContext\";\nimport { useThreadContext, useThreadRuntime } from \"./ThreadContext\";\nimport { ReadonlyStore } from \"../ReadonlyStore\";\nimport { createContextStoreHook } from \"./utils/createContextStoreHook\";\nimport { ComposerRuntime, ComposerState } from \"../../api/ComposerRuntime\";\nimport { UseBoundStore } from \"zustand\";\n\nexport type ComposerContextValue = {\n  useComposer: UseBoundStore<ReadonlyStore<ComposerState>>;\n  type: \"edit\" | \"new\";\n};\n\nexport const useComposerContext = (): ComposerContextValue => {\n  const { useComposer: useThreadComposer } = useThreadContext();\n  const { useEditComposer } = useMessageContext({ optional: true }) ?? {};\n  return useMemo(\n    () => ({\n      useComposer: useEditComposer ?? useThreadComposer,\n      type: useEditComposer ? (\"edit\" as const) : (\"new\" as const),\n    }),\n    [useEditComposer, useThreadComposer],\n  );\n};\n\nexport const { useComposer } = createContextStoreHook(\n  useComposerContext,\n  \"useComposer\",\n);\n\nexport function useComposerRuntime(options?: {\n  optional?: false | undefined;\n}): ComposerRuntime;\nexport function useComposerRuntime(options?: {\n  optional?: boolean | undefined;\n}): ComposerRuntime | null;\nexport function useComposerRuntime(options?: {\n  optional?: boolean | undefined;\n}): ComposerRuntime | null {\n  const messageRuntime = useMessageRuntime({ optional: true });\n  const threadRuntime = useThreadRuntime(options);\n  return messageRuntime\n    ? messageRuntime.composer\n    : (threadRuntime?.composer ?? null);\n}\n"],"names":[],"mappings":";;;;;;AAAA,SAAS,eAAe;AAExB,SAAS,kBAAkB,wBAAwB;AADnD,SAAS,mBAAmB,yBAAyB;AAGrD,SAAS,8BAA8B;;;;;AAShC,IAAM,qBAAqB,MAA4B;IAC5D,MAAM,EAAE,aAAa,iBAAA,CAAkB,CAAA,gMAAI,mBAAA,CAAiB;IAC5D,MAAM,EAAE,eAAA,CAAgB,CAAA,IAAI,iNAAA,EAAkB;QAAE,UAAU;IAAK,CAAC,KAAK,CAAC;IACtE,iNAAO,UAAA,EACL,IAAA,CAAO;YACL,aAAa,mBAAmB;YAChC,MAAM,kBAAmB,SAAoB;QAC/C,CAAA,GACA;QAAC;QAAiB,iBAAiB;KAAA;AAEvC;AAEO,IAAM,EAAE,WAAA,CAAY,CAAA,kNAAI,yBAAA,EAC7B,oBACA;AASK,SAAS,mBAAmB,OAAA,EAER;IACzB,MAAM,iBAAiB,kNAAA,EAAkB;QAAE,UAAU;IAAK,CAAC;IAC3D,MAAM,6MAAgB,mBAAA,EAAiB,OAAO;IAC9C,OAAO,iBACH,eAAe,QAAA,GACd,eAAe,YAAY;AAClC","ignoreList":[0]}},
    {"offset": {"line": 4009, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4015, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/composer/useComposerAddAttachment.tsx"],"sourcesContent":["import { useCallback } from \"react\";\nimport { useComposer, useComposerRuntime } from \"../../context\";\n\nexport const useComposerAddAttachment = () => {\n  const disabled = useComposer((c) => !c.isEditing);\n\n  const composerRuntime = useComposerRuntime();\n  const callback = useCallback(() => {\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n\n    const attachmentAccept = composerRuntime.getAttachmentAccept();\n    if (attachmentAccept !== \"*\") {\n      input.accept = attachmentAccept;\n    }\n\n    input.onchange = (e) => {\n      const file = (e.target as HTMLInputElement).files?.[0];\n      if (!file) return;\n      composerRuntime.addAttachment(file);\n    };\n\n    input.click();\n  }, [composerRuntime]);\n\n  if (disabled) return null;\n  return callback;\n};\n"],"names":[],"mappings":";;;;AAAA,SAAS,mBAAmB;AAC5B,SAAS,aAAa,0BAA0B;;;AAEzC,IAAM,2BAA2B,MAAM;IAC5C,MAAM,0MAAW,cAAA,EAAY,CAAC,IAAM,CAAC,EAAE,SAAS;IAEhD,MAAM,iNAAkB,qBAAA,CAAmB;IAC3C,MAAM,qNAAW,cAAA,EAAY,MAAM;QACjC,MAAM,QAAQ,SAAS,aAAA,CAAc,OAAO;QAC5C,MAAM,IAAA,GAAO;QAEb,MAAM,mBAAmB,gBAAgB,mBAAA,CAAoB;QAC7D,IAAI,qBAAqB,KAAK;YAC5B,MAAM,MAAA,GAAS;QACjB;QAEA,MAAM,QAAA,GAAW,CAAC,MAAM;YACtB,MAAM,OAAQ,EAAE,MAAA,CAA4B,KAAA,EAAA,CAAQ,CAAC,CAAA;YACrD,IAAI,CAAC,KAAM,CAAA;YACX,gBAAgB,aAAA,CAAc,IAAI;QACpC;QAEA,MAAM,KAAA,CAAM;IACd,GAAG;QAAC,eAAe;KAAC;IAEpB,IAAI,SAAU,CAAA,OAAO;IACrB,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 4047, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4053, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/composer/ComposerAddAttachment.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useComposerAddAttachment } from \"../../primitive-hooks/composer/useComposerAddAttachment\";\n\nexport namespace ComposerPrimitiveAddAttachment {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useComposerAddAttachment>;\n}\n\nexport const ComposerPrimitiveAddAttachment = createActionButton(\n  \"ComposerPrimitive.AddAttachment\",\n  useComposerAddAttachment,\n);\n"],"names":[],"mappings":";;;;AAEA;AAKA,SAAS,gCAAgC;;;;AAOlC,IAAM,wNAAiC,qBAAA,EAC5C,qPACA,2BAAA","ignoreList":[0]}},
    {"offset": {"line": 4065, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4071, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/context/react/AttachmentContext.ts"],"sourcesContent":["\"use client\";\n\nimport { createContext, useContext } from \"react\";\nimport { ReadonlyStore } from \"../ReadonlyStore\";\nimport { createContextStoreHook } from \"./utils/createContextStoreHook\";\nimport {\n  AttachmentRuntime,\n  AttachmentState,\n} from \"../../api/AttachmentRuntime\";\nimport { UseBoundStore } from \"zustand\";\n\nexport type AttachmentContextValue = {\n  source: \"thread-composer\" | \"edit-composer\" | \"message\";\n  useAttachment: UseBoundStore<ReadonlyStore<AttachmentState>>;\n  useAttachmentRuntime: UseBoundStore<ReadonlyStore<AttachmentRuntime>>;\n};\n\ntype ThreadComposerAttachmentContextValue = {\n  source: \"thread-composer\";\n  useAttachment: UseBoundStore<\n    ReadonlyStore<AttachmentState & { source: \"thread-composer\" }>\n  >;\n  useAttachmentRuntime: UseBoundStore<\n    ReadonlyStore<AttachmentRuntime & { type: \"thread-composer\" }>\n  >;\n};\ntype EditComposerAttachmentContextValue = {\n  source: \"edit-composer\";\n  useAttachment: UseBoundStore<\n    ReadonlyStore<AttachmentState & { source: \"edit-composer\" }>\n  >;\n  useAttachmentRuntime: UseBoundStore<\n    ReadonlyStore<AttachmentRuntime & { type: \"edit-composer\" }>\n  >;\n};\n\ntype MessageAttachmentContextValue = {\n  source: \"message\";\n  useAttachment: UseBoundStore<\n    ReadonlyStore<AttachmentState & { source: \"message\" }>\n  >;\n  useAttachmentRuntime: UseBoundStore<\n    ReadonlyStore<AttachmentRuntime & { type: \"message\" }>\n  >;\n};\n\nexport const AttachmentContext = createContext<AttachmentContextValue | null>(\n  null,\n);\n\nexport function useAttachmentContext(options?: {\n  optional?: false | undefined;\n}): AttachmentContextValue;\nexport function useAttachmentContext(options?: {\n  optional?: boolean | undefined;\n}): AttachmentContextValue | null;\nexport function useAttachmentContext(options?: {\n  optional?: boolean | undefined;\n}) {\n  const context = useContext(AttachmentContext);\n  if (!options?.optional && !context)\n    throw new Error(\n      \"This component must be used within a ComposerPrimitive.Attachments or MessagePrimitive.Attachments component.\",\n    );\n\n  return context;\n}\n\nfunction useThreadComposerAttachmentContext(options?: {\n  optional?: false | undefined;\n}): ThreadComposerAttachmentContextValue;\nfunction useThreadComposerAttachmentContext(options?: {\n  optional?: boolean | undefined;\n}): ThreadComposerAttachmentContextValue | null;\nfunction useThreadComposerAttachmentContext(options?: {\n  optional?: boolean | undefined;\n}): ThreadComposerAttachmentContextValue | null {\n  const context = useAttachmentContext(options);\n  if (!context) return null;\n  if (context.source !== \"thread-composer\")\n    throw new Error(\n      \"This component must be used within a thread's ComposerPrimitive.Attachments component.\",\n    );\n  return context as ThreadComposerAttachmentContextValue;\n}\n\nfunction useEditComposerAttachmentContext(options?: {\n  optional?: false | undefined;\n}): EditComposerAttachmentContextValue;\nfunction useEditComposerAttachmentContext(options?: {\n  optional?: boolean | undefined;\n}): EditComposerAttachmentContextValue | null;\nfunction useEditComposerAttachmentContext(options?: {\n  optional?: boolean | undefined;\n}): EditComposerAttachmentContextValue | null {\n  const context = useAttachmentContext(options);\n  if (!context) return null;\n  if (context.source !== \"edit-composer\")\n    throw new Error(\n      \"This component must be used within a messages's ComposerPrimitive.Attachments component.\",\n    );\n  return context as EditComposerAttachmentContextValue;\n}\n\nfunction useMessageAttachmentContext(options?: {\n  optional?: false | undefined;\n}): MessageAttachmentContextValue;\nfunction useMessageAttachmentContext(options?: {\n  optional?: boolean | undefined;\n}): MessageAttachmentContextValue | null;\nfunction useMessageAttachmentContext(options?: {\n  optional?: boolean | undefined;\n}): MessageAttachmentContextValue | null {\n  const context = useAttachmentContext(options);\n  if (!context) return null;\n  if (context.source !== \"message\")\n    throw new Error(\n      \"This component must be used within a MessagePrimitive.Attachments component.\",\n    );\n  return context as MessageAttachmentContextValue;\n}\n\nexport function useAttachmentRuntime(options?: {\n  optional?: false | undefined;\n}): AttachmentRuntime;\nexport function useAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime | null;\nexport function useAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime | null {\n  const attachmentRuntime = useAttachmentContext(options);\n  if (!attachmentRuntime) return null;\n  return attachmentRuntime.useAttachmentRuntime();\n}\n\nexport function useThreadComposerAttachmentRuntime(options?: {\n  optional?: false | undefined;\n}): AttachmentRuntime;\nexport function useThreadComposerAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime | null;\nexport function useThreadComposerAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime | null {\n  const attachmentRuntime = useThreadComposerAttachmentContext(options);\n  if (!attachmentRuntime) return null;\n  return attachmentRuntime.useAttachmentRuntime();\n}\n\nexport function useEditComposerAttachmentRuntime(options?: {\n  optional?: false | undefined;\n}): AttachmentRuntime;\nexport function useEditComposerAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime | null;\nexport function useEditComposerAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime | null {\n  const attachmentRuntime = useEditComposerAttachmentContext(options);\n  if (!attachmentRuntime) return null;\n  return attachmentRuntime.useAttachmentRuntime();\n}\n\nexport function useMessageAttachmentRuntime(options?: {\n  optional?: false | undefined;\n}): AttachmentRuntime;\nexport function useMessageAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime | null;\nexport function useMessageAttachmentRuntime(options?: {\n  optional?: boolean | undefined;\n}): AttachmentRuntime | null {\n  const attachmentRuntime = useMessageAttachmentContext(options);\n  if (!attachmentRuntime) return null;\n  return attachmentRuntime.useAttachmentRuntime();\n}\n\nexport const { useAttachment } = createContextStoreHook(\n  useAttachmentContext,\n  \"useAttachment\",\n);\n\nexport const { useAttachment: useThreadComposerAttachment } =\n  createContextStoreHook(useThreadComposerAttachmentContext, \"useAttachment\");\n\nexport const { useAttachment: useEditComposerAttachment } =\n  createContextStoreHook(useEditComposerAttachmentContext, \"useAttachment\");\n\nexport const { useAttachment: useMessageAttachment } = createContextStoreHook(\n  useMessageAttachmentContext,\n  \"useAttachment\",\n);\n"],"names":[],"mappings":";;;;;;;;;;;;;AAEA,SAAS,eAAe,kBAAkB;AAE1C,SAAS,8BAA8B;;;;AA0ChC,IAAM,8NAAoB,gBAAA,EAC/B;AASK,SAAS,qBAAqB,OAAA,EAElC;IACD,MAAM,mNAAU,cAAA,EAAW,iBAAiB;IAC5C,IAAI,CAAC,SAAS,YAAY,CAAC,SACzB,MAAM,IAAI,MACR;IAGJ,OAAO;AACT;AAQA,SAAS,mCAAmC,OAAA,EAEI;IAC9C,MAAM,UAAU,qBAAqB,OAAO;IAC5C,IAAI,CAAC,QAAS,CAAA,OAAO;IACrB,IAAI,QAAQ,MAAA,KAAW,mBACrB,MAAM,IAAI,MACR;IAEJ,OAAO;AACT;AAQA,SAAS,iCAAiC,OAAA,EAEI;IAC5C,MAAM,UAAU,qBAAqB,OAAO;IAC5C,IAAI,CAAC,QAAS,CAAA,OAAO;IACrB,IAAI,QAAQ,MAAA,KAAW,iBACrB,MAAM,IAAI,MACR;IAEJ,OAAO;AACT;AAQA,SAAS,4BAA4B,OAAA,EAEI;IACvC,MAAM,UAAU,qBAAqB,OAAO;IAC5C,IAAI,CAAC,QAAS,CAAA,OAAO;IACrB,IAAI,QAAQ,MAAA,KAAW,WACrB,MAAM,IAAI,MACR;IAEJ,OAAO;AACT;AAQO,SAAS,qBAAqB,OAAA,EAER;IAC3B,MAAM,oBAAoB,qBAAqB,OAAO;IACtD,IAAI,CAAC,kBAAmB,CAAA,OAAO;IAC/B,OAAO,kBAAkB,oBAAA,CAAqB;AAChD;AAQO,SAAS,mCAAmC,OAAA,EAEtB;IAC3B,MAAM,oBAAoB,mCAAmC,OAAO;IACpE,IAAI,CAAC,kBAAmB,CAAA,OAAO;IAC/B,OAAO,kBAAkB,oBAAA,CAAqB;AAChD;AAQO,SAAS,iCAAiC,OAAA,EAEpB;IAC3B,MAAM,oBAAoB,iCAAiC,OAAO;IAClE,IAAI,CAAC,kBAAmB,CAAA,OAAO;IAC/B,OAAO,kBAAkB,oBAAA,CAAqB;AAChD;AAQO,SAAS,4BAA4B,OAAA,EAEf;IAC3B,MAAM,oBAAoB,4BAA4B,OAAO;IAC7D,IAAI,CAAC,kBAAmB,CAAA,OAAO;IAC/B,OAAO,kBAAkB,oBAAA,CAAqB;AAChD;AAEO,IAAM,EAAE,aAAA,CAAc,CAAA,IAAI,uOAAA,EAC/B,sBACA;AAGK,IAAM,EAAE,eAAe,2BAAA,CAA4B,CAAA,kNACxD,yBAAA,EAAuB,oCAAoC,eAAe;AAErE,IAAM,EAAE,eAAe,yBAAA,CAA0B,CAAA,kNACtD,yBAAA,EAAuB,kCAAkC,eAAe;AAEnE,IAAM,EAAE,eAAe,oBAAA,CAAqB,CAAA,kNAAI,yBAAA,EACrD,6BACA","ignoreList":[0]}},
    {"offset": {"line": 4139, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4145, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/context/providers/AttachmentRuntimeProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  type FC,\n  type PropsWithChildren,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\";\nimport { create } from \"zustand\";\nimport { AttachmentContext } from \"../react/AttachmentContext\";\nimport { writableStore } from \"../ReadonlyStore\";\nimport { AttachmentRuntime } from \"../../api/AttachmentRuntime\";\n\nexport namespace AttachmentRuntimeProvider {\n  export type Props = PropsWithChildren<{\n    runtime: AttachmentRuntime;\n  }>;\n}\n\nconst useAttachmentRuntimeStore = (runtime: AttachmentRuntime) => {\n  const [store] = useState(() => create(() => runtime));\n\n  useEffect(() => {\n    writableStore(store).setState(runtime, true);\n  }, [runtime, store]);\n\n  return store;\n};\nconst useAttachmentStore = (runtime: AttachmentRuntime) => {\n  const [store] = useState(() => create(() => runtime.getState()));\n  useEffect(() => {\n    const updateState = () =>\n      writableStore(store).setState(runtime.getState(), true);\n    updateState();\n    return runtime.subscribe(updateState);\n  }, [runtime, store]);\n\n  return store;\n};\n\nexport const AttachmentRuntimeProvider: FC<AttachmentRuntimeProvider.Props> = ({\n  runtime,\n  children,\n}) => {\n  const useAttachmentRuntime = useAttachmentRuntimeStore(runtime);\n  const useAttachment = useAttachmentStore(runtime);\n  const source = useAttachment((s) => s.source);\n  const context = useMemo(() => {\n    return {\n      source,\n      useAttachmentRuntime,\n      useAttachment,\n    };\n  }, [useAttachmentRuntime, useAttachment]);\n\n  return (\n    <AttachmentContext.Provider value={context}>\n      {children}\n    </AttachmentContext.Provider>\n  );\n};\n"],"names":[],"mappings":";;;;AAEA;AAuDI;AAhDJ,SAAS,cAAc;AAEvB,SAAS,qBAAqB;AAD9B,SAAS,yBAAyB;;;;;;;AAUlC,IAAM,4BAA4B,CAAC,YAA+B;IAChE,MAAM,CAAC,KAAK,CAAA,6MAAI,WAAA,EAAS,iJAAM,SAAA,EAAO,IAAM,OAAO,CAAC;IAEpD,CAAA,GAAA,qMAAA,CAAA,YAAA,EAAU,MAAM;QACd,CAAA,GAAA,+KAAA,CAAA,gBAAA,EAAc,KAAK,EAAE,QAAA,CAAS,SAAS,IAAI;IAC7C,GAAG;QAAC;QAAS,KAAK;KAAC;IAEnB,OAAO;AACT;AACA,IAAM,qBAAqB,CAAC,YAA+B;IACzD,MAAM,CAAC,KAAK,CAAA,6MAAI,WAAA,EAAS,iJAAM,SAAA,EAAO,IAAM,QAAQ,QAAA,CAAS,CAAC,CAAC;IAC/D,CAAA,GAAA,qMAAA,CAAA,YAAA,EAAU,MAAM;QACd,MAAM,cAAc,wLAClB,gBAAA,EAAc,KAAK,EAAE,QAAA,CAAS,QAAQ,QAAA,CAAS,GAAG,IAAI;QACxD,YAAY;QACZ,OAAO,QAAQ,SAAA,CAAU,WAAW;IACtC,GAAG;QAAC;QAAS,KAAK;KAAC;IAEnB,OAAO;AACT;AAEO,IAAM,4BAAiE,CAAC,EAC7E,OAAA,EACA,QAAA,EACF,KAAM;IACJ,MAAM,uBAAuB,0BAA0B,OAAO;IAC9D,MAAM,gBAAgB,mBAAmB,OAAO;IAChD,MAAM,SAAS,cAAc,CAAC,IAAM,EAAE,MAAM;IAC5C,MAAM,WAAU,mNAAA,EAAQ,MAAM;QAC5B,OAAO;YACL;YACA;YACA;QACF;IACF,GAAG;QAAC;QAAsB,aAAa;KAAC;IAExC,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,+LAAC,oBAAA,CAAkB,QAAA,EAAlB;QAA2B,OAAO;QAChC;IAAA,CACH;AAEJ","ignoreList":[0]}},
    {"offset": {"line": 4203, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4209, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/composer/ComposerAttachments.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentType, type FC, memo, useMemo } from \"react\";\nimport { Attachment } from \"../../types\";\nimport { useComposer, useComposerRuntime } from \"../../context\";\nimport { useThreadComposerAttachment } from \"../../context/react/AttachmentContext\";\nimport { AttachmentRuntimeProvider } from \"../../context/providers/AttachmentRuntimeProvider\";\n\nexport namespace ComposerPrimitiveAttachments {\n  export type Props = {\n    components:\n      | {\n          Image?: ComponentType | undefined;\n          Document?: ComponentType | undefined;\n          File?: ComponentType | undefined;\n          Attachment?: ComponentType | undefined;\n        }\n      | undefined;\n  };\n}\n\nconst getComponent = (\n  components: ComposerPrimitiveAttachments.Props[\"components\"],\n  attachment: Attachment,\n) => {\n  const type = attachment.type;\n  switch (type) {\n    case \"image\":\n      return components?.Image ?? components?.Attachment;\n    case \"document\":\n      return components?.Document ?? components?.Attachment;\n    case \"file\":\n      return components?.File ?? components?.Attachment;\n    default:\n      const _exhaustiveCheck: never = type;\n      throw new Error(`Unknown attachment type: ${_exhaustiveCheck}`);\n  }\n};\n\nconst AttachmentComponent: FC<{\n  components: ComposerPrimitiveAttachments.Props[\"components\"];\n}> = ({ components }) => {\n  const Component = useThreadComposerAttachment((a) =>\n    getComponent(components, a),\n  );\n\n  if (!Component) return null;\n  return <Component />;\n};\n\nconst ComposerAttachmentImpl: FC<\n  ComposerPrimitiveAttachments.Props & { attachmentIndex: number }\n> = ({ components, attachmentIndex }) => {\n  const composerRuntime = useComposerRuntime();\n  const runtime = useMemo(\n    () => composerRuntime.getAttachmentByIndex(attachmentIndex),\n    [composerRuntime, attachmentIndex],\n  );\n\n  return (\n    <AttachmentRuntimeProvider runtime={runtime}>\n      <AttachmentComponent components={components} />\n    </AttachmentRuntimeProvider>\n  );\n};\n\nconst ComposerAttachment = memo(\n  ComposerAttachmentImpl,\n  (prev, next) =>\n    prev.attachmentIndex === next.attachmentIndex &&\n    prev.components?.Image === next.components?.Image &&\n    prev.components?.Document === next.components?.Document &&\n    prev.components?.File === next.components?.File &&\n    prev.components?.Attachment === next.components?.Attachment,\n);\n\nexport const ComposerPrimitiveAttachments: FC<\n  ComposerPrimitiveAttachments.Props\n> = ({ components }) => {\n  const attachmentsCount = useComposer((s) => s.attachments.length);\n\n  return Array.from({ length: attachmentsCount }, (_, index) => (\n    <ComposerAttachment\n      key={index}\n      attachmentIndex={index}\n      components={components}\n    />\n  ));\n};\n\nComposerPrimitiveAttachments.displayName = \"ComposerPrimitive.Attachments\";\n"],"names":[],"mappings":";;;;AAEA,SAAiC,MAAM,eAAe;AA6C7C;AA1CT,SAAS,mCAAmC;AAD5C,SAAS,aAAa,0BAA0B;AAEhD,SAAS,iCAAiC;;;;;;;AAe1C,IAAM,eAAe,CACnB,YACA,eACG;IACH,MAAM,OAAO,WAAW,IAAA;IACxB,OAAQ,MAAM;QACZ,KAAK;YACH,OAAO,YAAY,SAAS,YAAY;QAC1C,KAAK;YACH,OAAO,YAAY,YAAY,YAAY;QAC7C,KAAK;YACH,OAAO,YAAY,QAAQ,YAAY;QACzC;YACE,MAAM,mBAA0B;YAChC,MAAM,IAAI,MAAM,CAAA,yBAAA,EAA4B,gBAAgB,EAAE;IAClE;AACF;AAEA,IAAM,sBAED,CAAC,EAAE,UAAA,CAAW,CAAA,KAAM;IACvB,MAAM,gBAAY,2NAAA,EAA4B,CAAC,IAC7C,aAAa,YAAY,CAAC;IAG5B,IAAI,CAAC,UAAW,CAAA,OAAO;IACvB,OAAO,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,WAAA,CAAA,CAAU;AACpB;AAEA,IAAM,yBAEF,CAAC,EAAE,UAAA,EAAY,eAAA,CAAgB,CAAA,KAAM;IACvC,MAAM,iNAAkB,qBAAA,CAAmB;IAC3C,MAAM,WAAU,mNAAA,EACd,IAAM,gBAAgB,oBAAA,CAAqB,eAAe,GAC1D;QAAC;QAAiB,eAAe;KAAA;IAGnC,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,2MAAC,4BAAA,EAAA;QAA0B;QACzB,UAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,qBAAA;YAAoB;QAAA,CAAwB;IAAA,CAC/C;AAEJ;AAEA,IAAM,qBAAqB,iNAAA,EACzB,wBACA,CAAC,MAAM,OACL,KAAK,eAAA,KAAoB,KAAK,eAAA,IAC9B,KAAK,UAAA,EAAY,UAAU,KAAK,UAAA,EAAY,SAC5C,KAAK,UAAA,EAAY,aAAa,KAAK,UAAA,EAAY,YAC/C,KAAK,UAAA,EAAY,SAAS,KAAK,UAAA,EAAY,QAC3C,KAAK,UAAA,EAAY,eAAe,KAAK,UAAA,EAAY;AAG9C,IAAM,+BAET,CAAC,EAAE,UAAA,CAAW,CAAA,KAAM;IACtB,MAAM,kNAAmB,cAAA,EAAY,CAAC,IAAM,EAAE,WAAA,CAAY,MAAM;IAEhE,OAAO,MAAM,IAAA,CAAK;QAAE,QAAQ;IAAiB,GAAG,CAAC,GAAG,QAClD,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,oBAAA;YAEC,iBAAiB;YACjB;QAAA,GAFK;AAKX;AAEA,6BAA6B,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 4269, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4275, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/composer/useComposerCancel.tsx"],"sourcesContent":["import { useCallback } from \"react\";\nimport { useComposer, useComposerRuntime } from \"../../context\";\n\nexport const useComposerCancel = () => {\n  const composerRuntime = useComposerRuntime();\n  const disabled = useComposer((c) => !c.canCancel);\n\n  const callback = useCallback(() => {\n    composerRuntime.cancel();\n  }, [composerRuntime]);\n\n  if (disabled) return null;\n  return callback;\n};\n"],"names":[],"mappings":";;;;AAAA,SAAS,mBAAmB;AAC5B,SAAS,aAAa,0BAA0B;;;AAEzC,IAAM,oBAAoB,MAAM;IACrC,MAAM,iNAAkB,qBAAA,CAAmB;IAC3C,MAAM,0MAAW,cAAA,EAAY,CAAC,IAAM,CAAC,EAAE,SAAS;IAEhD,MAAM,qNAAW,cAAA,EAAY,MAAM;QACjC,gBAAgB,MAAA,CAAO;IACzB,GAAG;QAAC,eAAe;KAAC;IAEpB,IAAI,SAAU,CAAA,OAAO;IACrB,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 4296, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4302, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/composer/ComposerCancel.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useComposerCancel } from \"../../primitive-hooks/composer/useComposerCancel\";\n\nexport namespace ComposerPrimitiveCancel {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useComposerCancel>;\n}\n\nexport const ComposerPrimitiveCancel = createActionButton(\n  \"ComposerPrimitive.Cancel\",\n  useComposerCancel,\n);\n"],"names":[],"mappings":";;;;AAEA;AAKA,SAAS,yBAAyB;;;;AAO3B,IAAM,iNAA0B,qBAAA,EACrC,uOACA,oBAAA","ignoreList":[0]}},
    {"offset": {"line": 4314, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4320, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/composer/useComposerIf.tsx"],"sourcesContent":["\"use client\";\n\nimport { useComposer } from \"../../context/react/ComposerContext\";\nimport type { RequireAtLeastOne } from \"../../utils/RequireAtLeastOne\";\n\ntype ComposerIfFilters = {\n  editing: boolean | undefined;\n};\n\nexport type UseComposerIfProps = RequireAtLeastOne<ComposerIfFilters>;\n\nexport const useComposerIf = (props: UseComposerIfProps) => {\n  return useComposer((composer) => {\n    if (props.editing === true && !composer.isEditing) return false;\n    if (props.editing === false && composer.isEditing) return false;\n\n    return true;\n  });\n};\n"],"names":[],"mappings":";;;;AAEA,SAAS,mBAAmB;;;AASrB,IAAM,gBAAgB,CAAC,UAA8B;IAC1D,sMAAO,cAAA,EAAY,CAAC,aAAa;QAC/B,IAAI,MAAM,OAAA,KAAY,QAAQ,CAAC,SAAS,SAAA,CAAW,CAAA,OAAO;QAC1D,IAAI,MAAM,OAAA,KAAY,SAAS,SAAS,SAAA,CAAW,CAAA,OAAO;QAE1D,OAAO;IACT,CAAC;AACH","ignoreList":[0]}},
    {"offset": {"line": 4336, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4342, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/composer/ComposerIf.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC, PropsWithChildren } from \"react\";\nimport {\n  UseComposerIfProps,\n  useComposerIf,\n} from \"../../primitive-hooks/composer/useComposerIf\";\n\nexport namespace ComposerPrimitiveIf {\n  export type Props = PropsWithChildren<UseComposerIfProps>;\n}\n\nexport const ComposerPrimitiveIf: FC<ComposerPrimitiveIf.Props> = ({\n  children,\n  ...query\n}) => {\n  const result = useComposerIf(query);\n  return result ? children : null;\n};\n\nComposerPrimitiveIf.displayName = \"ComposerPrimitive.If\";\n"],"names":[],"mappings":";;;;AAGA;;;AASO,IAAM,sBAAqD,CAAC,EACjE,QAAA,EACA,GAAG,OACL,KAAM;IACJ,MAAM,oNAAS,gBAAA,EAAc,KAAK;IAClC,OAAO,SAAS,WAAW;AAC7B;AAEA,oBAAoB,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 4356, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4362, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/utils/hooks/useOnScrollToBottom.tsx"],"sourcesContent":["import { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useEffect } from \"react\";\nimport { useThreadViewport } from \"../../context/react/ThreadContext\";\n\nexport const useOnScrollToBottom = (callback: () => void) => {\n  const callbackRef = useCallbackRef(callback);\n  const onScrollToBottom = useThreadViewport((vp) => vp.onScrollToBottom);\n\n  useEffect(() => {\n    return onScrollToBottom(callbackRef);\n  }, [onScrollToBottom, callbackRef]);\n};\n"],"names":[],"mappings":";;;;AACA,SAAS,iBAAiB;AAD1B,SAAS,sBAAsB;AAE/B,SAAS,yBAAyB;;;;AAE3B,IAAM,sBAAsB,CAAC,aAAyB;IAC3D,MAAM,qMAAc,iBAAA,EAAe,QAAQ;IAC3C,MAAM,gNAAmB,oBAAA,EAAkB,CAAC,KAAO,GAAG,gBAAgB;IAEtE,CAAA,GAAA,qMAAA,CAAA,YAAA,EAAU,MAAM;QACd,OAAO,iBAAiB,WAAW;IACrC,GAAG;QAAC;QAAkB,WAAW;KAAC;AACpC","ignoreList":[0]}},
    {"offset": {"line": 4384, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4390, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/composer/ComposerInput.tsx"],"sourcesContent":["\"use client\";\n\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport {\n  type KeyboardEvent,\n  forwardRef,\n  useCallback,\n  useEffect,\n  useRef,\n} from \"react\";\nimport TextareaAutosize, {\n  type TextareaAutosizeProps,\n} from \"react-textarea-autosize\";\nimport {\n  useComposer,\n  useComposerRuntime,\n} from \"../../context/react/ComposerContext\";\nimport { useThread, useThreadRuntime } from \"../../context/react/ThreadContext\";\nimport { useEscapeKeydown } from \"@radix-ui/react-use-escape-keydown\";\nimport { useOnScrollToBottom } from \"../../utils/hooks/useOnScrollToBottom\";\nimport { useThreadListItemRuntime } from \"../../context/react/ThreadListItemContext\";\n\nexport namespace ComposerPrimitiveInput {\n  export type Element = HTMLTextAreaElement;\n  export type Props = TextareaAutosizeProps & {\n    asChild?: boolean | undefined;\n    submitOnEnter?: boolean | undefined;\n    cancelOnEscape?: boolean | undefined;\n    unstable_focusOnRunStart?: boolean | undefined;\n    unstable_focusOnScrollToBottom?: boolean | undefined;\n    unstable_focusOnThreadSwitched?: boolean | undefined;\n  };\n}\n\nexport const ComposerPrimitiveInput = forwardRef<\n  ComposerPrimitiveInput.Element,\n  ComposerPrimitiveInput.Props\n>(\n  (\n    {\n      autoFocus = false,\n      asChild,\n      disabled: disabledProp,\n      onChange,\n      onKeyDown,\n      submitOnEnter = true,\n      cancelOnEscape = true,\n      unstable_focusOnRunStart = true,\n      unstable_focusOnScrollToBottom = true,\n      unstable_focusOnThreadSwitched = true,\n      ...rest\n    },\n    forwardedRef,\n  ) => {\n    const threadListItemRuntime = useThreadListItemRuntime();\n    const threadRuntime = useThreadRuntime();\n    const composerRuntime = useComposerRuntime();\n\n    const value = useComposer((c) => {\n      if (!c.isEditing) return \"\";\n      return c.text;\n    });\n\n    const Component = asChild ? Slot : TextareaAutosize;\n\n    const isDisabled = useThread((t) => t.isDisabled) ?? disabledProp ?? false;\n    const textareaRef = useRef<HTMLTextAreaElement>(null);\n    const ref = useComposedRefs(forwardedRef, textareaRef);\n\n    useEscapeKeydown((e) => {\n      if (!cancelOnEscape) return;\n\n      if (composerRuntime.getState().canCancel) {\n        composerRuntime.cancel();\n        e.preventDefault();\n      }\n    });\n\n    const handleKeyPress = (e: KeyboardEvent) => {\n      if (isDisabled || !submitOnEnter) return;\n\n      // ignore IME composition events\n      if (e.nativeEvent.isComposing) return;\n\n      if (e.key === \"Enter\" && e.shiftKey === false) {\n        const { isRunning } = threadRuntime.getState();\n\n        if (!isRunning) {\n          e.preventDefault();\n\n          textareaRef.current?.closest(\"form\")?.requestSubmit();\n        }\n      }\n    };\n\n    const autoFocusEnabled = autoFocus && !isDisabled;\n    const focus = useCallback(() => {\n      const textarea = textareaRef.current;\n      if (!textarea || !autoFocusEnabled) return;\n\n      textarea.focus({ preventScroll: true });\n      textarea.setSelectionRange(\n        textarea.value.length,\n        textarea.value.length,\n      );\n    }, [autoFocusEnabled]);\n\n    useEffect(() => focus(), [focus]);\n\n    useOnScrollToBottom(() => {\n      if (composerRuntime.type === \"thread\" && unstable_focusOnScrollToBottom) {\n        focus();\n      }\n    });\n\n    useEffect(() => {\n      if (composerRuntime.type !== \"thread\" || !unstable_focusOnRunStart)\n        return undefined;\n\n      return threadRuntime.unstable_on(\"run-start\", focus);\n    }, [unstable_focusOnRunStart]);\n\n    useEffect(() => {\n      if (composerRuntime.type !== \"thread\" || !unstable_focusOnThreadSwitched)\n        return undefined;\n\n      return threadListItemRuntime.unstable_on(\"switched-to\", focus);\n    }, [unstable_focusOnThreadSwitched]);\n\n    return (\n      <Component\n        name=\"input\"\n        value={value}\n        {...rest}\n        ref={ref}\n        disabled={isDisabled}\n        onChange={composeEventHandlers(onChange, (e) => {\n          if (!composerRuntime.getState().isEditing) return;\n          return composerRuntime.setText(e.target.value);\n        })}\n        onKeyDown={composeEventHandlers(onKeyDown, handleKeyPress)}\n      />\n    );\n  },\n);\n\nComposerPrimitiveInput.displayName = \"ComposerPrimitive.Input\";\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 4494, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4500, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/utils/combined/createCombinedStore.ts"],"sourcesContent":["\"use client\";\n\nimport { useSyncExternalStore } from \"react\";\nimport type { Unsubscribe } from \"../../types/Unsubscribe\";\n\nexport type StoreOrRuntime<T> = {\n  getState: () => T;\n  subscribe: (callback: () => void) => Unsubscribe;\n};\n\nexport type CombinedSelector<T extends Array<unknown>, R> = (...args: T) => R;\n\nexport const createCombinedStore = <T extends Array<unknown>, R>(stores: {\n  [K in keyof T]: StoreOrRuntime<T[K]>;\n}) => {\n  const subscribe = (callback: () => void): Unsubscribe => {\n    const unsubscribes = stores.map((store) => store.subscribe(callback));\n    return () => {\n      for (const unsub of unsubscribes) {\n        unsub();\n      }\n    };\n  };\n\n  return (selector: CombinedSelector<T, R>): R => {\n    const getSnapshot = (): R =>\n      selector(...(stores.map((store) => store.getState()) as T));\n\n    return useSyncExternalStore(subscribe, getSnapshot, getSnapshot);\n  };\n};\n"],"names":[],"mappings":";;;;AAEA,SAAS,4BAA4B;;;AAU9B,IAAM,sBAAsB,CAA8B,WAE3D;IACJ,MAAM,YAAY,CAAC,aAAsC;QACvD,MAAM,eAAe,OAAO,GAAA,CAAI,CAAC,QAAU,MAAM,SAAA,CAAU,QAAQ,CAAC;QACpE,OAAO,MAAM;YACX,KAAA,MAAW,SAAS,aAAc;gBAChC,MAAM;YACR;QACF;IACF;IAEA,OAAO,CAAC,aAAwC;QAC9C,MAAM,cAAc,IAClB,SAAS,GAAI,OAAO,GAAA,CAAI,CAAC,QAAU,MAAM,QAAA,CAAS,CAAC,CAAO;QAE5D,iNAAO,uBAAA,EAAqB,WAAW,aAAa,WAAW;IACjE;AACF","ignoreList":[0]}},
    {"offset": {"line": 4523, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4529, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/utils/combined/useCombinedStore.ts"],"sourcesContent":["import { useMemo } from \"react\";\nimport {\n  type CombinedSelector,\n  createCombinedStore,\n  StoreOrRuntime,\n} from \"./createCombinedStore\";\n\nexport const useCombinedStore = <T extends Array<unknown>, R>(\n  stores: { [K in keyof T]: StoreOrRuntime<T[K]> },\n  selector: CombinedSelector<T, R>,\n): R => {\n  // eslint-disable-next-line react-hooks/exhaustive-deps -- shallow-compare the store array\n  const useCombined = useMemo(() => createCombinedStore<T, R>(stores), stores);\n  return useCombined(selector);\n};\n"],"names":[],"mappings":";;;;AAAA,SAAS,eAAe;AACxB;;;AAMO,IAAM,mBAAmB,CAC9B,QACA,aACM;IAEN,MAAM,wNAAc,UAAA,EAAQ,wMAAM,sBAAA,EAA0B,MAAM,GAAG,MAAM;IAC3E,OAAO,YAAY,QAAQ;AAC7B","ignoreList":[0]}},
    {"offset": {"line": 4543, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4549, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/composer/useComposerSend.tsx"],"sourcesContent":["import { useCallback } from \"react\";\nimport { useCombinedStore } from \"../../utils/combined/useCombinedStore\";\nimport { useThreadRuntime } from \"../../context/react/ThreadContext\";\nimport { useComposerRuntime } from \"../../context\";\n\nexport const useComposerSend = () => {\n  const composerRuntime = useComposerRuntime();\n  const threadRuntime = useThreadRuntime();\n\n  const disabled = useCombinedStore(\n    [threadRuntime, composerRuntime],\n    (t, c) => t.isRunning || !c.isEditing || c.isEmpty,\n  );\n\n  const callback = useCallback(() => {\n    if (!composerRuntime.getState().isEditing) return;\n\n    composerRuntime.send();\n  }, [threadRuntime]);\n\n  if (disabled) return null;\n  return callback;\n};\n"],"names":[],"mappings":";;;;AAAA,SAAS,mBAAmB;AAG5B,SAAS,0BAA0B;AADnC,SAAS,wBAAwB;AADjC,SAAS,wBAAwB;;;;;AAI1B,IAAM,kBAAkB,MAAM;IACnC,MAAM,iNAAkB,qBAAA,CAAmB;IAC3C,MAAM,gBAAgB,gNAAA,CAAiB;IAEvC,MAAM,4MAAW,mBAAA,EACf;QAAC;QAAe,eAAe;KAAA,EAC/B,CAAC,GAAG,IAAM,EAAE,SAAA,IAAa,CAAC,EAAE,SAAA,IAAa,EAAE,OAAA;IAG7C,MAAM,qNAAW,cAAA,EAAY,MAAM;QACjC,IAAI,CAAC,gBAAgB,QAAA,CAAS,EAAE,SAAA,CAAW,CAAA;QAE3C,gBAAgB,IAAA,CAAK;IACvB,GAAG;QAAC,aAAa;KAAC;IAElB,IAAI,SAAU,CAAA,OAAO;IACrB,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 4579, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4585, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/composer/ComposerRoot.tsx"],"sourcesContent":["\"use client\";\n\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport {\n  type ElementRef,\n  type FormEvent,\n  forwardRef,\n  ComponentPropsWithoutRef,\n} from \"react\";\nimport { useComposerSend } from \"../../primitive-hooks/composer/useComposerSend\";\n\nexport namespace ComposerPrimitiveRoot {\n  export type Element = ElementRef<typeof Primitive.form>;\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.form>;\n}\n\nexport const ComposerPrimitiveRoot = forwardRef<\n  ComposerPrimitiveRoot.Element,\n  ComposerPrimitiveRoot.Props\n>(({ onSubmit, ...rest }, forwardedRef) => {\n  const send = useComposerSend();\n\n  const handleSubmit = (e: FormEvent) => {\n    e.preventDefault();\n\n    if (!send) return;\n    send();\n  };\n\n  return (\n    <Primitive.form\n      {...rest}\n      ref={forwardedRef}\n      onSubmit={composeEventHandlers(onSubmit, handleSubmit)}\n    />\n  );\n});\n\nComposerPrimitiveRoot.displayName = \"ComposerPrimitive.Root\";\n"],"names":[],"mappings":";;;AAIA;AA2BI;AArBJ,SAAS,uBAAuB;AAPhC,SAAS,iBAAiB;;AAD1B,SAAS,4BAA4B;;;;;;;AAe9B,IAAM,kOAAwB,aAAA,EAGnC,CAAC,EAAE,QAAA,EAAU,GAAG,KAAK,CAAA,EAAG,iBAAiB;IACzC,MAAM,oNAAO,kBAAA,CAAgB;IAE7B,MAAM,eAAe,CAAC,MAAiB;QACrC,EAAE,cAAA,CAAe;QAEjB,IAAI,CAAC,KAAM,CAAA;QACX,KAAK;IACP;IAEA,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,wKAAC,YAAA,CAAU,IAAA,EAAV;QACE,GAAG,IAAA;QACJ,KAAK;QACL,2KAAU,uBAAA,EAAqB,UAAU,YAAY;IAAA;AAG3D,CAAC;AAED,sBAAsB,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 4616, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4622, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/composer/ComposerSend.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useComposerSend } from \"../../primitive-hooks/composer/useComposerSend\";\n\nexport namespace ComposerPrimitiveSend {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useComposerSend>;\n}\n\nexport const ComposerPrimitiveSend = createActionButton(\n  \"ComposerPrimitive.Send\",\n  useComposerSend,\n);\n"],"names":[],"mappings":";;;;AAEA;AAKA,SAAS,uBAAuB;;;;AAOzB,IAAM,+MAAwB,qBAAA,EACnC,mOACA,kBAAA","ignoreList":[0]}},
    {"offset": {"line": 4634, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4690, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/attachment/index.ts"],"sourcesContent":["export { AttachmentPrimitiveRoot as Root } from \"./AttachmentRoot\";\nexport { AttachmentPrimitiveThumb as unstable_Thumb } from \"./AttachmentThumb\";\nexport { AttachmentPrimitiveName as Name } from \"./AttachmentName\";\nexport { AttachmentPrimitiveRemove as Remove } from \"./AttachmentRemove\";\n"],"names":[],"mappings":"","ignoreList":[0]}},
    {"offset": {"line": 4698, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4712, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/attachment/AttachmentName.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC } from \"react\";\nimport { useAttachment } from \"../../context/react/AttachmentContext\";\n\nexport namespace AttachmentPrimitiveName {\n  export type Props = Record<string, never>;\n}\n\nexport const AttachmentPrimitiveName: FC<\n  AttachmentPrimitiveName.Props\n> = () => {\n  const name = useAttachment((a) => a.name);\n  return <>{name}</>;\n};\n\nAttachmentPrimitiveName.displayName = \"AttachmentPrimitive.Name\";\n"],"names":[],"mappings":";;;AAaS;;AAVT,SAAS,qBAAqB;;;;AAMvB,IAAM,0BAET,MAAM;IACR,MAAM,wMAAO,gBAAA,EAAc,CAAC,IAAM,EAAE,IAAI;IACxC,OAAO,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAA,uNAAA,CAAA,WAAA,EAAA;QAAG,UAAA;IAAA,CAAK;AACjB;AAEA,wBAAwB,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 4730, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4736, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/attachment/useAttachmentRemove.ts"],"sourcesContent":["import { useCallback } from \"react\";\nimport { useAttachmentRuntime } from \"../../context/react/AttachmentContext\";\n\nexport const useAttachmentRemove = () => {\n  const attachmentRuntime = useAttachmentRuntime();\n\n  const handleRemoveAttachment = useCallback(() => {\n    attachmentRuntime.remove();\n  }, [attachmentRuntime]);\n\n  return handleRemoveAttachment;\n};\n"],"names":[],"mappings":";;;;AAAA,SAAS,mBAAmB;AAC5B,SAAS,4BAA4B;;;AAE9B,IAAM,sBAAsB,MAAM;IACvC,MAAM,qNAAoB,uBAAA,CAAqB;IAE/C,MAAM,mOAAyB,cAAA,EAAY,MAAM;QAC/C,kBAAkB,MAAA,CAAO;IAC3B,GAAG;QAAC,iBAAiB;KAAC;IAEtB,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 4755, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4761, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/attachment/AttachmentRemove.tsx"],"sourcesContent":["\"use client\";\n\nimport { useAttachmentRemove } from \"../../primitive-hooks/attachment/useAttachmentRemove\";\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\n\nexport namespace AttachmentPrimitiveRemove {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useAttachmentRemove>;\n}\n\nexport const AttachmentPrimitiveRemove = createActionButton(\n  \"AttachmentPrimitive.Remove\",\n  useAttachmentRemove,\n);\n"],"names":[],"mappings":";;;AAGA;;AADA,SAAS,2BAA2B;;;;AAY7B,IAAM,mNAA4B,qBAAA,EACvC,6OACA,sBAAA","ignoreList":[0]}},
    {"offset": {"line": 4773, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4779, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/attachment/AttachmentRoot.tsx"],"sourcesContent":["import { Primitive } from \"@radix-ui/react-primitive\";\nimport { ComponentPropsWithoutRef, ElementRef, forwardRef } from \"react\";\n\ntype PrimitiveDivProps = ComponentPropsWithoutRef<typeof Primitive.div>;\n\nexport namespace AttachmentPrimitiveRoot {\n  export type Element = ElementRef<typeof Primitive.div>;\n  export type Props = PrimitiveDivProps;\n}\n\nexport const AttachmentPrimitiveRoot = forwardRef<\n  AttachmentPrimitiveRoot.Element,\n  AttachmentPrimitiveRoot.Props\n>((props, ref) => {\n  return <Primitive.div {...props} ref={ref} />;\n});\n\nAttachmentPrimitiveRoot.displayName = \"AttachmentPrimitive.Root\";\n"],"names":[],"mappings":";;;;AACA,SAA+C,kBAAkB;AAaxD;AAdT,SAAS,iBAAiB;;;;AAUnB,IAAM,oOAA0B,aAAA,EAGrC,CAAC,OAAO,QAAQ;IAChB,OAAO,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,wKAAC,YAAA,CAAU,GAAA,EAAV;QAAe,GAAG,KAAA;QAAO;IAAA,CAAU;AAC7C,CAAC;AAED,wBAAwB,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 4798, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4804, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/attachment/AttachmentThumb.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, forwardRef, type ElementRef } from \"react\";\nimport { useAttachment } from \"../../context/react/AttachmentContext\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\n\ntype PrimitiveDivProps = ComponentPropsWithoutRef<typeof Primitive.div>;\n\nexport namespace AttachmentPrimitiveThumb {\n  export type Element = ElementRef<typeof Primitive.div>;\n  export type Props = PrimitiveDivProps;\n}\n\nexport const AttachmentPrimitiveThumb = forwardRef<\n  AttachmentPrimitiveThumb.Element,\n  AttachmentPrimitiveThumb.Props\n>((props, ref) => {\n  const ext = useAttachment((a) => a.name.split(\".\").pop());\n  return (\n    <Primitive.div {...props} ref={ref}>\n      .{ext}\n    </Primitive.div>\n  );\n});\n\nAttachmentPrimitiveThumb.displayName = \"AttachmentPrimitive.Thumb\";\n"],"names":[],"mappings":";;;;AAEA,SAAmC,kBAAmC;AAiBlE;AAhBJ,SAAS,qBAAqB;AAC9B,SAAS,iBAAiB;;;;;;AASnB,IAAM,qOAA2B,aAAA,EAGtC,CAAC,OAAO,QAAQ;IAChB,MAAM,OAAM,gNAAA,EAAc,CAAC,IAAM,EAAE,IAAA,CAAK,KAAA,CAAM,GAAG,EAAE,GAAA,CAAI,CAAC;IACxD,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,OAAA,wKAAC,YAAA,CAAU,GAAA,EAAV;QAAe,GAAG,KAAA;QAAO;QAAU,UAAA;YAAA;YAChC;SAAA;IAAA,CACJ;AAEJ,CAAC;AAED,yBAAyB,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 4831, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4878, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/ui/base/dialog.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\";\n\nimport classNames from \"classnames\";\n\nconst Dialog = DialogPrimitive.Root;\n\nconst DialogTrigger = DialogPrimitive.Trigger;\n\nconst DialogPortal = DialogPrimitive.Portal;\n\nconst DialogClose = DialogPrimitive.Close;\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={classNames(\"aui-dialog-overlay\", className)}\n    {...props}\n  />\n));\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={classNames(\"aui-dialog-content\", className)}\n      {...props}\n    >\n      {children}\n      {/* <DialogPrimitive.Close className=\"ring-offset-aui-background focus:ring-aui-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none\">\n        <XIcon className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close> */}\n    </DialogPrimitive.Content>\n  </DialogPortal>\n));\nDialogContent.displayName = DialogPrimitive.Content.displayName;\n\n// const DialogHeader = ({\n//   className,\n//   ...props\n// }: React.HTMLAttributes<HTMLDivElement>) => (\n//   <div\n//     className={classNames(\n//       \"flex flex-col space-y-1.5 text-center sm:text-left\",\n//       className,\n//     )}\n//     {...props}\n//   />\n// );\n// DialogHeader.displayName = \"DialogHeader\";\n\n// const DialogFooter = ({\n//   className,\n//   ...props\n// }: React.HTMLAttributes<HTMLDivElement>) => (\n//   <div\n//     className={classNames(\n//       \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n//       className,\n//     )}\n//     {...props}\n//   />\n// );\n// DialogFooter.displayName = \"DialogFooter\";\n\n// const DialogTitle = React.forwardRef<\n//   React.ElementRef<typeof DialogPrimitive.Title>,\n//   React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n// >(({ className, ...props }, ref) => (\n//   <DialogPrimitive.Title\n//     ref={ref}\n//     className={classNames(\n//       \"text-lg font-semibold leading-none tracking-tight\",\n//       className,\n//     )}\n//     {...props}\n//   />\n// ));\n// DialogTitle.displayName = DialogPrimitive.Title.displayName;\n\n// const DialogDescription = React.forwardRef<\n//   React.ElementRef<typeof DialogPrimitive.Description>,\n//   React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n// >(({ className, ...props }, ref) => (\n//   <DialogPrimitive.Description\n//     ref={ref}\n//     className={classNames(\"text-muted-foreground text-sm\", className)}\n//     {...props}\n//   />\n// ));\n// DialogDescription.displayName = DialogPrimitive.Description.displayName;\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogClose,\n  DialogContent,\n  // DialogHeader,\n  // DialogFooter,\n  // DialogTitle,\n  // DialogDescription,\n};\n"],"names":[],"mappings":";;;;;;;;;AAEA,YAAY,WAAW;AAGvB,OAAO,gBAAgB;AAcrB,cAYA,YAZA;AAhBF,YAAY,qBAAqB;;;;;;AAIjC,IAAM,SAAyB,mKAAA,IAAA;AAE/B,IAAM,gBAAgC,mKAAA,OAAA;AAEtC,IAAM,eAA+B,mKAAA,MAAA;AAErC,IAAM,cAA8B,mKAAA,KAAA;AAEpC,IAAM,gBAAsB,sMAAA,UAAA,CAG1B,CAAC,EAAE,SAAA,EAAW,GAAG,MAAM,CAAA,EAAG,MAC1B,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAiB,mKAAA,OAAA,EAAhB;QACC;QACA,mJAAW,UAAA,EAAW,sBAAsB,SAAS;QACpD,GAAG,KAAA;IAAA;AAGR,cAAc,WAAA,GAA8B,mKAAA,OAAA,CAAQ,WAAA;AAEpD,IAAM,gBAAsB,sMAAA,UAAA,CAG1B,CAAC,EAAE,SAAA,EAAW,QAAA,EAAU,GAAG,MAAM,CAAA,EAAG,MACpC,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,OAAA,EAAC,cAAA;QACC,UAAA;YAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,eAAA,CAAA,CAAc;YACf,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAiB,mKAAA,OAAA,EAAhB;gBACC;gBACA,mJAAW,UAAA,EAAW,sBAAsB,SAAS;gBACpD,GAAG,KAAA;gBAEH;YAAA;SAKH;IAAA,CACF,CACD;AACD,cAAc,WAAA,GAA8B,mKAAA,OAAA,CAAQ,WAAA","ignoreList":[0]}},
    {"offset": {"line": 4920, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4926, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/ui/base/avatar.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC } from \"react\";\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\";\n\nimport { withDefaults } from \"../utils/withDefaults\";\n\nexport type AvatarProps = {\n  src?: string | undefined;\n  alt?: string | undefined;\n  fallback?: string | undefined;\n};\n\nexport const Avatar: FC<AvatarProps> = ({ src, alt, fallback }) => {\n  if (src == null && fallback == null) return null;\n\n  return (\n    <AvatarRoot>\n      {src != null && <AvatarImage src={src} alt={alt} />}\n      {fallback != null && <AvatarFallback>{fallback}</AvatarFallback>}\n    </AvatarRoot>\n  );\n};\n\nAvatar.displayName = \"Avatar\";\n\nexport const AvatarRoot = withDefaults(AvatarPrimitive.Root, {\n  className: \"aui-avatar-root\",\n});\n\nAvatarRoot.displayName = \"AvatarRoot\";\n\nexport const AvatarImage = withDefaults(AvatarPrimitive.Image, {\n  className: \"aui-avatar-image\",\n});\n\nAvatarImage.displayName = \"AvatarImage\";\n\nexport const AvatarFallback = withDefaults(AvatarPrimitive.Fallback, {\n  className: \"aui-avatar-fallback\",\n});\n\nAvatarFallback.displayName = \"AvatarFallback\";\n"],"names":[],"mappings":";;;;;;AAiBI,SACkB,KADlB;AAZJ,SAAS,oBAAoB;;AAF7B,YAAY,qBAAqB;;;;;AAU1B,IAAM,SAA0B,CAAC,EAAE,GAAA,EAAK,GAAA,EAAK,QAAA,CAAS,CAAA,KAAM;IACjE,IAAI,OAAO,QAAQ,YAAY,KAAM,CAAA,OAAO;IAE5C,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,OAAA,EAAC,YAAA;QACE,UAAA;YAAA,OAAO,QAAQ,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,aAAA;gBAAY;gBAAU;YAAA,CAAU;YAChD,YAAY,QAAQ,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,gBAAA;gBAAgB,UAAA;YAAA,CAAS;SAAA;IAAA,CACjD;AAEJ;AAEA,OAAO,WAAA,GAAc;AAEd,IAAM,oMAAa,eAAA,EAA6B,mKAAA,IAAA,EAAM;IAC3D,WAAW;AACb,CAAC;AAED,WAAW,WAAA,GAAc;AAElB,IAAM,qMAAc,eAAA,EAA6B,mKAAA,KAAA,EAAO;IAC7D,WAAW;AACb,CAAC;AAED,YAAY,WAAA,GAAc;AAEnB,IAAM,wMAAiB,eAAA,EAA6B,mKAAA,QAAA,EAAU;IACnE,WAAW;AACb,CAAC;AAED,eAAe,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 4969, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4975, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/ui/attachment-ui.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  forwardRef,\n  PropsWithChildren,\n  useEffect,\n  useState,\n  type FC,\n} from \"react\";\nimport { CircleXIcon, FileIcon } from \"lucide-react\";\nimport { withDefaults } from \"./utils/withDefaults\";\nimport { useThreadConfig } from \"./thread-config\";\nimport { TooltipIconButton } from \"./base/tooltip-icon-button\";\nimport { AttachmentPrimitive } from \"../primitives\";\nimport { useAttachment } from \"../context/react/AttachmentContext\";\nimport {\n  AvatarImage,\n  AvatarRoot,\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from \"./base\";\nimport { Dialog, DialogTrigger, DialogContent } from \"./base/dialog\";\nimport { AvatarFallback } from \"@radix-ui/react-avatar\";\nimport { useShallow } from \"zustand/shallow\";\nimport { DialogTitle } from \"@radix-ui/react-dialog\";\n\nconst AttachmentRoot = withDefaults(AttachmentPrimitive.Root, {\n  className: \"aui-attachment-root\",\n});\n\nconst AttachmentContent = withDefaults(\"div\", {\n  className: \"aui-attachment-content\",\n});\n\nAttachmentRoot.displayName = \"AttachmentRoot\";\n\nconst useFileSrc = (file: File | undefined) => {\n  const [src, setSrc] = useState<string | undefined>(undefined);\n\n  useEffect(() => {\n    if (!file) {\n      setSrc(undefined);\n      return;\n    }\n\n    const objectUrl = URL.createObjectURL(file);\n    setSrc(objectUrl);\n\n    return () => {\n      URL.revokeObjectURL(objectUrl);\n    };\n  }, [file]);\n\n  return src;\n};\n\nconst useAttachmentSrc = () => {\n  const { file, src } = useAttachment(\n    useShallow((a): { file?: File; src?: string } => {\n      if (a.type !== \"image\") return {};\n      if (a.file) return { file: a.file };\n      const src = a.content?.filter((c) => c.type === \"image\")[0]?.image;\n      if (!src) return {};\n      return { src };\n    }),\n  );\n\n  return useFileSrc(file) ?? src;\n};\n\ntype AttachmentPreviewProps = {\n  src: string;\n};\n\nconst AttachmentPreview: FC<AttachmentPreviewProps> = ({ src }) => {\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  return (\n    // eslint-disable-next-line @next/next/no-img-element\n    <img\n      src={src}\n      style={{\n        width: \"auto\",\n        height: \"auto\",\n        maxWidth: \"75dvh\",\n        maxHeight: \"75dvh\",\n        display: isLoaded ? \"block\" : \"none\",\n        overflow: \"clip\",\n      }}\n      onLoad={() => setIsLoaded(true)}\n      alt=\"Image Preview\"\n    />\n  );\n};\n\nconst AttachmentPreviewDialog: FC<PropsWithChildren> = ({ children }) => {\n  const src = useAttachmentSrc();\n\n  if (!src) return children;\n\n  return (\n    <Dialog>\n      <DialogTrigger className=\"aui-attachment-preview-trigger\" asChild>\n        {children}\n      </DialogTrigger>\n      <DialogContent>\n        <DialogTitle className=\"aui-sr-only\">\n          Image Attachment Preview\n        </DialogTitle>\n        <AttachmentPreview src={src} />\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nconst AttachmentThumb: FC = () => {\n  const isImage = useAttachment((a) => a.type === \"image\");\n  const src = useAttachmentSrc();\n  return (\n    <AvatarRoot className=\"aui-attachment-thumb\">\n      <AvatarFallback delayMs={isImage ? 200 : 0}>\n        <FileIcon />\n      </AvatarFallback>\n      <AvatarImage src={src}></AvatarImage>\n    </AvatarRoot>\n  );\n};\n\nconst AttachmentUI: FC = () => {\n  const canRemove = useAttachment((a) => a.source !== \"message\");\n  const typeLabel = useAttachment((a) => {\n    const type = a.type;\n    switch (type) {\n      case \"image\":\n        return \"Image\";\n      case \"document\":\n        return \"Document\";\n      case \"file\":\n        return \"File\";\n      default:\n        const _exhaustiveCheck: never = type;\n        throw new Error(`Unknown attachment type: ${_exhaustiveCheck}`);\n    }\n  });\n  return (\n    <Tooltip>\n      <AttachmentRoot>\n        <AttachmentPreviewDialog>\n          <TooltipTrigger asChild>\n            <AttachmentContent>\n              <AttachmentThumb />\n              <div className=\"aui-attachment-text\">\n                <p className=\"aui-attachment-name\">\n                  <AttachmentPrimitive.Name />\n                </p>\n                <p className=\"aui-attachment-type\">{typeLabel}</p>\n              </div>\n            </AttachmentContent>\n          </TooltipTrigger>\n        </AttachmentPreviewDialog>\n        {canRemove && <AttachmentRemove />}\n      </AttachmentRoot>\n      <TooltipContent side=\"top\">\n        <AttachmentPrimitive.Name />\n      </TooltipContent>\n    </Tooltip>\n  );\n};\n\nAttachmentUI.displayName = \"Attachment\";\n\nnamespace AttachmentRemove {\n  export type Element = HTMLButtonElement;\n  export type Props = Partial<TooltipIconButton.Props>;\n}\n\nconst AttachmentRemove = forwardRef<\n  AttachmentRemove.Element,\n  AttachmentRemove.Props\n>((props, ref) => {\n  const {\n    strings: {\n      composer: { removeAttachment: { tooltip = \"Remove file\" } = {} } = {},\n    } = {},\n  } = useThreadConfig();\n\n  return (\n    <AttachmentPrimitive.Remove asChild>\n      <TooltipIconButton\n        tooltip={tooltip}\n        className=\"aui-attachment-remove\"\n        side=\"top\"\n        {...props}\n        ref={ref}\n      >\n        {props.children ?? <CircleXIcon />}\n      </TooltipIconButton>\n    </AttachmentPrimitive.Remove>\n  );\n});\n\nAttachmentRemove.displayName = \"AttachmentRemove\";\n\nconst exports = {\n  Root: AttachmentRoot,\n  Remove: AttachmentRemove,\n};\n\nexport default Object.assign(AttachmentUI, exports) as typeof AttachmentUI &\n  typeof exports;\n"],"names":["src"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 5179, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5185, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/thread/index.ts"],"sourcesContent":["export { ThreadPrimitiveRoot as Root } from \"./ThreadRoot\";\nexport { ThreadPrimitiveEmpty as Empty } from \"./ThreadEmpty\";\nexport { ThreadPrimitiveIf as If } from \"./ThreadIf\";\nexport { ThreadPrimitiveViewport as Viewport } from \"./ThreadViewport\";\nexport { ThreadPrimitiveMessages as Messages } from \"./ThreadMessages\";\nexport { ThreadPrimitiveScrollToBottom as ScrollToBottom } from \"./ThreadScrollToBottom\";\nexport { ThreadPrimitiveSuggestion as Suggestion } from \"./ThreadSuggestion\";\n"],"names":[],"mappings":"","ignoreList":[0]}},
    {"offset": {"line": 5196, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5210, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/thread/useThreadIf.tsx"],"sourcesContent":["\"use client\";\n\nimport { useThread } from \"../../context\";\nimport type { RequireAtLeastOne } from \"../../utils/RequireAtLeastOne\";\n\ntype ThreadIfFilters = {\n  empty: boolean | undefined;\n  running: boolean | undefined;\n  disabled: boolean | undefined;\n};\n\nexport type UseThreadIfProps = RequireAtLeastOne<ThreadIfFilters>;\n\nexport const useThreadIf = (props: UseThreadIfProps) => {\n  return useThread((thread) => {\n    if (props.empty === true && thread.messages.length !== 0) return false;\n    if (props.empty === false && thread.messages.length === 0) return false;\n    if (props.running === true && !thread.isRunning) return false;\n    if (props.running === false && thread.isRunning) return false;\n    if (props.disabled === true && thread.isDisabled) return false;\n    if (props.disabled === false && thread.isDisabled) return false;\n\n    return true;\n  });\n};\n"],"names":[],"mappings":";;;;AAEA,SAAS,iBAAiB;;;AAWnB,IAAM,cAAc,CAAC,UAA4B;IACtD,oMAAO,YAAA,EAAU,CAAC,WAAW;QAC3B,IAAI,MAAM,KAAA,KAAU,QAAQ,OAAO,QAAA,CAAS,MAAA,KAAW,EAAG,CAAA,OAAO;QACjE,IAAI,MAAM,KAAA,KAAU,SAAS,OAAO,QAAA,CAAS,MAAA,KAAW,EAAG,CAAA,OAAO;QAClE,IAAI,MAAM,OAAA,KAAY,QAAQ,CAAC,OAAO,SAAA,CAAW,CAAA,OAAO;QACxD,IAAI,MAAM,OAAA,KAAY,SAAS,OAAO,SAAA,CAAW,CAAA,OAAO;QACxD,IAAI,MAAM,QAAA,KAAa,QAAQ,OAAO,UAAA,CAAY,CAAA,OAAO;QACzD,IAAI,MAAM,QAAA,KAAa,SAAS,OAAO,UAAA,CAAY,CAAA,OAAO;QAE1D,OAAO;IACT,CAAC;AACH","ignoreList":[0]}},
    {"offset": {"line": 5230, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5236, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/thread/useThreadEmpty.tsx"],"sourcesContent":["import { useThreadIf } from \"./useThreadIf\";\n\nexport const useThreadEmpty = () => {\n  return useThreadIf({ empty: true });\n};\n"],"names":[],"mappings":";;;;AAAA,SAAS,mBAAmB;;AAErB,IAAM,iBAAiB,MAAM;IAClC,8MAAO,cAAA,EAAY;QAAE,OAAO;IAAK,CAAC;AACpC","ignoreList":[0]}},
    {"offset": {"line": 5249, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5255, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/thread/ThreadEmpty.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC, PropsWithChildren } from \"react\";\nimport { useThreadEmpty } from \"../../primitive-hooks/thread/useThreadEmpty\";\n\nexport namespace ThreadPrimitiveEmpty {\n  export type Props = PropsWithChildren;\n}\n\nexport const ThreadPrimitiveEmpty: FC<ThreadPrimitiveEmpty.Props> = ({\n  children,\n}) => {\n  const empty = useThreadEmpty();\n  return empty ? children : null;\n};\n\nThreadPrimitiveEmpty.displayName = \"ThreadPrimitive.Empty\";\n"],"names":[],"mappings":";;;;AAGA,SAAS,sBAAsB;;;AAMxB,IAAM,uBAAuD,CAAC,EACnE,QAAA,EACF,KAAM;IACJ,MAAM,kNAAQ,iBAAA,CAAe;IAC7B,OAAO,QAAQ,WAAW;AAC5B;AAEA,qBAAqB,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 5269, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5275, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/thread/ThreadIf.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC, PropsWithChildren } from \"react\";\nimport {\n  UseThreadIfProps,\n  useThreadIf,\n} from \"../../primitive-hooks/thread/useThreadIf\";\n\nexport namespace ThreadPrimitiveIf {\n  export type Props = PropsWithChildren<UseThreadIfProps>;\n}\n\nexport const ThreadPrimitiveIf: FC<ThreadPrimitiveIf.Props> = ({\n  children,\n  ...query\n}) => {\n  const result = useThreadIf(query);\n  return result ? children : null;\n};\n\nThreadPrimitiveIf.displayName = \"ThreadPrimitive.If\";\n"],"names":[],"mappings":";;;;AAGA;;;AASO,IAAM,oBAAiD,CAAC,EAC7D,QAAA,EACA,GAAG,OACL,KAAM;IACJ,MAAM,gNAAS,cAAA,EAAY,KAAK;IAChC,OAAO,SAAS,WAAW;AAC7B;AAEA,kBAAkB,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 5289, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5295, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/context/stores/MessageUtils.ts"],"sourcesContent":["import { create } from \"zustand\";\n\nexport type MessageUtilsState = {\n  readonly isCopied: boolean;\n  readonly setIsCopied: (value: boolean) => void;\n\n  readonly isHovering: boolean;\n  readonly setIsHovering: (value: boolean) => void;\n};\n\nexport const makeMessageUtilsStore = () =>\n  create<MessageUtilsState>((set) => {\n    return {\n      isCopied: false,\n      setIsCopied: (value) => {\n        set({ isCopied: value });\n      },\n      isHovering: false,\n      setIsHovering: (value) => {\n        set({ isHovering: value });\n      },\n    };\n  });\n"],"names":[],"mappings":";;;;AAAA,SAAS,cAAc;;AAUhB,IAAM,wBAAwB,iJACnC,SAAA,EAA0B,CAAC,QAAQ;QACjC,OAAO;YACL,UAAU;YACV,aAAa,CAAC,UAAU;gBACtB,IAAI;oBAAE,UAAU;gBAAM,CAAC;YACzB;YACA,YAAY;YACZ,eAAe,CAAC,UAAU;gBACxB,IAAI;oBAAE,YAAY;gBAAM,CAAC;YAC3B;QACF;IACF,CAAC","ignoreList":[0]}},
    {"offset": {"line": 5319, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5325, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/context/providers/MessageRuntimeProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport { type FC, type PropsWithChildren, useEffect, useState } from \"react\";\nimport { create } from \"zustand\";\nimport { MessageContext } from \"../react/MessageContext\";\nimport type { MessageContextValue } from \"../react/MessageContext\";\nimport { makeMessageUtilsStore } from \"../stores/MessageUtils\";\nimport { ReadonlyStore, writableStore } from \"../ReadonlyStore\";\nimport { MessageRuntime } from \"../../api/MessageRuntime\";\n\nexport namespace MessageRuntimeProvider {\n  export type Props = PropsWithChildren<{\n    runtime: MessageRuntime;\n  }>;\n}\n\nconst useMessageRuntimeStore = (runtime: MessageRuntime) => {\n  const [store] = useState(() => create(() => runtime));\n\n  useEffect(() => {\n    writableStore(store).setState(runtime, true);\n  }, [runtime, store]);\n\n  return store;\n};\n\nconst useMessageStore = (runtime: MessageRuntime) => {\n  const [store] = useState(() => create(() => runtime.getState()));\n  useEffect(() => {\n    const updateState = () =>\n      writableStore(store).setState(runtime.getState(), true);\n    updateState();\n    return runtime.subscribe(updateState);\n  }, [runtime, store]);\n\n  return store;\n};\n\nconst useMessageUtilsStore = () => {\n  const [store] = useState(() => makeMessageUtilsStore());\n  return store;\n};\n\nconst useEditComposerStore = (\n  useMessageRuntime: ReadonlyStore<MessageRuntime>,\n) => {\n  const runtime = useMessageRuntime.getState().composer;\n  const [store] = useState(() => create(() => runtime.getState()));\n\n  useEffect(() => {\n    const updateState = () => writableStore(store).setState(runtime.getState());\n    updateState();\n    return runtime.subscribe(updateState);\n  }, [runtime, store]);\n\n  return store;\n};\n\nexport const MessageRuntimeProvider: FC<MessageRuntimeProvider.Props> = ({\n  runtime,\n  children,\n}) => {\n  const useMessageRuntime = useMessageRuntimeStore(runtime);\n  const useMessage = useMessageStore(runtime);\n  const useMessageUtils = useMessageUtilsStore();\n  const useEditComposer = useEditComposerStore(useMessageRuntime);\n  const [context] = useState<MessageContextValue>(() => {\n    return { useMessageRuntime, useMessage, useMessageUtils, useEditComposer };\n  });\n\n  return (\n    <MessageContext.Provider value={context}>\n      {children}\n    </MessageContext.Provider>\n  );\n};\n"],"names":[],"mappings":";;;;AAEA,SAA0C,WAAW,gBAAgB;AAqEjE;AApEJ,SAAS,cAAc;AAIvB,SAAwB,qBAAqB;AAD7C,SAAS,6BAA6B;AAFtC,SAAS,sBAAsB;;;;;;;;AAY/B,IAAM,yBAAyB,CAAC,YAA4B;IAC1D,MAAM,CAAC,KAAK,CAAA,6MAAI,WAAA,EAAS,gJAAM,UAAA,EAAO,IAAM,OAAO,CAAC;IAEpD,CAAA,GAAA,qMAAA,CAAA,YAAA,EAAU,MAAM;QACd,CAAA,GAAA,+KAAA,CAAA,gBAAA,EAAc,KAAK,EAAE,QAAA,CAAS,SAAS,IAAI;IAC7C,GAAG;QAAC;QAAS,KAAK;KAAC;IAEnB,OAAO;AACT;AAEA,IAAM,kBAAkB,CAAC,YAA4B;IACnD,MAAM,CAAC,KAAK,CAAA,IAAI,oNAAA,EAAS,iJAAM,SAAA,EAAO,IAAM,QAAQ,QAAA,CAAS,CAAC,CAAC;IAC/D,CAAA,GAAA,qMAAA,CAAA,YAAA,EAAU,MAAM;QACd,MAAM,cAAc,wLAClB,gBAAA,EAAc,KAAK,EAAE,QAAA,CAAS,QAAQ,QAAA,CAAS,GAAG,IAAI;QACxD,YAAY;QACZ,OAAO,QAAQ,SAAA,CAAU,WAAW;IACtC,GAAG;QAAC;QAAS,KAAK;KAAC;IAEnB,OAAO;AACT;AAEA,IAAM,uBAAuB,MAAM;IACjC,MAAM,CAAC,KAAK,CAAA,6MAAI,WAAA,EAAS,iMAAM,wBAAA,CAAsB,CAAC;IACtD,OAAO;AACT;AAEA,IAAM,uBAAuB,CAC3B,sBACG;IACH,MAAM,UAAU,kBAAkB,QAAA,CAAS,EAAE,QAAA;IAC7C,MAAM,CAAC,KAAK,CAAA,6MAAI,WAAA,EAAS,QAAM,kJAAA,EAAO,IAAM,QAAQ,QAAA,CAAS,CAAC,CAAC;IAE/D,CAAA,GAAA,qMAAA,CAAA,YAAA,EAAU,MAAM;QACd,MAAM,cAAc,KAAM,mMAAA,EAAc,KAAK,EAAE,QAAA,CAAS,QAAQ,QAAA,CAAS,CAAC;QAC1E,YAAY;QACZ,OAAO,QAAQ,SAAA,CAAU,WAAW;IACtC,GAAG;QAAC;QAAS,KAAK;KAAC;IAEnB,OAAO;AACT;AAEO,IAAM,yBAA2D,CAAC,EACvE,OAAA,EACA,QAAA,EACF,KAAM;IACJ,MAAM,oBAAoB,uBAAuB,OAAO;IACxD,MAAM,aAAa,gBAAgB,OAAO;IAC1C,MAAM,kBAAkB,qBAAqB;IAC7C,MAAM,kBAAkB,qBAAqB,iBAAiB;IAC9D,MAAM,CAAC,OAAO,CAAA,6MAAI,WAAA,EAA8B,MAAM;QACpD,OAAO;YAAE;YAAmB;YAAY;YAAiB;QAAgB;IAC3E,CAAC;IAED,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,4LAAC,iBAAA,CAAe,QAAA,EAAf;QAAwB,OAAO;QAC7B;IAAA,CACH;AAEJ","ignoreList":[0]}},
    {"offset": {"line": 5401, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5407, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/thread/ThreadMessages.tsx"],"sourcesContent":["\"use client\";\n\nimport { type ComponentType, type FC, memo, useMemo } from \"react\";\nimport { useThread, useThreadRuntime } from \"../../context/react/ThreadContext\";\nimport { MessageRuntimeProvider } from \"../../context/providers/MessageRuntimeProvider\";\nimport { useEditComposer, useMessage } from \"../../context\";\nimport { ThreadMessage as ThreadMessageType } from \"../../types\";\n\nexport namespace ThreadPrimitiveMessages {\n  export type Props = {\n    components:\n      | {\n          Message: ComponentType;\n          EditComposer?: ComponentType | undefined;\n          UserEditComposer?: ComponentType | undefined;\n          AssistantEditComposer?: ComponentType | undefined;\n          SystemEditComposer?: ComponentType | undefined;\n          UserMessage?: ComponentType | undefined;\n          AssistantMessage?: ComponentType | undefined;\n          SystemMessage?: ComponentType | undefined;\n        }\n      | {\n          Message?: ComponentType | undefined;\n          EditComposer?: ComponentType | undefined;\n          UserEditComposer?: ComponentType | undefined;\n          AssistantEditComposer?: ComponentType | undefined;\n          SystemEditComposer?: ComponentType | undefined;\n          UserMessage: ComponentType;\n          AssistantMessage: ComponentType;\n          SystemMessage?: ComponentType | undefined;\n        };\n  };\n}\n\nconst isComponentsSame = (\n  prev: ThreadPrimitiveMessages.Props[\"components\"],\n  next: ThreadPrimitiveMessages.Props[\"components\"],\n) => {\n  return (\n    prev.Message === next.Message &&\n    prev.EditComposer === next.EditComposer &&\n    prev.UserEditComposer === next.UserEditComposer &&\n    prev.AssistantEditComposer === next.AssistantEditComposer &&\n    prev.SystemEditComposer === next.SystemEditComposer &&\n    prev.UserMessage === next.UserMessage &&\n    prev.AssistantMessage === next.AssistantMessage &&\n    prev.SystemMessage === next.SystemMessage\n  );\n};\n\nconst DEFAULT_SYSTEM_MESSAGE = () => null;\n\nconst getComponent = (\n  components: ThreadPrimitiveMessages.Props[\"components\"],\n  role: ThreadMessageType[\"role\"],\n  isEditing: boolean,\n) => {\n  switch (role) {\n    case \"user\":\n      if (isEditing) {\n        return (\n          components.UserEditComposer ??\n          components.EditComposer ??\n          components.UserMessage ??\n          (components.Message as ComponentType)\n        );\n      } else {\n        return components.UserMessage ?? (components.Message as ComponentType);\n      }\n    case \"assistant\":\n      if (isEditing) {\n        return (\n          components.AssistantEditComposer ??\n          components.EditComposer ??\n          components.AssistantMessage ??\n          (components.Message as ComponentType)\n        );\n      } else {\n        return (\n          components.AssistantMessage ?? (components.Message as ComponentType)\n        );\n      }\n    case \"system\":\n      if (isEditing) {\n        return (\n          components.SystemEditComposer ??\n          components.EditComposer ??\n          components.SystemMessage ??\n          (components.Message as ComponentType)\n        );\n      } else {\n        return components.SystemMessage ?? DEFAULT_SYSTEM_MESSAGE;\n      }\n    default:\n      const _exhaustiveCheck: never = role;\n      throw new Error(`Unknown message role: ${_exhaustiveCheck}`);\n  }\n};\n\ntype ThreadMessageComponentProps = {\n  components: ThreadPrimitiveMessages.Props[\"components\"];\n};\n\nconst ThreadMessageComponent: FC<ThreadMessageComponentProps> = ({\n  components,\n}) => {\n  const role = useMessage((m) => m.role);\n  const isEditing = useEditComposer((c) => c.isEditing);\n  const Component = getComponent(components, role, isEditing);\n\n  return <Component />;\n};\n\ntype ThreadMessageProps = {\n  messageIndex: number;\n  components: ThreadPrimitiveMessages.Props[\"components\"];\n};\n\nconst ThreadMessageImpl: FC<ThreadMessageProps> = ({\n  messageIndex,\n  components,\n}) => {\n  const threadRuntime = useThreadRuntime();\n  const runtime = useMemo(\n    () => threadRuntime.getMesssageByIndex(messageIndex),\n    [threadRuntime, messageIndex],\n  );\n\n  return (\n    <MessageRuntimeProvider runtime={runtime}>\n      <ThreadMessageComponent components={components} />\n    </MessageRuntimeProvider>\n  );\n};\n\nconst ThreadMessage = memo(\n  ThreadMessageImpl,\n  (prev, next) =>\n    prev.messageIndex === next.messageIndex &&\n    isComponentsSame(prev.components, next.components),\n);\n\nexport const ThreadPrimitiveMessagesImpl: FC<ThreadPrimitiveMessages.Props> = ({\n  components,\n}) => {\n  const messagesLength = useThread((t) => t.messages.length);\n  if (messagesLength === 0) return null;\n\n  return Array.from({ length: messagesLength }, (_, index) => (\n    <ThreadMessage key={index} messageIndex={index} components={components} />\n  ));\n};\n\nThreadPrimitiveMessagesImpl.displayName = \"ThreadPrimitive.Messages\";\n\nexport const ThreadPrimitiveMessages = memo(\n  ThreadPrimitiveMessagesImpl,\n  (prev, next) => isComponentsSame(prev.components, next.components),\n);\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 5486, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5492, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/thread/ThreadRoot.tsx"],"sourcesContent":["\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ElementRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\n\nexport namespace ThreadPrimitiveRoot {\n  export type Element = ElementRef<typeof Primitive.div>;\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.div>;\n}\n\nexport const ThreadPrimitiveRoot = forwardRef<\n  ThreadPrimitiveRoot.Element,\n  ThreadPrimitiveRoot.Props\n>((props, ref) => {\n  return <Primitive.div {...props} ref={ref} />;\n});\n\nThreadPrimitiveRoot.displayName = \"ThreadPrimitive.Root\";\n"],"names":[],"mappings":";;;AAGA,SAA0B,kBAA4C;AAW7D;;AAZT,SAAS,iBAAiB;;;;;AAQnB,IAAM,gOAAsB,aAAA,EAGjC,CAAC,OAAO,QAAQ;IAChB,OAAO,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,wKAAC,YAAA,CAAU,GAAA,EAAV;QAAe,GAAG,KAAA;QAAO;IAAA,CAAU;AAC7C,CAAC;AAED,oBAAoB,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 5512, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5518, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/thread/useThreadScrollToBottom.tsx"],"sourcesContent":["import { useCallback } from \"react\";\nimport { useThreadViewport } from \"../../context\";\nimport { useThreadViewportStore } from \"../../context/react/ThreadContext\";\n\nexport const useThreadScrollToBottom = () => {\n  const isAtBottom = useThreadViewport((s) => s.isAtBottom);\n\n  const threadViewportStore = useThreadViewportStore();\n\n  const handleScrollToBottom = useCallback(() => {\n    threadViewportStore.getState().scrollToBottom();\n  }, [threadViewportStore]);\n\n  if (isAtBottom) return null;\n  return handleScrollToBottom;\n};\n"],"names":[],"mappings":";;;;AAAA,SAAS,mBAAmB;AAC5B,SAAS,yBAAyB;;;;AAG3B,IAAM,0BAA0B,MAAM;IAC3C,MAAM,0MAAa,oBAAA,EAAkB,CAAC,IAAM,EAAE,UAAU;IAExD,MAAM,mNAAsB,yBAAA,CAAuB;IAEnD,MAAM,iOAAuB,cAAA,EAAY,MAAM;QAC7C,oBAAoB,QAAA,CAAS,EAAE,cAAA,CAAe;IAChD,GAAG;QAAC,mBAAmB;KAAC;IAExB,IAAI,WAAY,CAAA,OAAO;IACvB,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 5540, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5546, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/thread/ThreadScrollToBottom.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useThreadScrollToBottom } from \"../../primitive-hooks/thread/useThreadScrollToBottom\";\n\nexport namespace ThreadPrimitiveScrollToBottom {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useThreadScrollToBottom>;\n}\n\nexport const ThreadPrimitiveScrollToBottom = createActionButton(\n  \"ThreadPrimitive.ScrollToBottom\",\n  useThreadScrollToBottom,\n);\n"],"names":[],"mappings":";;;;AAEA;AAKA,SAAS,+BAA+B;;;;AAOjC,IAAM,uNAAgC,qBAAA,EAC3C,iPACA,0BAAA","ignoreList":[0]}},
    {"offset": {"line": 5558, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5564, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/thread/useThreadSuggestion.tsx"],"sourcesContent":["import { useCallback } from \"react\";\nimport { useThread } from \"../../context\";\nimport { useThreadRuntime } from \"../../context/react/ThreadContext\";\n\nexport type UseApplyThreadSuggestionProps = {\n  prompt: string;\n  method: \"replace\";\n  autoSend?: boolean | undefined;\n};\n\nexport const useThreadSuggestion = ({\n  prompt,\n  autoSend,\n}: UseApplyThreadSuggestionProps) => {\n  const threadRuntime = useThreadRuntime();\n\n  const disabled = useThread((t) => t.isDisabled);\n  const callback = useCallback(() => {\n    if (autoSend && !threadRuntime.getState().isRunning) {\n      threadRuntime.append(prompt);\n      threadRuntime.composer.setText(\"\");\n    } else {\n      threadRuntime.composer.setText(prompt);\n    }\n  }, [threadRuntime, autoSend, prompt]);\n\n  if (disabled) return null;\n  return callback;\n};\n"],"names":[],"mappings":";;;;AAAA,SAAS,mBAAmB;AAE5B,SAAS,wBAAwB;;;;AAQ1B,IAAM,sBAAsB,CAAC,EAClC,MAAA,EACA,QAAA,EACF,KAAqC;IACnC,MAAM,6MAAgB,mBAAA,CAAiB;IAEvC,MAAM,WAAW,yMAAA,EAAU,CAAC,IAAM,EAAE,UAAU;IAC9C,MAAM,qNAAW,cAAA,EAAY,MAAM;QACjC,IAAI,YAAY,CAAC,cAAc,QAAA,CAAS,EAAE,SAAA,EAAW;YACnD,cAAc,MAAA,CAAO,MAAM;YAC3B,cAAc,QAAA,CAAS,OAAA,CAAQ,EAAE;QACnC,OAAO;YACL,cAAc,QAAA,CAAS,OAAA,CAAQ,MAAM;QACvC;IACF,GAAG;QAAC;QAAe;QAAU,MAAM;KAAC;IAEpC,IAAI,SAAU,CAAA,OAAO;IACrB,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 5593, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5599, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/thread/ThreadSuggestion.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\nimport { useThreadSuggestion } from \"../../primitive-hooks/thread/useThreadSuggestion\";\n\nexport namespace ThreadPrimitiveSuggestion {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useThreadSuggestion>;\n}\n\nexport const ThreadPrimitiveSuggestion = createActionButton(\n  \"ThreadPrimitive.Suggestion\",\n  useThreadSuggestion,\n  [\"prompt\", \"autoSend\", \"method\"],\n);\n"],"names":[],"mappings":";;;;AAEA;AAKA,SAAS,2BAA2B;;;;AAO7B,IAAM,mNAA4B,qBAAA,EACvC,yOACA,sBAAA,EACA;IAAC;IAAU;IAAY,QAAQ;CAAA","ignoreList":[0]}},
    {"offset": {"line": 5615, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5621, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/utils/hooks/useManagedRef.ts"],"sourcesContent":["import { useCallback, useRef } from \"react\";\n\nexport const useManagedRef = <TNode>(\n  callback: (node: TNode) => (() => void) | void,\n) => {\n  const cleanupRef = useRef<(() => void) | void>(undefined);\n\n  const ref = useCallback(\n    (el: TNode | null) => {\n      // Call the previous cleanup function\n      if (cleanupRef.current) {\n        cleanupRef.current();\n      }\n\n      // Call the new callback and store its cleanup function\n      if (el) {\n        cleanupRef.current = callback(el);\n      }\n    },\n    [callback],\n  );\n\n  return ref;\n};\n"],"names":[],"mappings":";;;;AAAA,SAAS,aAAa,cAAc;;AAE7B,IAAM,gBAAgB,CAC3B,aACG;IACH,MAAM,uNAAa,SAAA,EAA4B,KAAA,CAAS;IAExD,MAAM,gNAAM,cAAA,EACV,CAAC,OAAqB;QAEpB,IAAI,WAAW,OAAA,EAAS;YACtB,WAAW,OAAA,CAAQ;QACrB;QAGA,IAAI,IAAI;YACN,WAAW,OAAA,GAAU,SAAS,EAAE;QAClC;IACF,GACA;QAAC,QAAQ;KAAA;IAGX,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 5643, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5649, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/utils/hooks/useOnResizeContent.tsx"],"sourcesContent":["import { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useCallback } from \"react\";\nimport { useManagedRef } from \"./useManagedRef\";\n\nexport const useOnResizeContent = (callback: () => void) => {\n  const callbackRef = useCallbackRef(callback);\n\n  const refCallback = useCallback(\n    (el: HTMLElement) => {\n      const resizeObserver = new ResizeObserver(() => {\n        callbackRef();\n      });\n\n      const mutationObserver = new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n          for (const node of mutation.addedNodes) {\n            if (node instanceof Element) {\n              resizeObserver.observe(node);\n            }\n          }\n\n          for (const node of mutation.removedNodes) {\n            if (node instanceof Element) {\n              resizeObserver.unobserve(node);\n            }\n          }\n        }\n\n        callbackRef();\n      });\n\n      resizeObserver.observe(el);\n      mutationObserver.observe(el, { childList: true });\n\n      // Observe existing children\n      for (const child of el.children) {\n        resizeObserver.observe(child);\n      }\n\n      return () => {\n        resizeObserver.disconnect();\n        mutationObserver.disconnect();\n      };\n    },\n    [callbackRef],\n  );\n\n  return useManagedRef(refCallback);\n};\n"],"names":[],"mappings":";;;;AACA,SAAS,mBAAmB;AAD5B,SAAS,sBAAsB;AAE/B,SAAS,qBAAqB;;;;AAEvB,IAAM,qBAAqB,CAAC,aAAyB;IAC1D,MAAM,qMAAc,iBAAA,EAAe,QAAQ;IAE3C,MAAM,kBAAc,oNAAA,EAClB,CAAC,OAAoB;QACnB,MAAM,iBAAiB,IAAI,eAAe,MAAM;YAC9C,YAAY;QACd,CAAC;QAED,MAAM,mBAAmB,IAAI,iBAAiB,CAAC,cAAc;YAC3D,KAAA,MAAW,YAAY,UAAW;gBAChC,KAAA,MAAW,QAAQ,SAAS,UAAA,CAAY;oBACtC,IAAI,gBAAgB,SAAS;wBAC3B,eAAe,OAAA,CAAQ,IAAI;oBAC7B;gBACF;gBAEA,KAAA,MAAW,QAAQ,SAAS,YAAA,CAAc;oBACxC,IAAI,gBAAgB,SAAS;wBAC3B,eAAe,SAAA,CAAU,IAAI;oBAC/B;gBACF;YACF;YAEA,YAAY;QACd,CAAC;QAED,eAAe,OAAA,CAAQ,EAAE;QACzB,iBAAiB,OAAA,CAAQ,IAAI;YAAE,WAAW;QAAK,CAAC;QAGhD,KAAA,MAAW,SAAS,GAAG,QAAA,CAAU;YAC/B,eAAe,OAAA,CAAQ,KAAK;QAC9B;QAEA,OAAO,MAAM;YACX,eAAe,UAAA,CAAW;YAC1B,iBAAiB,UAAA,CAAW;QAC9B;IACF,GACA;QAAC,WAAW;KAAA;IAGd,kMAAO,gBAAA,EAAc,WAAW;AAClC","ignoreList":[0]}},
    {"offset": {"line": 5698, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5704, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/thread/useThreadViewportAutoScroll.tsx"],"sourcesContent":["\"use client\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { useEffect, useRef } from \"react\";\nimport {\n  useThreadRuntime,\n  useThreadViewportStore,\n} from \"../../context/react/ThreadContext\";\nimport { useOnResizeContent } from \"../../utils/hooks/useOnResizeContent\";\nimport { useOnScrollToBottom } from \"../../utils/hooks/useOnScrollToBottom\";\nimport { useManagedRef } from \"../../utils/hooks/useManagedRef\";\nimport { writableStore } from \"../../context/ReadonlyStore\";\n\nexport type UseThreadViewportAutoScrollProps = {\n  autoScroll?: boolean | undefined;\n  unstable_scrollToBottomOnRunStart?: boolean | undefined;\n};\n\nexport const useThreadViewportAutoScroll = <TElement extends HTMLElement>({\n  autoScroll = true,\n  unstable_scrollToBottomOnRunStart = true,\n}: UseThreadViewportAutoScrollProps): React.RefCallback<TElement> => {\n  const divRef = useRef<TElement>(null);\n\n  const threadViewportStore = useThreadViewportStore();\n\n  const lastScrollTop = useRef<number>(0);\n\n  // bug: when ScrollToBottom's button changes its disabled state, the scroll stops\n  // fix: delay the state change until the scroll is done\n  const isScrollingToBottomRef = useRef(false);\n\n  const scrollToBottom = (behavior: ScrollBehavior) => {\n    const div = divRef.current;\n    if (!div || !autoScroll) return;\n\n    isScrollingToBottomRef.current = true;\n    div.scrollTo({ top: div.scrollHeight, behavior });\n  };\n\n  const handleScroll = () => {\n    const div = divRef.current;\n    if (!div) return;\n\n    const isAtBottom = threadViewportStore.getState().isAtBottom;\n    const newIsAtBottom =\n      div.scrollHeight - div.scrollTop <= div.clientHeight + 1; // TODO figure out why +1 is needed\n\n    if (!newIsAtBottom && lastScrollTop.current < div.scrollTop) {\n      // ignore scroll down\n    } else {\n      if (newIsAtBottom) {\n        isScrollingToBottomRef.current = false;\n      }\n\n      if (newIsAtBottom !== isAtBottom) {\n        writableStore(threadViewportStore).setState({\n          isAtBottom: newIsAtBottom,\n        });\n      }\n    }\n\n    lastScrollTop.current = div.scrollTop;\n  };\n\n  const resizeRef = useOnResizeContent(() => {\n    if (\n      isScrollingToBottomRef.current ||\n      threadViewportStore.getState().isAtBottom\n    ) {\n      scrollToBottom(\"instant\");\n    }\n\n    handleScroll();\n  });\n\n  const scrollRef = useManagedRef<HTMLElement>((el) => {\n    el.addEventListener(\"scroll\", handleScroll);\n    return () => {\n      el.removeEventListener(\"scroll\", handleScroll);\n    };\n  });\n\n  const autoScrollRef = useComposedRefs<TElement>(resizeRef, scrollRef, divRef);\n\n  useOnScrollToBottom(() => {\n    scrollToBottom(\"auto\");\n  });\n\n  // autoscroll on run start\n  const threadRuntime = useThreadRuntime();\n  useEffect(() => {\n    if (!unstable_scrollToBottomOnRunStart) return undefined;\n\n    return threadRuntime.unstable_on(\"run-start\", focus);\n  }, [unstable_scrollToBottomOnRunStart]);\n\n  return autoScrollRef;\n};\n"],"names":[],"mappings":";;;AAEA,SAAS,WAAW,cAAc;AAClC;AAOA,SAAS,qBAAqB;AAH9B,SAAS,0BAA0B;AAEnC,SAAS,qBAAqB;;AAR9B,SAAS,uBAAuB;AAOhC,SAAS,2BAA2B;;;;;;;;;AAS7B,IAAM,8BAA8B,CAA+B,EACxE,aAAa,IAAA,EACb,oCAAoC,IAAA,EACtC,KAAqE;IACnE,MAAM,kNAAS,UAAA,EAAiB,IAAI;IAEpC,MAAM,mNAAsB,yBAAA,CAAuB;IAEnD,MAAM,oBAAgB,+MAAA,EAAe,CAAC;IAItC,MAAM,mOAAyB,SAAA,EAAO,KAAK;IAE3C,MAAM,iBAAiB,CAAC,aAA6B;QACnD,MAAM,MAAM,OAAO,OAAA;QACnB,IAAI,CAAC,OAAO,CAAC,WAAY,CAAA;QAEzB,uBAAuB,OAAA,GAAU;QACjC,IAAI,QAAA,CAAS;YAAE,KAAK,IAAI,YAAA;YAAc;QAAS,CAAC;IAClD;IAEA,MAAM,eAAe,MAAM;QACzB,MAAM,MAAM,OAAO,OAAA;QACnB,IAAI,CAAC,IAAK,CAAA;QAEV,MAAM,aAAa,oBAAoB,QAAA,CAAS,EAAE,UAAA;QAClD,MAAM,gBACJ,IAAI,YAAA,GAAe,IAAI,SAAA,IAAa,IAAI,YAAA,GAAe;QAEzD,IAAI,CAAC,iBAAiB,cAAc,OAAA,GAAU,IAAI,SAAA,EAAW,CAE7D,OAAO;YACL,IAAI,eAAe;gBACjB,uBAAuB,OAAA,GAAU;YACnC;YAEA,IAAI,kBAAkB,YAAY;gBAChC,CAAA,GAAA,+KAAA,CAAA,gBAAA,EAAc,mBAAmB,EAAE,QAAA,CAAS;oBAC1C,YAAY;gBACd,CAAC;YACH;QACF;QAEA,cAAc,OAAA,GAAU,IAAI,SAAA;IAC9B;IAEA,MAAM,gBAAY,iNAAA,EAAmB,MAAM;QACzC,IACE,uBAAuB,OAAA,IACvB,oBAAoB,QAAA,CAAS,EAAE,UAAA,EAC/B;YACA,eAAe,SAAS;QAC1B;QAEA,aAAa;IACf,CAAC;IAED,MAAM,uMAAY,gBAAA,EAA2B,CAAC,OAAO;QACnD,GAAG,gBAAA,CAAiB,UAAU,YAAY;QAC1C,OAAO,MAAM;YACX,GAAG,mBAAA,CAAoB,UAAU,YAAY;QAC/C;IACF,CAAC;IAED,MAAM,gMAAgB,kBAAA,EAA0B,WAAW,WAAW,MAAM;IAE5E,CAAA,GAAA,4LAAA,CAAA,sBAAA,EAAoB,MAAM;QACxB,eAAe,MAAM;IACvB,CAAC;IAGD,MAAM,iBAAgB,+MAAA,CAAiB;IACvC,CAAA,GAAA,qMAAA,CAAA,YAAA,EAAU,MAAM;QACd,IAAI,CAAC,kCAAmC,CAAA,OAAO,KAAA;QAE/C,OAAO,cAAc,WAAA,CAAY,aAAa,KAAK;IACrD,GAAG;QAAC,iCAAiC;KAAC;IAEtC,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 5781, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5787, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/thread/ThreadViewport.tsx"],"sourcesContent":["\"use client\";\n\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ElementRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\nimport {\n  UseThreadViewportAutoScrollProps,\n  useThreadViewportAutoScroll,\n} from \"../../primitive-hooks/thread/useThreadViewportAutoScroll\";\n\nexport namespace ThreadPrimitiveViewport {\n  export type Element = ElementRef<typeof Primitive.div>;\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.div> &\n    UseThreadViewportAutoScrollProps;\n}\n\nexport const ThreadPrimitiveViewport = forwardRef<\n  ThreadPrimitiveViewport.Element,\n  ThreadPrimitiveViewport.Props\n>(({ autoScroll, children, ...rest }, forwardedRef) => {\n  const autoScrollRef = useThreadViewportAutoScroll<HTMLDivElement>({\n    autoScroll,\n  });\n\n  const ref = useComposedRefs(forwardedRef, autoScrollRef);\n\n  return (\n    <Primitive.div {...rest} ref={ref}>\n      {children}\n    </Primitive.div>\n  );\n});\n\nThreadPrimitiveViewport.displayName = \"ThreadPrimitive.Viewport\";\n"],"names":[],"mappings":";;;AAIA,SAA0B,kBAA4C;AAuBlE;AAtBJ;;AAHA,SAAS,uBAAuB;AAChC,SAAS,iBAAiB;;;;;;;AAanB,IAAM,oOAA0B,aAAA,EAGrC,CAAC,EAAE,UAAA,EAAY,QAAA,EAAU,GAAG,KAAK,CAAA,EAAG,iBAAiB;IACrD,MAAM,uOAAgB,8BAAA,EAA4C;QAChE;IACF,CAAC;IAED,MAAM,OAAM,iMAAA,EAAgB,cAAc,aAAa;IAEvD,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,wKAAC,YAAA,CAAU,GAAA,EAAV;QAAe,GAAG,IAAA;QAAM;QACtB;IAAA,CACH;AAEJ,CAAC;AAED,wBAAwB,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 5816, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5872, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/ui/base/CircleStopIcon.tsx"],"sourcesContent":["import { FC } from \"react\";\n\nexport const CircleStopIcon: FC = () => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 16 16\"\n      fill=\"currentColor\"\n      width=\"16\"\n      height=\"16\"\n    >\n      <rect width=\"10\" height=\"10\" x=\"3\" y=\"3\" rx=\"2\" />\n    </svg>\n  );\n};\n\nCircleStopIcon.displayName = \"CircleStopIcon\";\n"],"names":[],"mappings":";;;;AAWM;;AATC,IAAM,iBAAqB,MAAM;IACtC,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,OAAA;QACC,OAAM;QACN,SAAQ;QACR,MAAK;QACL,OAAM;QACN,QAAO;QAEP,UAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,QAAA;YAAK,OAAM;YAAK,QAAO;YAAK,GAAE;YAAI,GAAE;YAAI,IAAG;QAAA,CAAI;IAAA;AAGtD;AAEA,eAAe,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 5897, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5903, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/ui/composer.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, forwardRef, type FC } from \"react\";\n\nimport { PaperclipIcon, SendHorizontalIcon } from \"lucide-react\";\nimport { withDefaults } from \"./utils/withDefaults\";\nimport { useThreadConfig } from \"./thread-config\";\nimport { TooltipIconButton } from \"./base/tooltip-icon-button\";\nimport { CircleStopIcon } from \"./base/CircleStopIcon\";\nimport { ComposerPrimitive, ThreadPrimitive } from \"../primitives\";\nimport { useThread } from \"../context/react/ThreadContext\";\nimport Attachment from \"./attachment-ui\";\n\nconst useAllowAttachments = (ensureCapability = false) => {\n  const { composer: { allowAttachments = true } = {} } = useThreadConfig();\n  const attachmentsSupported = useThread((t) => t.capabilities.attachments);\n  return allowAttachments && (!ensureCapability || attachmentsSupported);\n};\n\nconst Composer: FC = () => {\n  const allowAttachments = useAllowAttachments(true);\n  return (\n    <ComposerRoot>\n      {allowAttachments && <ComposerAttachments />}\n      {allowAttachments && <ComposerAddAttachment />}\n      <ComposerInput autoFocus />\n      <ComposerAction />\n    </ComposerRoot>\n  );\n};\n\nComposer.displayName = \"Composer\";\n\nconst ComposerRoot = withDefaults(ComposerPrimitive.Root, {\n  className: \"aui-composer-root\",\n});\n\nComposerRoot.displayName = \"ComposerRoot\";\n\nconst ComposerInputStyled = withDefaults(ComposerPrimitive.Input, {\n  rows: 1,\n  autoFocus: true,\n  className: \"aui-composer-input\",\n});\n\nnamespace ComposerInput {\n  export type Element = HTMLTextAreaElement;\n  export type Props = ComponentPropsWithoutRef<typeof ComposerInputStyled>;\n}\n\nconst ComposerInput = forwardRef<ComposerInput.Element, ComposerInput.Props>(\n  (props, ref) => {\n    const {\n      strings: {\n        composer: { input: { placeholder = \"Write a message...\" } = {} } = {},\n      } = {},\n    } = useThreadConfig();\n    return (\n      <ComposerInputStyled placeholder={placeholder} {...props} ref={ref} />\n    );\n  },\n);\n\nComposerInput.displayName = \"ComposerInput\";\n\nconst ComposerAttachmentsContainer = withDefaults(\"div\", {\n  className: \"aui-composer-attachments\",\n});\n\nnamespace ComposerAttachments {\n  export type Props = Partial<ComposerPrimitive.Attachments.Props>;\n}\n\nconst ComposerAttachments: FC<ComposerAttachments.Props> = ({ components }) => {\n  return (\n    <ComposerAttachmentsContainer>\n      <ComposerPrimitive.Attachments\n        components={{\n          ...components,\n          Attachment: components?.Attachment ?? Attachment,\n        }}\n      />\n    </ComposerAttachmentsContainer>\n  );\n};\n\nconst ComposerAttachButton = withDefaults(TooltipIconButton, {\n  variant: \"default\",\n  className: \"aui-composer-attach\",\n});\n\nnamespace ComposerAddAttachment {\n  export type Element = HTMLButtonElement;\n  export type Props = Partial<TooltipIconButton.Props>;\n}\n\nconst ComposerAddAttachment = forwardRef<\n  ComposerAddAttachment.Element,\n  ComposerAddAttachment.Props\n>((props, ref) => {\n  const {\n    strings: {\n      composer: { addAttachment: { tooltip = \"Attach file\" } = {} } = {},\n    } = {},\n  } = useThreadConfig();\n  const allowAttachments = useAllowAttachments();\n  return (\n    <ComposerPrimitive.AddAttachment disabled={!allowAttachments} asChild>\n      <ComposerAttachButton\n        tooltip={tooltip}\n        variant={\"ghost\"}\n        {...props}\n        ref={ref}\n      >\n        {props.children ?? <PaperclipIcon />}\n      </ComposerAttachButton>\n    </ComposerPrimitive.AddAttachment>\n  );\n});\n\nComposerAddAttachment.displayName = \"ComposerAddAttachment\";\n\nconst useAllowCancel = () => {\n  const cancelSupported = useThread((t) => t.capabilities.cancel);\n  return cancelSupported;\n};\n\nconst ComposerAction: FC = () => {\n  const allowCancel = useAllowCancel();\n  if (!allowCancel) return <ComposerSend />;\n  return (\n    <>\n      <ThreadPrimitive.If running={false}>\n        <ComposerSend />\n      </ThreadPrimitive.If>\n      <ThreadPrimitive.If running>\n        <ComposerCancel />\n      </ThreadPrimitive.If>\n    </>\n  );\n};\n\nComposerAction.displayName = \"ComposerAction\";\n\nconst ComposerSendButton = withDefaults(TooltipIconButton, {\n  variant: \"default\",\n  className: \"aui-composer-send\",\n});\n\nnamespace ComposerSend {\n  export type Element = HTMLButtonElement;\n  export type Props = Partial<TooltipIconButton.Props>;\n}\n\nconst ComposerSend = forwardRef<ComposerSend.Element, ComposerSend.Props>(\n  (props, ref) => {\n    const {\n      strings: { composer: { send: { tooltip = \"Send\" } = {} } = {} } = {},\n    } = useThreadConfig();\n    return (\n      <ComposerPrimitive.Send asChild>\n        <ComposerSendButton tooltip={tooltip} {...props} ref={ref}>\n          {props.children ?? <SendHorizontalIcon />}\n        </ComposerSendButton>\n      </ComposerPrimitive.Send>\n    );\n  },\n);\n\nComposerSend.displayName = \"ComposerSend\";\n\nconst ComposerCancelButton = withDefaults(TooltipIconButton, {\n  variant: \"default\",\n  className: \"aui-composer-cancel\",\n});\n\nnamespace ComposerCancel {\n  export type Element = HTMLButtonElement;\n  export type Props = Partial<TooltipIconButton.Props>;\n}\n\nconst ComposerCancel = forwardRef<ComposerCancel.Element, ComposerCancel.Props>(\n  (props, ref) => {\n    const {\n      strings: { composer: { cancel: { tooltip = \"Cancel\" } = {} } = {} } = {},\n    } = useThreadConfig();\n    return (\n      <ComposerPrimitive.Cancel asChild>\n        <ComposerCancelButton tooltip={tooltip} {...props} ref={ref}>\n          {props.children ?? <CircleStopIcon />}\n        </ComposerCancelButton>\n      </ComposerPrimitive.Cancel>\n    );\n  },\n);\n\nComposerCancel.displayName = \"ComposerCancel\";\n\nconst exports = {\n  Root: ComposerRoot,\n  Input: ComposerInput,\n  Action: ComposerAction,\n  Send: ComposerSend,\n  Cancel: ComposerCancel,\n  AddAttachment: ComposerAddAttachment,\n  Attachments: ComposerAttachments,\n};\n\nexport default Object.assign(Composer, exports) as typeof Composer &\n  typeof exports;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 6067, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6073, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/ui/thread-welcome.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, forwardRef, type FC } from \"react\";\nimport { withDefaults } from \"./utils/withDefaults\";\nimport { Avatar } from \"./base/avatar\";\nimport { SuggestionConfig, useThreadConfig } from \"./thread-config\";\nimport { ThreadPrimitive } from \"../primitives\";\nimport { useThread } from \"../context\";\n\nconst ThreadWelcome: FC = () => {\n  return (\n    <ThreadWelcomeRoot>\n      <ThreadWelcomeCenter>\n        <ThreadWelcomeAvatar />\n        <ThreadWelcomeMessage />\n      </ThreadWelcomeCenter>\n      <ThreadWelcomeSuggestions />\n    </ThreadWelcomeRoot>\n  );\n};\n\nThreadWelcome.displayName = \"ThreadWelcome\";\n\nconst ThreadWelcomeRootStyled = withDefaults(\"div\", {\n  className: \"aui-thread-welcome-root\",\n});\n\nconst ThreadWelcomeCenter = withDefaults(\"div\", {\n  className: \"aui-thread-welcome-center\",\n});\n\nnamespace ThreadWelcomeRoot {\n  export type Element = HTMLDivElement;\n  export type Props = ComponentPropsWithoutRef<\"div\">;\n}\n\nconst ThreadWelcomeRoot = forwardRef<\n  ThreadWelcomeRoot.Element,\n  ThreadWelcomeRoot.Props\n>((props, ref) => {\n  return (\n    <ThreadPrimitive.Empty>\n      <ThreadWelcomeRootStyled {...props} ref={ref} />\n    </ThreadPrimitive.Empty>\n  );\n});\n\nThreadWelcomeRoot.displayName = \"ThreadWelcomeRoot\";\n\nconst ThreadWelcomeAvatar: FC = () => {\n  const { assistantAvatar: avatar = { fallback: \"A\" } } = useThreadConfig();\n  return <Avatar {...avatar} />;\n};\n\nconst ThreadWelcomeMessageStyled = withDefaults(\"p\", {\n  className: \"aui-thread-welcome-message\",\n});\n\nnamespace ThreadWelcomeMessage {\n  export type Element = HTMLParagraphElement;\n  export type Props = Omit<\n    ComponentPropsWithoutRef<typeof ThreadWelcomeMessageStyled>,\n    \"children\"\n  > & { message?: string | undefined };\n}\n\nconst ThreadWelcomeMessage = forwardRef<\n  ThreadWelcomeMessage.Element,\n  ThreadWelcomeMessage.Props\n>(({ message: messageProp, ...rest }, ref) => {\n  const {\n    welcome: { message } = {},\n    strings: {\n      welcome: { message: defaultMessage = \"How can I help you today?\" } = {},\n    } = {},\n  } = useThreadConfig();\n  return (\n    <ThreadWelcomeMessageStyled {...rest} ref={ref}>\n      {messageProp ?? message ?? defaultMessage}\n    </ThreadWelcomeMessageStyled>\n  );\n});\n\nThreadWelcomeMessage.displayName = \"ThreadWelcomeMessage\";\n\nconst ThreadWelcomeSuggestionContainer = withDefaults(\"div\", {\n  className: \"aui-thread-welcome-suggestion-container\",\n});\n\nconst ThreadWelcomeSuggestionStyled = withDefaults(ThreadPrimitive.Suggestion, {\n  className: \"aui-thread-welcome-suggestion\",\n});\n\nexport namespace ThreadWelcomeSuggestion {\n  export type Props = {\n    suggestion: SuggestionConfig;\n  };\n}\n\nconst ThreadWelcomeSuggestion: FC<ThreadWelcomeSuggestion.Props> = ({\n  suggestion: { text, prompt },\n}) => {\n  return (\n    <ThreadWelcomeSuggestionStyled prompt={prompt} method=\"replace\" autoSend>\n      <span className=\"aui-thread-welcome-suggestion-text\">\n        {text ?? prompt}\n      </span>\n    </ThreadWelcomeSuggestionStyled>\n  );\n};\n\nconst ThreadWelcomeSuggestions: FC = () => {\n  const suggestions2 = useThread((t) => t.suggestions);\n  const { welcome: { suggestions } = {} } = useThreadConfig();\n\n  const finalSuggestions = suggestions2.length ? suggestions2 : suggestions;\n\n  return (\n    <ThreadWelcomeSuggestionContainer>\n      {finalSuggestions?.map((suggestion, idx) => {\n        const key = `${suggestion.prompt}-${idx}`;\n        return <ThreadWelcomeSuggestion key={key} suggestion={suggestion} />;\n      })}\n    </ThreadWelcomeSuggestionContainer>\n  );\n};\n\nThreadWelcomeSuggestions.displayName = \"ThreadWelcomeSuggestions\";\n\nconst exports = {\n  Root: ThreadWelcomeRoot,\n  Center: ThreadWelcomeCenter,\n  Avatar: ThreadWelcomeAvatar,\n  Message: ThreadWelcomeMessage,\n  Suggestions: ThreadWelcomeSuggestions,\n  Suggestion: ThreadWelcomeSuggestion,\n};\n\nexport default Object.assign(ThreadWelcome, exports) as typeof ThreadWelcome &\n  typeof exports;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 6183, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6189, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/message/index.ts"],"sourcesContent":["export { MessagePrimitiveRoot as Root } from \"./MessageRoot\";\nexport { MessagePrimitiveIf as If } from \"./MessageIf\";\nexport { MessagePrimitiveContent as Content } from \"./MessageContent\";\nexport { MessagePrimitiveAttachments as Attachments } from \"./MessageAttachments\";\n"],"names":[],"mappings":"","ignoreList":[0]}},
    {"offset": {"line": 6197, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6211, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/message/MessageAttachments.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentType, type FC, memo, useMemo } from \"react\";\nimport { useMessage, useMessageRuntime } from \"../../context\";\nimport { useMessageAttachment } from \"../../context/react/AttachmentContext\";\nimport { AttachmentRuntimeProvider } from \"../../context/providers/AttachmentRuntimeProvider\";\nimport { CompleteAttachment } from \"../../types\";\n\nexport namespace MessagePrimitiveAttachments {\n  export type Props = {\n    components:\n      | {\n          Image?: ComponentType | undefined;\n          Document?: ComponentType | undefined;\n          File?: ComponentType | undefined;\n          Attachment?: ComponentType | undefined;\n        }\n      | undefined;\n  };\n}\n\nconst getComponent = (\n  components: MessagePrimitiveAttachments.Props[\"components\"],\n  attachment: CompleteAttachment,\n) => {\n  const type = attachment.type;\n  switch (type) {\n    case \"image\":\n      return components?.Image ?? components?.Attachment;\n    case \"document\":\n      return components?.Document ?? components?.Attachment;\n    case \"file\":\n      return components?.File ?? components?.Attachment;\n    default:\n      const _exhaustiveCheck: never = type;\n      throw new Error(`Unknown attachment type: ${_exhaustiveCheck}`);\n  }\n};\n\nconst AttachmentComponent: FC<{\n  components: MessagePrimitiveAttachments.Props[\"components\"];\n}> = ({ components }) => {\n  const Component = useMessageAttachment((a) => getComponent(components, a));\n\n  if (!Component) return null;\n  return <Component />;\n};\n\nconst MessageAttachmentImpl: FC<\n  MessagePrimitiveAttachments.Props & { attachmentIndex: number }\n> = ({ components, attachmentIndex }) => {\n  const messageRuntime = useMessageRuntime();\n  const runtime = useMemo(\n    () => messageRuntime.getAttachmentByIndex(attachmentIndex),\n    [messageRuntime, attachmentIndex],\n  );\n\n  return (\n    <AttachmentRuntimeProvider runtime={runtime}>\n      <AttachmentComponent components={components} />\n    </AttachmentRuntimeProvider>\n  );\n};\n\nconst MessageAttachment = memo(\n  MessageAttachmentImpl,\n  (prev, next) =>\n    prev.attachmentIndex === next.attachmentIndex &&\n    prev.components?.Image === next.components?.Image &&\n    prev.components?.Document === next.components?.Document &&\n    prev.components?.File === next.components?.File &&\n    prev.components?.Attachment === next.components?.Attachment,\n);\n\nexport const MessagePrimitiveAttachments: FC<\n  MessagePrimitiveAttachments.Props\n> = ({ components }) => {\n  const attachmentsCount = useMessage((message) => {\n    if (message.role !== \"user\") return 0;\n    return message.attachments.length;\n  });\n\n  return Array.from({ length: attachmentsCount }, (_, index) => (\n    <MessageAttachment\n      key={index}\n      attachmentIndex={index}\n      components={components}\n    />\n  ));\n};\n\nMessagePrimitiveAttachments.displayName = \"MessagePrimitive.Attachments\";\n"],"names":[],"mappings":";;;;AAEA,SAAiC,MAAM,eAAe;AA2C7C;AAzCT,SAAS,4BAA4B;AADrC,SAAS,YAAY,yBAAyB;AAE9C,SAAS,iCAAiC;;;;;;;AAgB1C,IAAM,eAAe,CACnB,YACA,eACG;IACH,MAAM,OAAO,WAAW,IAAA;IACxB,OAAQ,MAAM;QACZ,KAAK;YACH,OAAO,YAAY,SAAS,YAAY;QAC1C,KAAK;YACH,OAAO,YAAY,YAAY,YAAY;QAC7C,KAAK;YACH,OAAO,YAAY,QAAQ,YAAY;QACzC;YACE,MAAM,mBAA0B;YAChC,MAAM,IAAI,MAAM,CAAA,yBAAA,EAA4B,gBAAgB,EAAE;IAClE;AACF;AAEA,IAAM,sBAED,CAAC,EAAE,UAAA,CAAW,CAAA,KAAM;IACvB,MAAM,gBAAY,oNAAA,EAAqB,CAAC,IAAM,aAAa,YAAY,CAAC,CAAC;IAEzE,IAAI,CAAC,UAAW,CAAA,OAAO;IACvB,OAAO,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,WAAA,CAAA,CAAU;AACpB;AAEA,IAAM,wBAEF,CAAC,EAAE,UAAA,EAAY,eAAA,CAAgB,CAAA,KAAM;IACvC,MAAM,+MAAiB,oBAAA,CAAkB;IACzC,MAAM,oNAAU,UAAA,EACd,IAAM,eAAe,oBAAA,CAAqB,eAAe,GACzD;QAAC;QAAgB,eAAe;KAAA;IAGlC,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,2MAAC,4BAAA,EAAA;QAA0B;QACzB,UAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,qBAAA;YAAoB;QAAA,CAAwB;IAAA,CAC/C;AAEJ;AAEA,IAAM,8NAAoB,OAAA,EACxB,uBACA,CAAC,MAAM,OACL,KAAK,eAAA,KAAoB,KAAK,eAAA,IAC9B,KAAK,UAAA,EAAY,UAAU,KAAK,UAAA,EAAY,SAC5C,KAAK,UAAA,EAAY,aAAa,KAAK,UAAA,EAAY,YAC/C,KAAK,UAAA,EAAY,SAAS,KAAK,UAAA,EAAY,QAC3C,KAAK,UAAA,EAAY,eAAe,KAAK,UAAA,EAAY;AAG9C,IAAM,8BAET,CAAC,EAAE,UAAA,CAAW,CAAA,KAAM;IACtB,MAAM,iNAAmB,aAAA,EAAW,CAAC,YAAY;QAC/C,IAAI,QAAQ,IAAA,KAAS,OAAQ,CAAA,OAAO;QACpC,OAAO,QAAQ,WAAA,CAAY,MAAA;IAC7B,CAAC;IAED,OAAO,MAAM,IAAA,CAAK;QAAE,QAAQ;IAAiB,GAAG,CAAC,GAAG,QAClD,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,mBAAA;YAEC,iBAAiB;YACjB;QAAA,GAFK;AAKX;AAEA,4BAA4B,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 6274, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6280, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/contentPart/ContentPartText.tsx"],"sourcesContent":["\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport {\n  type ElementRef,\n  forwardRef,\n  ComponentPropsWithoutRef,\n  ElementType,\n} from \"react\";\nimport { useContentPartText } from \"../../primitive-hooks/contentPart/useContentPartText\";\nimport { useSmooth } from \"../../utils/smooth/useSmooth\";\n\nexport namespace ContentPartPrimitiveText {\n  export type Element = ElementRef<typeof Primitive.span>;\n  export type Props = Omit<\n    ComponentPropsWithoutRef<typeof Primitive.span>,\n    \"children\" | \"asChild\"\n  > & {\n    smooth?: boolean;\n    component?: ElementType;\n  };\n}\n\nexport const ContentPartPrimitiveText = forwardRef<\n  ContentPartPrimitiveText.Element,\n  ContentPartPrimitiveText.Props\n>(({ smooth = true, component: Component = \"span\", ...rest }, forwardedRef) => {\n  const { text, status } = useSmooth(useContentPartText(), smooth);\n\n  return (\n    <Component data-status={status.type} {...rest} ref={forwardedRef}>\n      {text}\n    </Component>\n  );\n});\n\nContentPartPrimitiveText.displayName = \"ContentPartPrimitive.Text\";\n"],"names":[],"mappings":";;;;AAGA;AA2BI;AApBJ,SAAS,iBAAiB;AAD1B,SAAS,0BAA0B;;;;;;AAc5B,IAAM,qOAA2B,aAAA,EAGtC,CAAC,EAAE,SAAS,IAAA,EAAM,WAAW,YAAY,MAAA,EAAQ,GAAG,KAAK,CAAA,EAAG,iBAAiB;IAC7E,MAAM,EAAE,IAAA,EAAM,MAAA,CAAO,CAAA,2LAAI,YAAA,GAAU,uOAAA,CAAmB,IAAG,MAAM;IAE/D,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,WAAA;QAAU,eAAa,OAAO,IAAA;QAAO,GAAG,IAAA;QAAM,KAAK;QACjD,UAAA;IAAA,CACH;AAEJ,CAAC;AAED,yBAAyB,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 6305, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6311, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/contentPart/ContentPartInProgress.tsx"],"sourcesContent":["import { FC, PropsWithChildren } from \"react\";\nimport { useContentPart } from \"../../context\";\n\nexport namespace ContentPartPrimitiveInProgress {\n  export type Props = PropsWithChildren;\n}\n\n// TODO should this be renamed to IsRunning?\nexport const ContentPartPrimitiveInProgress: FC<\n  ContentPartPrimitiveInProgress.Props\n> = ({ children }) => {\n  const isInProgress = useContentPart((c) => c.status.type === \"running\");\n\n  return isInProgress ? children : null;\n};\n\nContentPartPrimitiveInProgress.displayName = \"ContentPartPrimitive.InProgress\";\n"],"names":[],"mappings":";;;;AACA,SAAS,sBAAsB;;AAOxB,IAAM,iCAET,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;IACpB,MAAM,eAAe,mNAAA,EAAe,CAAC,IAAM,EAAE,MAAA,CAAO,IAAA,KAAS,SAAS;IAEtE,OAAO,eAAe,WAAW;AACnC;AAEA,+BAA+B,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 6324, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6330, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/contentPart/useContentPartImage.tsx"],"sourcesContent":["import { ContentPartState } from \"../../api/ContentPartRuntime\";\nimport { useContentPart } from \"../../context/react/ContentPartContext\";\nimport { ImageContentPart } from \"../../types\";\n\nexport const useContentPartImage = () => {\n  const image = useContentPart((c) => {\n    if (c.type !== \"image\")\n      throw new Error(\n        \"ContentPartImage can only be used inside image content parts.\",\n      );\n\n    return c as ContentPartState & ImageContentPart;\n  });\n\n  return image;\n};\n"],"names":[],"mappings":";;;;AACA,SAAS,sBAAsB;;AAGxB,IAAM,sBAAsB,MAAM;IACvC,MAAM,0MAAQ,iBAAA,EAAe,CAAC,MAAM;QAClC,IAAI,EAAE,IAAA,KAAS,SACb,MAAM,IAAI,MACR;QAGJ,OAAO;IACT,CAAC;IAED,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 6345, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6351, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/contentPart/ContentPartImage.tsx"],"sourcesContent":["import { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ElementRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\nimport { useContentPartImage } from \"../../primitive-hooks/contentPart/useContentPartImage\";\n\nexport namespace ContentPartPrimitiveImage {\n  export type Element = ElementRef<typeof Primitive.img>;\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.img>;\n}\n\nexport const ContentPartPrimitiveImage = forwardRef<\n  ContentPartPrimitiveImage.Element,\n  ContentPartPrimitiveImage.Props\n>((props, forwardedRef) => {\n  const { image } = useContentPartImage();\n  return <Primitive.img src={image} {...props} ref={forwardedRef} />;\n});\n\nContentPartPrimitiveImage.displayName = \"ContentPartPrimitive.Image\";\n"],"names":[],"mappings":";;;;AACA,SAA0B,kBAA4C;AAa7D;AAZT,SAAS,2BAA2B;AAFpC,SAAS,iBAAiB;;;;;AASnB,IAAM,sOAA4B,aAAA,EAGvC,CAAC,OAAO,iBAAiB;IACzB,MAAM,EAAE,KAAA,CAAM,CAAA,uNAAI,sBAAA,CAAoB;IACtC,OAAO,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,wKAAC,YAAA,CAAU,GAAA,EAAV;QAAc,KAAK;QAAQ,GAAG,KAAA;QAAO,KAAK;IAAA,CAAc;AAClE,CAAC;AAED,0BAA0B,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 6374, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6380, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/contentPart/useContentPartDisplay.tsx"],"sourcesContent":["import { ContentPartState } from \"../../api/ContentPartRuntime\";\nimport { useContentPart } from \"../../context/react/ContentPartContext\";\nimport { UIContentPart } from \"../../types\";\n\nexport const useContentPartDisplay = () => {\n  const display = useContentPart((c) => {\n    if (c.type !== \"ui\")\n      throw new Error(\n        \"This component can only be used inside ui content parts.\",\n      );\n\n    return c as ContentPartState & UIContentPart;\n  });\n\n  return display;\n};\n"],"names":[],"mappings":";;;;AACA,SAAS,sBAAsB;;AAGxB,IAAM,wBAAwB,MAAM;IACzC,MAAM,4MAAU,iBAAA,EAAe,CAAC,MAAM;QACpC,IAAI,EAAE,IAAA,KAAS,MACb,MAAM,IAAI,MACR;QAGJ,OAAO;IACT,CAAC;IAED,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 6395, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6401, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/contentPart/ContentPartDisplay.tsx"],"sourcesContent":["import type { FC } from \"react\";\nimport { useContentPartDisplay } from \"../../primitive-hooks/contentPart/useContentPartDisplay\";\n\nexport namespace ContentPartPrimitiveDisplay {\n  export type Props = Record<string, never>;\n}\n\nexport const ContentPartPrimitiveDisplay: FC<\n  ContentPartPrimitiveDisplay.Props\n> = () => {\n  const { display } = useContentPartDisplay();\n  return display ?? null;\n};\n\nContentPartPrimitiveDisplay.displayName = \"ContentPartPrimitive.Display\";\n"],"names":[],"mappings":";;;;AACA,SAAS,6BAA6B;;AAM/B,IAAM,8BAET,MAAM;IACR,MAAM,EAAE,OAAA,CAAQ,CAAA,yNAAI,wBAAA,CAAsB;IAC1C,OAAO,WAAW;AACpB;AAEA,4BAA4B,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 6414, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6420, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/context/providers/ContentPartRuntimeProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport { type FC, type PropsWithChildren, useEffect, useState } from \"react\";\nimport { create } from \"zustand\";\nimport { ContentPartContext } from \"../react/ContentPartContext\";\nimport type { ContentPartContextValue } from \"../react/ContentPartContext\";\nimport { writableStore } from \"../ReadonlyStore\";\nimport { ContentPartRuntime } from \"../../api/ContentPartRuntime\";\n\nexport namespace ContentPartRuntimeProvider {\n  export type Props = PropsWithChildren<{\n    runtime: ContentPartRuntime;\n  }>;\n}\n\nconst useContentPartRuntimeStore = (runtime: ContentPartRuntime) => {\n  const [store] = useState(() => create(() => runtime));\n\n  useEffect(() => {\n    writableStore(store).setState(runtime, true);\n  }, [runtime, store]);\n\n  return store;\n};\n\nexport const useContentPartStore = (runtime: ContentPartRuntime) => {\n  const [store] = useState(() => create(() => runtime.getState()));\n  useEffect(() => {\n    const updateState = () =>\n      writableStore(store).setState(runtime.getState(), true);\n    updateState();\n    return runtime.subscribe(updateState);\n  }, [runtime, store]);\n\n  return store;\n};\n\nexport const ContentPartRuntimeProvider: FC<\n  ContentPartRuntimeProvider.Props\n> = ({ runtime, children }) => {\n  const useContentPartRuntime = useContentPartRuntimeStore(runtime);\n  const useContentPart = useContentPartStore(runtime);\n  const [context] = useState<ContentPartContextValue>(() => {\n    return { useContentPartRuntime, useContentPart };\n  });\n\n  return (\n    <ContentPartContext.Provider value={context}>\n      {children}\n    </ContentPartContext.Provider>\n  );\n};\n"],"names":[],"mappings":";;;;;AAEA,SAA0C,WAAW,gBAAgB;AA6CjE;AA5CJ,SAAS,cAAc;AAGvB,SAAS,qBAAqB;AAF9B,SAAS,0BAA0B;;;;;;;AAWnC,IAAM,6BAA6B,CAAC,YAAgC;IAClE,MAAM,CAAC,KAAK,CAAA,6MAAI,WAAA,EAAS,IAAM,sJAAA,EAAO,IAAM,OAAO,CAAC;IAEpD,CAAA,GAAA,qMAAA,CAAA,YAAA,EAAU,MAAM;QACd,CAAA,GAAA,+KAAA,CAAA,gBAAA,EAAc,KAAK,EAAE,QAAA,CAAS,SAAS,IAAI;IAC7C,GAAG;QAAC;QAAS,KAAK;KAAC;IAEnB,OAAO;AACT;AAEO,IAAM,sBAAsB,CAAC,YAAgC;IAClE,MAAM,CAAC,KAAK,CAAA,6MAAI,WAAA,EAAS,iJAAM,SAAA,EAAO,IAAM,QAAQ,QAAA,CAAS,CAAC,CAAC;IAC/D,CAAA,GAAA,qMAAA,CAAA,YAAA,EAAU,MAAM;QACd,MAAM,cAAc,IAClB,oMAAA,EAAc,KAAK,EAAE,QAAA,CAAS,QAAQ,QAAA,CAAS,GAAG,IAAI;QACxD,YAAY;QACZ,OAAO,QAAQ,SAAA,CAAU,WAAW;IACtC,GAAG;QAAC;QAAS,KAAK;KAAC;IAEnB,OAAO;AACT;AAEO,IAAM,6BAET,CAAC,EAAE,OAAA,EAAS,QAAA,CAAS,CAAA,KAAM;IAC7B,MAAM,wBAAwB,2BAA2B,OAAO;IAChE,MAAM,iBAAiB,oBAAoB,OAAO;IAClD,MAAM,CAAC,OAAO,CAAA,6MAAI,WAAA,EAAkC,MAAM;QACxD,OAAO;YAAE;YAAuB;QAAe;IACjD,CAAC;IAED,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,gMAAC,qBAAA,CAAmB,QAAA,EAAnB;QAA4B,OAAO;QACjC;IAAA,CACH;AAEJ","ignoreList":[0]}},
    {"offset": {"line": 6474, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6480, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/message/MessageContent.tsx"],"sourcesContent":["\"use client\";\n\nimport { type ComponentType, type FC, memo, useMemo } from \"react\";\nimport {\n  useContentPart,\n  useContentPartRuntime,\n  useToolUIs,\n} from \"../../context\";\nimport {\n  useMessage,\n  useMessageRuntime,\n} from \"../../context/react/MessageContext\";\nimport { ContentPartRuntimeProvider } from \"../../context/providers/ContentPartRuntimeProvider\";\nimport { ContentPartPrimitiveText } from \"../contentPart/ContentPartText\";\nimport { ContentPartPrimitiveImage } from \"../contentPart/ContentPartImage\";\nimport { ContentPartPrimitiveDisplay } from \"../contentPart/ContentPartDisplay\";\nimport type {\n  Unstable_AudioContentPartComponent,\n  EmptyContentPartComponent,\n  ImageContentPartComponent,\n  TextContentPartComponent,\n  ToolCallContentPartComponent,\n  ToolCallContentPartProps,\n  UIContentPartComponent,\n} from \"../../types/ContentPartComponentTypes\";\nimport { ContentPartPrimitiveInProgress } from \"../contentPart/ContentPartInProgress\";\nimport { EMPTY_CONTENT_SYMBOL } from \"../../api/MessageRuntime\";\n\nexport namespace MessagePrimitiveContent {\n  export type Props = {\n    components?:\n      | {\n          Empty?: EmptyContentPartComponent | undefined;\n          Text?: TextContentPartComponent | undefined;\n          Image?: ImageContentPartComponent | undefined;\n          Unstable_Audio?: Unstable_AudioContentPartComponent | undefined;\n          UI?: UIContentPartComponent | undefined;\n          tools?:\n            | {\n                by_name?:\n                  | Record<string, ToolCallContentPartComponent | undefined>\n                  | undefined;\n                Fallback?: ComponentType<ToolCallContentPartProps> | undefined;\n              }\n            | {\n                Override: ComponentType<ToolCallContentPartProps>;\n              }\n            | undefined;\n        }\n      | undefined;\n  };\n}\n\nconst ToolUIDisplay = ({\n  Fallback,\n  ...props\n}: {\n  Fallback: ToolCallContentPartComponent | undefined;\n} & ToolCallContentPartProps) => {\n  const Render = useToolUIs((s) => s.getToolUI(props.toolName)) ?? Fallback;\n  if (!Render) return null;\n  return <Render {...props} />;\n};\n\nconst defaultComponents = {\n  Text: () => (\n    <p style={{ whiteSpace: \"pre-line\" }}>\n      <ContentPartPrimitiveText />\n      <ContentPartPrimitiveInProgress>\n        <span style={{ fontFamily: \"revert\" }}>{\" \\u25CF\"}</span>\n      </ContentPartPrimitiveInProgress>\n    </p>\n  ),\n  Image: () => <ContentPartPrimitiveImage />,\n  Unstable_Audio: () => null,\n  UI: () => <ContentPartPrimitiveDisplay />,\n} satisfies MessagePrimitiveContent.Props[\"components\"];\n\ntype MessageContentPartComponentProps = {\n  components: MessagePrimitiveContent.Props[\"components\"];\n};\n\nconst MessageContentPartComponent: FC<MessageContentPartComponentProps> = ({\n  components: {\n    Text = defaultComponents.Text,\n    Empty,\n    Image = defaultComponents.Image,\n    UI = defaultComponents.UI,\n    Unstable_Audio: Audio = defaultComponents.Unstable_Audio,\n    tools = {},\n  } = {},\n}) => {\n  const contentPartRuntime = useContentPartRuntime();\n\n  const part = useContentPart();\n\n  const type = part.type;\n  if (type === \"tool-call\") {\n    const addResult = (result: any) => contentPartRuntime.addToolResult(result);\n    if (\"Override\" in tools)\n      return <tools.Override {...part} addResult={addResult} />;\n    const Tool = tools.by_name?.[part.toolName] ?? tools.Fallback;\n    return <ToolUIDisplay {...part} Fallback={Tool} addResult={addResult} />;\n  }\n\n  if (part.status.type === \"requires-action\")\n    throw new Error(\"Encountered unexpected requires-action status\");\n\n  switch (type) {\n    case \"text\":\n      if ((part as any)[EMPTY_CONTENT_SYMBOL] && !!Empty) {\n        return <Empty status={part.status} />;\n      }\n\n      return <Text {...part} />;\n\n    case \"image\":\n      // eslint-disable-next-line jsx-a11y/alt-text\n      return <Image {...part} />;\n\n    case \"audio\":\n      return <Audio {...part} />;\n\n    case \"ui\":\n      return <UI {...part} />;\n\n    default:\n      const unhandledType: never = type;\n      throw new Error(`Unknown content part type: ${unhandledType}`);\n  }\n};\n\ntype MessageContentPartProps = {\n  partIndex: number;\n  components: MessagePrimitiveContent.Props[\"components\"];\n};\n\nconst MessageContentPartImpl: FC<MessageContentPartProps> = ({\n  partIndex,\n  components,\n}) => {\n  const messageRuntime = useMessageRuntime();\n  const runtime = useMemo(\n    () => messageRuntime.getContentPartByIndex(partIndex),\n    [messageRuntime, partIndex],\n  );\n\n  return (\n    <ContentPartRuntimeProvider runtime={runtime}>\n      <MessageContentPartComponent components={components} />\n    </ContentPartRuntimeProvider>\n  );\n};\n\nconst MessageContentPart = memo(\n  MessageContentPartImpl,\n  (prev, next) =>\n    prev.partIndex === next.partIndex &&\n    prev.components?.Text === next.components?.Text &&\n    prev.components?.Image === next.components?.Image &&\n    prev.components?.Unstable_Audio === next.components?.Unstable_Audio &&\n    prev.components?.UI === next.components?.UI &&\n    prev.components?.tools === next.components?.tools,\n);\n\nexport const MessagePrimitiveContent: FC<MessagePrimitiveContent.Props> = ({\n  components,\n}) => {\n  const contentLength = useMessage((s) => s.content.length) || 1;\n\n  return Array.from({ length: contentLength }, (_, index) => (\n    <MessageContentPart key={index} partIndex={index} components={components} />\n  ));\n};\n\nMessagePrimitiveContent.displayName = \"MessagePrimitive.Content\";\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 6605, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6611, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/message/useMessageIf.tsx"],"sourcesContent":["\"use client\";\nimport {\n  useMessageRuntime,\n  useMessageUtilsStore,\n} from \"../../context/react/MessageContext\";\nimport type { RequireAtLeastOne } from \"../../utils/RequireAtLeastOne\";\nimport { useCombinedStore } from \"../../utils/combined/useCombinedStore\";\n\ntype MessageIfFilters = {\n  user: boolean | undefined;\n  assistant: boolean | undefined;\n  system: boolean | undefined;\n  hasBranches: boolean | undefined;\n  copied: boolean | undefined;\n  lastOrHover: boolean | undefined;\n  speaking: boolean | undefined;\n  hasAttachments: boolean | undefined;\n  hasContent: boolean | undefined;\n  submittedFeedback: \"positive\" | \"negative\" | null | undefined;\n};\nexport type UseMessageIfProps = RequireAtLeastOne<MessageIfFilters>;\n\nexport const useMessageIf = (props: UseMessageIfProps) => {\n  const messageRuntime = useMessageRuntime();\n  const messageUtilsStore = useMessageUtilsStore();\n\n  return useCombinedStore(\n    [messageRuntime, messageUtilsStore],\n    (\n      {\n        role,\n        attachments,\n        content,\n        branchCount,\n        isLast,\n        speech,\n        submittedFeedback,\n      },\n      { isCopied, isHovering },\n    ) => {\n      if (props.hasBranches === true && branchCount < 2) return false;\n\n      if (props.user && role !== \"user\") return false;\n      if (props.assistant && role !== \"assistant\") return false;\n      if (props.system && role !== \"system\") return false;\n\n      if (props.lastOrHover === true && !isHovering && !isLast) return false;\n\n      if (props.copied === true && !isCopied) return false;\n      if (props.copied === false && isCopied) return false;\n\n      if (props.speaking === true && speech == null) return false;\n      if (props.speaking === false && speech != null) return false;\n\n      if (\n        props.hasAttachments === true &&\n        (role !== \"user\" || !attachments.length)\n      )\n        return false;\n      if (\n        props.hasAttachments === false &&\n        role === \"user\" &&\n        !!attachments.length\n      )\n        return false;\n\n      if (props.hasContent === true && content.length === 0) return false;\n      if (props.hasContent === false && content.length > 0) return false;\n\n      if (\n        props.submittedFeedback !== undefined &&\n        (submittedFeedback?.type ?? null) !== props.submittedFeedback\n      )\n        return false;\n\n      return true;\n    },\n  );\n};\n"],"names":[],"mappings":";;;;AACA;AAKA,SAAS,wBAAwB;;;;AAgB1B,IAAM,eAAe,CAAC,UAA6B;IACxD,MAAM,+MAAiB,oBAAA,CAAkB;IACzC,MAAM,kNAAoB,uBAAA,CAAqB;IAE/C,OAAO,oNAAA,EACL;QAAC;QAAgB,iBAAiB;KAAA,EAClC,CACE,EACE,IAAA,EACA,WAAA,EACA,OAAA,EACA,WAAA,EACA,MAAA,EACA,MAAA,EACA,iBAAA,EACF,EACA,EAAE,QAAA,EAAU,UAAA,CAAW,CAAA,KACpB;QACH,IAAI,MAAM,WAAA,KAAgB,QAAQ,cAAc,EAAG,CAAA,OAAO;QAE1D,IAAI,MAAM,IAAA,IAAQ,SAAS,OAAQ,CAAA,OAAO;QAC1C,IAAI,MAAM,SAAA,IAAa,SAAS,YAAa,CAAA,OAAO;QACpD,IAAI,MAAM,MAAA,IAAU,SAAS,SAAU,CAAA,OAAO;QAE9C,IAAI,MAAM,WAAA,KAAgB,QAAQ,CAAC,cAAc,CAAC,OAAQ,CAAA,OAAO;QAEjE,IAAI,MAAM,MAAA,KAAW,QAAQ,CAAC,SAAU,CAAA,OAAO;QAC/C,IAAI,MAAM,MAAA,KAAW,SAAS,SAAU,CAAA,OAAO;QAE/C,IAAI,MAAM,QAAA,KAAa,QAAQ,UAAU,KAAM,CAAA,OAAO;QACtD,IAAI,MAAM,QAAA,KAAa,SAAS,UAAU,KAAM,CAAA,OAAO;QAEvD,IACE,MAAM,cAAA,KAAmB,QAAA,CACxB,SAAS,UAAU,CAAC,YAAY,MAAA,GAEjC,OAAO;QACT,IACE,MAAM,cAAA,KAAmB,SACzB,SAAS,UACT,CAAC,CAAC,YAAY,MAAA,EAEd,OAAO;QAET,IAAI,MAAM,UAAA,KAAe,QAAQ,QAAQ,MAAA,KAAW,EAAG,CAAA,OAAO;QAC9D,IAAI,MAAM,UAAA,KAAe,SAAS,QAAQ,MAAA,GAAS,EAAG,CAAA,OAAO;QAE7D,IACE,MAAM,iBAAA,KAAsB,KAAA,KAAA,CAC3B,mBAAmB,QAAQ,IAAA,MAAU,MAAM,iBAAA,EAE5C,OAAO;QAET,OAAO;IACT;AAEJ","ignoreList":[0]}},
    {"offset": {"line": 6646, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6652, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/message/MessageIf.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC, PropsWithChildren } from \"react\";\nimport {\n  UseMessageIfProps,\n  useMessageIf,\n} from \"../../primitive-hooks/message/useMessageIf\";\n\nexport namespace MessagePrimitiveIf {\n  export type Props = PropsWithChildren<UseMessageIfProps>;\n}\n\nexport const MessagePrimitiveIf: FC<MessagePrimitiveIf.Props> = ({\n  children,\n  ...query\n}) => {\n  const result = useMessageIf(query);\n  return result ? children : null;\n};\n\nMessagePrimitiveIf.displayName = \"MessagePrimitive.If\";\n"],"names":[],"mappings":";;;;AAGA;;;AASO,IAAM,qBAAmD,CAAC,EAC/D,QAAA,EACA,GAAG,OACL,KAAM;IACJ,MAAM,kNAAS,eAAA,EAAa,KAAK;IACjC,OAAO,SAAS,WAAW;AAC7B;AAEA,mBAAmB,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 6666, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6672, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/message/MessageRoot.tsx"],"sourcesContent":["\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport {\n  type ElementRef,\n  forwardRef,\n  ComponentPropsWithoutRef,\n  useCallback,\n} from \"react\";\nimport { useMessageUtilsStore } from \"../../context/react/MessageContext\";\nimport { useManagedRef } from \"../../utils/hooks/useManagedRef\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\n\nconst useIsHoveringRef = () => {\n  const messageUtilsStore = useMessageUtilsStore();\n  const callbackRef = useCallback(\n    (el: HTMLElement) => {\n      const setIsHovering = messageUtilsStore.getState().setIsHovering;\n\n      const handleMouseEnter = () => {\n        setIsHovering(true);\n      };\n      const handleMouseLeave = () => {\n        setIsHovering(false);\n      };\n\n      el.addEventListener(\"mouseenter\", handleMouseEnter);\n      el.addEventListener(\"mouseleave\", handleMouseLeave);\n\n      return () => {\n        el.removeEventListener(\"mouseenter\", handleMouseEnter);\n        el.removeEventListener(\"mouseleave\", handleMouseLeave);\n        setIsHovering(false);\n      };\n    },\n    [messageUtilsStore],\n  );\n\n  return useManagedRef(callbackRef);\n};\n\nexport namespace MessagePrimitiveRoot {\n  export type Element = ElementRef<typeof Primitive.div>;\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.div>;\n}\n\nexport const MessagePrimitiveRoot = forwardRef<\n  MessagePrimitiveRoot.Element,\n  MessagePrimitiveRoot.Props\n>((props, forwardRef) => {\n  const isHoveringRef = useIsHoveringRef();\n  const ref = useComposedRefs<HTMLDivElement>(forwardRef, isHoveringRef);\n\n  return <Primitive.div {...props} ref={ref} />;\n});\n\nMessagePrimitiveRoot.displayName = \"MessagePrimitive.Root\";\n"],"names":["forwardRef"],"mappings":";;;AAGA;AAkDS;AA5CT,SAAS,4BAA4B;AACrC,SAAS,qBAAqB;AAC9B,SAAS,uBAAuB;;AAThC,SAAS,iBAAiB;;;;;;;;AAW1B,IAAM,mBAAmB,MAAM;IAC7B,MAAM,kNAAoB,uBAAA,CAAqB;IAC/C,MAAM,eAAc,uNAAA,EAClB,CAAC,OAAoB;QACnB,MAAM,gBAAgB,kBAAkB,QAAA,CAAS,EAAE,aAAA;QAEnD,MAAM,mBAAmB,MAAM;YAC7B,cAAc,IAAI;QACpB;QACA,MAAM,mBAAmB,MAAM;YAC7B,cAAc,KAAK;QACrB;QAEA,GAAG,gBAAA,CAAiB,cAAc,gBAAgB;QAClD,GAAG,gBAAA,CAAiB,cAAc,gBAAgB;QAElD,OAAO,MAAM;YACX,GAAG,mBAAA,CAAoB,cAAc,gBAAgB;YACrD,GAAG,mBAAA,CAAoB,cAAc,gBAAgB;YACrD,cAAc,KAAK;QACrB;IACF,GACA;QAAC,iBAAiB;KAAA;IAGpB,OAAO,2MAAA,EAAc,WAAW;AAClC;AAOO,IAAM,iOAAuB,aAAA,EAGlC,CAAC,OAAOA,gBAAe;IACvB,MAAM,gBAAgB,iBAAiB;IACvC,MAAM,sLAAM,kBAAA,EAAgCA,aAAY,aAAa;IAErE,OAAO,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,wKAAC,YAAA,CAAU,GAAA,EAAV;QAAe,GAAG,KAAA;QAAO;IAAA,CAAU;AAC7C,CAAC;AAED,qBAAqB,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 6722, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6769, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/actionBar/index.ts"],"sourcesContent":["export { ActionBarPrimitiveRoot as Root } from \"./ActionBarRoot\";\nexport { ActionBarPrimitiveCopy as Copy } from \"./ActionBarCopy\";\nexport { ActionBarPrimitiveReload as Reload } from \"./ActionBarReload\";\nexport { ActionBarPrimitiveEdit as Edit } from \"./ActionBarEdit\";\nexport { ActionBarPrimitiveSpeak as Speak } from \"./ActionBarSpeak\";\nexport { ActionBarPrimitiveStopSpeaking as StopSpeaking } from \"./ActionBarStopSpeaking\";\nexport { ActionBarPrimitiveFeedbackPositive as FeedbackPositive } from \"./ActionBarFeedbackPositive\";\nexport { ActionBarPrimitiveFeedbackNegative as FeedbackNegative } from \"./ActionBarFeedbackNegative\";\n"],"names":[],"mappings":"","ignoreList":[0]}},
    {"offset": {"line": 6781, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6795, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/actionBar/useActionBarCopy.tsx"],"sourcesContent":["import { useCallback } from \"react\";\nimport {\n  useMessage,\n  useMessageRuntime,\n  useMessageUtils,\n} from \"../../context/react/MessageContext\";\nimport { useComposerRuntime } from \"../../context\";\n\nexport type UseActionBarCopyProps = {\n  copiedDuration?: number | undefined;\n};\n\nexport const useActionBarCopy = ({\n  copiedDuration = 3000,\n}: UseActionBarCopyProps = {}) => {\n  const messageRuntime = useMessageRuntime();\n  const composerRuntime = useComposerRuntime();\n  const setIsCopied = useMessageUtils((s) => s.setIsCopied);\n  const hasCopyableContent = useMessage((message) => {\n    return (\n      (message.role !== \"assistant\" || message.status.type !== \"running\") &&\n      message.content.some((c) => c.type === \"text\" && c.text.length > 0)\n    );\n  });\n\n  const callback = useCallback(() => {\n    const { isEditing, text: composerValue } = composerRuntime.getState();\n\n    const valueToCopy = isEditing\n      ? composerValue\n      : messageRuntime.unstable_getCopyText();\n\n    navigator.clipboard.writeText(valueToCopy).then(() => {\n      setIsCopied(true);\n      setTimeout(() => setIsCopied(false), copiedDuration);\n    });\n  }, [messageRuntime, setIsCopied, composerRuntime, copiedDuration]);\n\n  if (!hasCopyableContent) return null;\n  return callback;\n};\n"],"names":[],"mappings":";;;;AAAA,SAAS,mBAAmB;AAC5B;AAKA,SAAS,0BAA0B;;;;AAM5B,IAAM,mBAAmB,CAAC,EAC/B,iBAAiB,GAAA,EACnB,GAA2B,CAAC,CAAA,KAAM;IAChC,MAAM,qBAAiB,8MAAA,CAAkB;IACzC,MAAM,iNAAkB,qBAAA,CAAmB;IAC3C,MAAM,4MAAc,kBAAA,EAAgB,CAAC,IAAM,EAAE,WAAW;IACxD,MAAM,mNAAqB,aAAA,EAAW,CAAC,YAAY;QACjD,OAAA,CACG,QAAQ,IAAA,KAAS,eAAe,QAAQ,MAAA,CAAO,IAAA,KAAS,SAAA,KACzD,QAAQ,OAAA,CAAQ,IAAA,CAAK,CAAC,IAAM,EAAE,IAAA,KAAS,UAAU,EAAE,IAAA,CAAK,MAAA,GAAS,CAAC;IAEtE,CAAC;IAED,MAAM,qNAAW,cAAA,EAAY,MAAM;QACjC,MAAM,EAAE,SAAA,EAAW,MAAM,aAAA,CAAc,CAAA,GAAI,gBAAgB,QAAA,CAAS;QAEpE,MAAM,cAAc,YAChB,gBACA,eAAe,oBAAA,CAAqB;QAExC,UAAU,SAAA,CAAU,SAAA,CAAU,WAAW,EAAE,IAAA,CAAK,MAAM;YACpD,YAAY,IAAI;YAChB,WAAW,IAAM,YAAY,KAAK,GAAG,cAAc;QACrD,CAAC;IACH,GAAG;QAAC;QAAgB;QAAa;QAAiB,cAAc;KAAC;IAEjE,IAAI,CAAC,mBAAoB,CAAA,OAAO;IAChC,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 6830, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6836, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/actionBar/ActionBarCopy.tsx"],"sourcesContent":["\"use client\";\n\nimport { forwardRef } from \"react\";\nimport { useActionBarCopy } from \"../../primitive-hooks/actionBar/useActionBarCopy\";\nimport { ActionButtonProps } from \"../../utils/createActionButton\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { useMessageUtils } from \"../../context\";\n\nexport namespace ActionBarPrimitiveCopy {\n  export type Element = HTMLButtonElement;\n  export type Props = ActionButtonProps<typeof useActionBarCopy>;\n}\n\nexport const ActionBarPrimitiveCopy = forwardRef<\n  ActionBarPrimitiveCopy.Element,\n  ActionBarPrimitiveCopy.Props\n>(({ copiedDuration, onClick, disabled, ...props }, forwardedRef) => {\n  const isCopied = useMessageUtils((u) => u.isCopied);\n  const callback = useActionBarCopy({ copiedDuration });\n  return (\n    <Primitive.button\n      type=\"button\"\n      {...(isCopied ? { \"data-copied\": \"true\" } : {})}\n      {...props}\n      ref={forwardedRef}\n      disabled={disabled || !callback}\n      onClick={composeEventHandlers(onClick, () => {\n        callback?.();\n      })}\n    />\n  );\n});\n\nActionBarPrimitiveCopy.displayName = \"ActionBarPrimitive.Copy\";\n"],"names":[],"mappings":";;;;AAEA,SAAS,kBAAkB;AAmBvB;AAdJ,SAAS,uBAAuB;AAJhC,SAAS,wBAAwB;AAGjC,SAAS,iBAAiB;AAD1B,SAAS,4BAA4B;;;;;;;;AAS9B,IAAM,mOAAyB,aAAA,EAGpC,CAAC,EAAE,cAAA,EAAgB,OAAA,EAAS,QAAA,EAAU,GAAG,MAAM,CAAA,EAAG,iBAAiB;IACnE,MAAM,yMAAW,kBAAA,EAAgB,CAAC,IAAM,EAAE,QAAQ;IAClD,MAAM,0NAAW,mBAAA,EAAiB;QAAE;IAAe,CAAC;IACpD,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,wKAAC,YAAA,CAAU,MAAA,EAAV;QACC,MAAK;QACJ,GAAI,WAAW;YAAE,eAAe;QAAO,IAAI,CAAC,CAAA;QAC5C,GAAG,KAAA;QACJ,KAAK;QACL,UAAU,YAAY,CAAC;QACvB,0KAAS,uBAAA,EAAqB,SAAS,MAAM;YAC3C,WAAW;QACb,CAAC;IAAA;AAGP,CAAC;AAED,uBAAuB,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 6874, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6880, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/actionBar/useActionBarEdit.tsx"],"sourcesContent":["import { useCallback } from \"react\";\nimport { useEditComposer, useMessageRuntime } from \"../../context\";\n\nexport const useActionBarEdit = () => {\n  const messageRuntime = useMessageRuntime();\n  const disabled = useEditComposer((c) => c.isEditing);\n\n  const callback = useCallback(() => {\n    messageRuntime.composer.beginEdit();\n  }, [messageRuntime]);\n\n  if (disabled) return null;\n  return callback;\n};\n"],"names":[],"mappings":";;;;AAAA,SAAS,mBAAmB;AAC5B,SAAS,iBAAiB,yBAAyB;;;AAE5C,IAAM,mBAAmB,MAAM;IACpC,MAAM,+MAAiB,oBAAA,CAAkB;IACzC,MAAM,yMAAW,kBAAA,EAAgB,CAAC,IAAM,EAAE,SAAS;IAEnD,MAAM,qNAAW,cAAA,EAAY,MAAM;QACjC,eAAe,QAAA,CAAS,SAAA,CAAU;IACpC,GAAG;QAAC,cAAc;KAAC;IAEnB,IAAI,SAAU,CAAA,OAAO;IACrB,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 6901, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6907, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/actionBar/ActionBarEdit.tsx"],"sourcesContent":["\"use client\";\n\nimport { useActionBarEdit } from \"../../primitive-hooks/actionBar/useActionBarEdit\";\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\n\nexport namespace ActionBarPrimitiveEdit {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useActionBarEdit>;\n}\n\nexport const ActionBarPrimitiveEdit = createActionButton(\n  \"ActionBarPrimitive.Edit\",\n  useActionBarEdit,\n);\n"],"names":[],"mappings":";;;AAGA;;AADA,SAAS,wBAAwB;;;;AAY1B,IAAM,gNAAyB,qBAAA,EACpC,sOACA,mBAAA","ignoreList":[0]}},
    {"offset": {"line": 6919, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6925, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/actionBar/useActionBarFeedbackNegative.tsx"],"sourcesContent":["import { useCallback } from \"react\";\nimport { useMessageRuntime } from \"../../context\";\n\nexport const useActionBarFeedbackNegative = () => {\n  const messageRuntime = useMessageRuntime();\n\n  const callback = useCallback(() => {\n    messageRuntime.submitFeedback({ type: \"negative\" });\n  }, [messageRuntime]);\n\n  return callback;\n};\n"],"names":[],"mappings":";;;;AAAA,SAAS,mBAAmB;AAC5B,SAAS,yBAAyB;;;AAE3B,IAAM,+BAA+B,MAAM;IAChD,MAAM,+MAAiB,oBAAA,CAAkB;IAEzC,MAAM,qNAAW,cAAA,EAAY,MAAM;QACjC,eAAe,cAAA,CAAe;YAAE,MAAM;QAAW,CAAC;IACpD,GAAG;QAAC,cAAc;KAAC;IAEnB,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 6946, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6952, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/actionBar/ActionBarFeedbackNegative.tsx"],"sourcesContent":["\"use client\";\n\nimport { forwardRef } from \"react\";\nimport { useActionBarFeedbackNegative } from \"../../primitive-hooks/actionBar/useActionBarFeedbackNegative\";\nimport { ActionButtonProps } from \"../../utils/createActionButton\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useMessage } from \"../../context\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\n\nexport namespace ActionBarPrimitiveFeedbackNegative {\n  export type Element = HTMLButtonElement;\n  export type Props = ActionButtonProps<typeof useActionBarFeedbackNegative>;\n}\n\nexport const ActionBarPrimitiveFeedbackNegative = forwardRef<\n  ActionBarPrimitiveFeedbackNegative.Element,\n  ActionBarPrimitiveFeedbackNegative.Props\n>(({ onClick, disabled, ...props }, forwardedRef) => {\n  const isSubmitted = useMessage(\n    (u) => u.submittedFeedback?.type === \"negative\",\n  );\n  const callback = useActionBarFeedbackNegative();\n  return (\n    <Primitive.button\n      type=\"button\"\n      {...(isSubmitted ? { \"data-submitted\": \"true\" } : {})}\n      {...props}\n      ref={forwardedRef}\n      disabled={disabled || !callback}\n      onClick={composeEventHandlers(onClick, () => {\n        callback?.();\n      })}\n    />\n  );\n});\n\nActionBarPrimitiveFeedbackNegative.displayName =\n  \"ActionBarPrimitive.FeedbackNegative\";\n"],"names":[],"mappings":";;;;AAEA,SAAS,kBAAkB;AAqBvB;AAjBJ,SAAS,kBAAkB;AAH3B,SAAS,oCAAoC;AAI7C,SAAS,iBAAiB;AAF1B,SAAS,4BAA4B;;;;;;;;AAS9B,IAAM,+OAAqC,aAAA,EAGhD,CAAC,EAAE,OAAA,EAAS,QAAA,EAAU,GAAG,MAAM,CAAA,EAAG,iBAAiB;IACnD,MAAM,cAAc,2MAAA,EAClB,CAAC,IAAM,EAAE,iBAAA,EAAmB,SAAS;IAEvC,MAAM,sOAAW,+BAAA,CAA6B;IAC9C,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,wKAAC,YAAA,CAAU,MAAA,EAAV;QACC,MAAK;QACJ,GAAI,cAAc;YAAE,kBAAkB;QAAO,IAAI,CAAC,CAAA;QAClD,GAAG,KAAA;QACJ,KAAK;QACL,UAAU,YAAY,CAAC;QACvB,0KAAS,uBAAA,EAAqB,SAAS,MAAM;YAC3C,WAAW;QACb,CAAC;IAAA;AAGP,CAAC;AAED,mCAAmC,WAAA,GACjC","ignoreList":[0]}},
    {"offset": {"line": 6988, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6994, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/actionBar/useActionBarFeedbackPositive.tsx"],"sourcesContent":["import { useCallback } from \"react\";\nimport { useMessageRuntime } from \"../../context\";\n\nexport const useActionBarFeedbackPositive = () => {\n  const messageRuntime = useMessageRuntime();\n\n  const callback = useCallback(() => {\n    messageRuntime.submitFeedback({ type: \"positive\" });\n  }, [messageRuntime]);\n\n  return callback;\n};\n"],"names":[],"mappings":";;;;AAAA,SAAS,mBAAmB;AAC5B,SAAS,yBAAyB;;;AAE3B,IAAM,+BAA+B,MAAM;IAChD,MAAM,+MAAiB,oBAAA,CAAkB;IAEzC,MAAM,qNAAW,cAAA,EAAY,MAAM;QACjC,eAAe,cAAA,CAAe;YAAE,MAAM;QAAW,CAAC;IACpD,GAAG;QAAC,cAAc;KAAC;IAEnB,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 7015, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7021, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/actionBar/ActionBarFeedbackPositive.tsx"],"sourcesContent":["\"use client\";\n\nimport { forwardRef } from \"react\";\nimport { useActionBarFeedbackPositive } from \"../../primitive-hooks/actionBar/useActionBarFeedbackPositive\";\nimport { ActionButtonProps } from \"../../utils/createActionButton\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useMessage } from \"../../context\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\n\nexport namespace ActionBarPrimitiveFeedbackPositive {\n  export type Element = HTMLButtonElement;\n  export type Props = ActionButtonProps<typeof useActionBarFeedbackPositive>;\n}\n\nexport const ActionBarPrimitiveFeedbackPositive = forwardRef<\n  ActionBarPrimitiveFeedbackPositive.Element,\n  ActionBarPrimitiveFeedbackPositive.Props\n>(({ onClick, disabled, ...props }, forwardedRef) => {\n  const isSubmitted = useMessage(\n    (u) => u.submittedFeedback?.type === \"positive\",\n  );\n  const callback = useActionBarFeedbackPositive();\n  return (\n    <Primitive.button\n      type=\"button\"\n      {...(isSubmitted ? { \"data-submitted\": \"true\" } : {})}\n      {...props}\n      ref={forwardedRef}\n      disabled={disabled || !callback}\n      onClick={composeEventHandlers(onClick, () => {\n        callback?.();\n      })}\n    />\n  );\n});\n\nActionBarPrimitiveFeedbackPositive.displayName =\n  \"ActionBarPrimitive.FeedbackPositive\";\n"],"names":[],"mappings":";;;;AAEA,SAAS,kBAAkB;AAqBvB;AAjBJ,SAAS,kBAAkB;AAH3B,SAAS,oCAAoC;AAI7C,SAAS,iBAAiB;AAF1B,SAAS,4BAA4B;;;;;;;;AAS9B,IAAM,+OAAqC,aAAA,EAGhD,CAAC,EAAE,OAAA,EAAS,QAAA,EAAU,GAAG,MAAM,CAAA,EAAG,iBAAiB;IACnD,MAAM,cAAc,2MAAA,EAClB,CAAC,IAAM,EAAE,iBAAA,EAAmB,SAAS;IAEvC,MAAM,sOAAW,+BAAA,CAA6B;IAC9C,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,wKAAC,YAAA,CAAU,MAAA,EAAV;QACC,MAAK;QACJ,GAAI,cAAc;YAAE,kBAAkB;QAAO,IAAI,CAAC,CAAA;QAClD,GAAG,KAAA;QACJ,KAAK;QACL,UAAU,YAAY,CAAC;QACvB,0KAAS,uBAAA,EAAqB,SAAS,MAAM;YAC3C,WAAW;QACb,CAAC;IAAA;AAGP,CAAC;AAED,mCAAmC,WAAA,GACjC","ignoreList":[0]}},
    {"offset": {"line": 7057, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7063, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/actionBar/useActionBarReload.tsx"],"sourcesContent":["import { useCallback } from \"react\";\nimport { useMessageRuntime } from \"../../context/react/MessageContext\";\nimport { useThreadRuntime } from \"../../context/react/ThreadContext\";\nimport { useCombinedStore } from \"../../utils/combined/useCombinedStore\";\n\nexport const useActionBarReload = () => {\n  const messageRuntime = useMessageRuntime();\n  const threadRuntime = useThreadRuntime();\n\n  const disabled = useCombinedStore(\n    [threadRuntime, messageRuntime],\n    (t, m) => t.isRunning || t.isDisabled || m.role !== \"assistant\",\n  );\n\n  const callback = useCallback(() => {\n    messageRuntime.reload();\n  }, [messageRuntime]);\n\n  if (disabled) return null;\n  return callback;\n};\n"],"names":[],"mappings":";;;;AAAA,SAAS,mBAAmB;AAC5B,SAAS,yBAAyB;AAClC,SAAS,wBAAwB;AACjC,SAAS,wBAAwB;;;;;AAE1B,IAAM,qBAAqB,MAAM;IACtC,MAAM,+MAAiB,oBAAA,CAAkB;IACzC,MAAM,gBAAgB,gNAAA,CAAiB;IAEvC,MAAM,4MAAW,mBAAA,EACf;QAAC;QAAe,cAAc;KAAA,EAC9B,CAAC,GAAG,IAAM,EAAE,SAAA,IAAa,EAAE,UAAA,IAAc,EAAE,IAAA,KAAS;IAGtD,MAAM,qNAAW,cAAA,EAAY,MAAM;QACjC,eAAe,MAAA,CAAO;IACxB,GAAG;QAAC,cAAc;KAAC;IAEnB,IAAI,SAAU,CAAA,OAAO;IACrB,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 7092, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7098, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/actionBar/ActionBarReload.tsx"],"sourcesContent":["\"use client\";\n\nimport { useActionBarReload } from \"../../primitive-hooks/actionBar/useActionBarReload\";\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\n\nexport namespace ActionBarPrimitiveReload {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useActionBarReload>;\n}\n\nexport const ActionBarPrimitiveReload = createActionButton(\n  \"ActionBarPrimitive.Reload\",\n  useActionBarReload,\n);\n"],"names":[],"mappings":";;;AAGA;;AADA,SAAS,0BAA0B;;;;AAY5B,IAAM,kNAA2B,qBAAA,EACtC,0OACA,qBAAA","ignoreList":[0]}},
    {"offset": {"line": 7110, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7116, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/actionBar/useActionBarFloatStatus.tsx"],"sourcesContent":["\"use client\";\nimport {\n  useMessageRuntime,\n  useMessageUtilsStore,\n} from \"../../context/react/MessageContext\";\nimport { useThreadRuntime } from \"../../context/react/ThreadContext\";\nimport { useCombinedStore } from \"../../utils/combined/useCombinedStore\";\n\nexport enum HideAndFloatStatus {\n  Hidden = \"hidden\",\n  Floating = \"floating\",\n  Normal = \"normal\",\n}\n\nexport type UseActionBarFloatStatusProps = {\n  hideWhenRunning?: boolean | undefined;\n  autohide?: \"always\" | \"not-last\" | \"never\" | undefined;\n  autohideFloat?: \"always\" | \"single-branch\" | \"never\" | undefined;\n};\n\nexport const useActionBarFloatStatus = ({\n  hideWhenRunning,\n  autohide,\n  autohideFloat,\n}: UseActionBarFloatStatusProps) => {\n  const threadRuntime = useThreadRuntime();\n  const messageRuntime = useMessageRuntime();\n  const messageUtilsStore = useMessageUtilsStore();\n\n  return useCombinedStore(\n    [threadRuntime, messageRuntime, messageUtilsStore],\n    (t, m, mu) => {\n      if (hideWhenRunning && t.isRunning) return HideAndFloatStatus.Hidden;\n\n      const autohideEnabled =\n        autohide === \"always\" || (autohide === \"not-last\" && !m.isLast);\n\n      // normal status\n      if (!autohideEnabled) return HideAndFloatStatus.Normal;\n\n      // hidden status\n      if (!mu.isHovering) return HideAndFloatStatus.Hidden;\n\n      // floating status\n      if (\n        autohideFloat === \"always\" ||\n        (autohideFloat === \"single-branch\" && m.branchCount <= 1)\n      )\n        return HideAndFloatStatus.Floating;\n\n      return HideAndFloatStatus.Normal;\n    },\n  );\n};\n"],"names":["HideAndFloatStatus"],"mappings":";;;;AAKA,SAAS,wBAAwB;;AAJjC;AAKA,SAAS,wBAAwB;;;;;AAE1B,IAAK,qBAAL,aAAA,GAAA,CAAA,CAAKA,wBAAL;IACLA,mBAAAA,CAAA,SAAA,GAAS;IACTA,mBAAAA,CAAA,WAAA,GAAW;IACXA,mBAAAA,CAAA,SAAA,GAAS;IAHC,OAAAA;AAAA,CAAA,EAAA,sBAAA,CAAA;AAYL,IAAM,0BAA0B,CAAC,EACtC,eAAA,EACA,QAAA,EACA,aAAA,EACF,KAAoC;IAClC,MAAM,6MAAgB,mBAAA,CAAiB;IACvC,MAAM,kBAAiB,iNAAA,CAAkB;IACzC,MAAM,kNAAoB,uBAAA,CAAqB;IAE/C,wMAAO,mBAAA,EACL;QAAC;QAAe;QAAgB,iBAAiB;KAAA,EACjD,CAAC,GAAG,GAAG,OAAO;QACZ,IAAI,mBAAmB,EAAE,SAAA,CAAW,CAAA,OAAO,SAAA,UAAA;QAE3C,MAAM,kBACJ,aAAa,YAAa,aAAa,cAAc,CAAC,EAAE,MAAA;QAG1D,IAAI,CAAC,gBAAiB,CAAA,OAAO,SAAA,UAAA;QAG7B,IAAI,CAAC,GAAG,UAAA,CAAY,CAAA,OAAO,SAAA,UAAA;QAG3B,IACE,kBAAkB,YACjB,kBAAkB,mBAAmB,EAAE,WAAA,IAAe,GAEvD,OAAO,WAAA,YAAA;QAET,OAAO,SAAA,UAAA;IACT;AAEJ","ignoreList":[0]}},
    {"offset": {"line": 7153, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7159, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/actionBar/ActionBarRoot.tsx"],"sourcesContent":["\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ElementRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\nimport {\n  useActionBarFloatStatus,\n  HideAndFloatStatus,\n  UseActionBarFloatStatusProps,\n} from \"./useActionBarFloatStatus\";\n\ntype PrimitiveDivProps = ComponentPropsWithoutRef<typeof Primitive.div>;\n\nexport namespace ActionBarPrimitiveRoot {\n  export type Element = ElementRef<typeof Primitive.div>;\n  export type Props = PrimitiveDivProps & UseActionBarFloatStatusProps;\n}\n\nexport const ActionBarPrimitiveRoot = forwardRef<\n  ActionBarPrimitiveRoot.Element,\n  ActionBarPrimitiveRoot.Props\n>(({ hideWhenRunning, autohide, autohideFloat, ...rest }, ref) => {\n  const hideAndfloatStatus = useActionBarFloatStatus({\n    hideWhenRunning,\n    autohide,\n    autohideFloat,\n  });\n\n  if (hideAndfloatStatus === HideAndFloatStatus.Hidden) return null;\n\n  return (\n    <Primitive.div\n      {...(hideAndfloatStatus === HideAndFloatStatus.Floating\n        ? { \"data-floating\": \"true\" }\n        : null)}\n      {...rest}\n      ref={ref}\n    />\n  );\n});\n\nActionBarPrimitiveRoot.displayName = \"ActionBarPrimitive.Root\";\n"],"names":[],"mappings":";;;AAGA,SAA0B,kBAA4C;AA2BlE;AA1BJ;;AAFA,SAAS,iBAAiB;;;;;;AAenB,IAAM,mOAAyB,aAAA,EAGpC,CAAC,EAAE,eAAA,EAAiB,QAAA,EAAU,aAAA,EAAe,GAAG,KAAK,CAAA,EAAG,QAAQ;IAChE,MAAM,mOAAqB,0BAAA,EAAwB;QACjD;QACA;QACA;IACF,CAAC;IAED,IAAI,iOAAuB,qBAAA,CAAmB,MAAA,CAAQ,CAAA,OAAO;IAE7D,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,wKAAC,YAAA,CAAU,GAAA,EAAV;QACE,GAAI,iOAAuB,qBAAA,CAAmB,QAAA,GAC3C;YAAE,iBAAiB;QAAO,IAC1B,IAAA;QACH,GAAG,IAAA;QACJ;IAAA;AAGN,CAAC;AAED,uBAAuB,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 7190, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7196, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/actionBar/useActionBarSpeak.tsx"],"sourcesContent":["import { useCallback } from \"react\";\n\nimport { useMessage, useMessageRuntime } from \"../../context\";\n\nexport const useActionBarSpeak = () => {\n  const messageRunime = useMessageRuntime();\n  const callback = useCallback(async () => {\n    messageRunime.speak();\n  }, [messageRunime]);\n\n  const hasSpeakableContent = useMessage((m) => {\n    return (\n      (m.role !== \"assistant\" || m.status.type !== \"running\") &&\n      m.content.some((c) => c.type === \"text\" && c.text.length > 0)\n    );\n  });\n\n  if (!hasSpeakableContent) return null;\n  return callback;\n};\n"],"names":[],"mappings":";;;;AAAA,SAAS,mBAAmB;AAE5B,SAAS,YAAY,yBAAyB;;;AAEvC,IAAM,oBAAoB,MAAM;IACrC,MAAM,8MAAgB,oBAAA,CAAkB;IACxC,MAAM,YAAW,uNAAA,EAAY,YAAY;QACvC,cAAc,KAAA,CAAM;IACtB,GAAG;QAAC,aAAa;KAAC;IAElB,MAAM,oNAAsB,aAAA,EAAW,CAAC,MAAM;QAC5C,OAAA,CACG,EAAE,IAAA,KAAS,eAAe,EAAE,MAAA,CAAO,IAAA,KAAS,SAAA,KAC7C,EAAE,OAAA,CAAQ,IAAA,CAAK,CAAC,IAAM,EAAE,IAAA,KAAS,UAAU,EAAE,IAAA,CAAK,MAAA,GAAS,CAAC;IAEhE,CAAC;IAED,IAAI,CAAC,oBAAqB,CAAA,OAAO;IACjC,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 7219, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7225, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/actionBar/ActionBarSpeak.tsx"],"sourcesContent":["\"use client\";\n\nimport { useActionBarSpeak } from \"../../primitive-hooks/actionBar/useActionBarSpeak\";\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\n\nexport namespace ActionBarPrimitiveSpeak {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useActionBarSpeak>;\n}\n\nexport const ActionBarPrimitiveSpeak = createActionButton(\n  \"ActionBarPrimitive.Speak\",\n  useActionBarSpeak,\n);\n"],"names":[],"mappings":";;;AAGA;;AADA,SAAS,yBAAyB;;;;AAY3B,IAAM,iNAA0B,qBAAA,EACrC,wOACA,oBAAA","ignoreList":[0]}},
    {"offset": {"line": 7237, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7243, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/actionBar/useActionBarStopSpeaking.tsx"],"sourcesContent":["import { useCallback } from \"react\";\nimport {\n  useMessage,\n  useMessageRuntime,\n} from \"../../context/react/MessageContext\";\n\nexport const useActionBarStopSpeaking = () => {\n  const messageRuntime = useMessageRuntime();\n  const isSpeaking = useMessage((u) => u.speech != null);\n\n  const callback = useCallback(async () => {\n    messageRuntime.stopSpeaking();\n  }, [messageRuntime]);\n\n  if (!isSpeaking) return null;\n\n  return callback;\n};\n"],"names":[],"mappings":";;;;AAAA,SAAS,mBAAmB;AAC5B;;;AAKO,IAAM,2BAA2B,MAAM;IAC5C,MAAM,+MAAiB,oBAAA,CAAkB;IACzC,MAAM,2MAAa,aAAA,EAAW,CAAC,IAAM,EAAE,MAAA,IAAU,IAAI;IAErD,MAAM,qNAAW,cAAA,EAAY,YAAY;QACvC,eAAe,YAAA,CAAa;IAC9B,GAAG;QAAC,cAAc;KAAC;IAEnB,IAAI,CAAC,WAAY,CAAA,OAAO;IAExB,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 7264, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7270, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/actionBar/ActionBarStopSpeaking.tsx"],"sourcesContent":["\"use client\";\n\nimport { forwardRef } from \"react\";\nimport { useActionBarStopSpeaking } from \"../../primitive-hooks/actionBar/useActionBarStopSpeaking\";\nimport { ActionButtonProps } from \"../../utils/createActionButton\";\nimport { useEscapeKeydown } from \"@radix-ui/react-use-escape-keydown\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\n\nexport namespace ActionBarPrimitiveStopSpeaking {\n  export type Element = HTMLButtonElement;\n  export type Props = ActionButtonProps<typeof useActionBarStopSpeaking>;\n}\n\nexport const ActionBarPrimitiveStopSpeaking = forwardRef<\n  ActionBarPrimitiveStopSpeaking.Element,\n  ActionBarPrimitiveStopSpeaking.Props\n>((props, ref) => {\n  const callback = useActionBarStopSpeaking();\n\n  // TODO this stops working if the user is not hovering over an older message\n  useEscapeKeydown((e) => {\n    if (callback) {\n      e.preventDefault();\n      callback();\n    }\n  });\n\n  return (\n    <Primitive.button\n      type=\"button\"\n      disabled={!callback}\n      {...props}\n      ref={ref}\n      onClick={composeEventHandlers(props.onClick, () => {\n        callback?.();\n      })}\n    />\n  );\n});\n\nActionBarPrimitiveStopSpeaking.displayName = \"ActionBarPrimitive.StopSpeaking\";\n"],"names":[],"mappings":";;;;AAEA,SAAS,kBAAkB;AA2BvB;AA1BJ,SAAS,gCAAgC;AAEzC,SAAS,wBAAwB;AACjC,SAAS,iBAAiB;AAC1B,SAAS,4BAA4B;;;;;;;;AAO9B,IAAM,2OAAiC,aAAA,EAG5C,CAAC,OAAO,QAAQ;IAChB,MAAM,YAAW,iPAAA,CAAyB;IAG1C,CAAA,GAAA,oLAAA,CAAA,mBAAA,EAAiB,CAAC,MAAM;QACtB,IAAI,UAAU;YACZ,EAAE,cAAA,CAAe;YACjB,SAAS;QACX;IACF,CAAC;IAED,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,wKAAC,YAAA,CAAU,MAAA,EAAV;QACC,MAAK;QACL,UAAU,CAAC;QACV,GAAG,KAAA;QACJ;QACA,0KAAS,uBAAA,EAAqB,MAAM,OAAA,EAAS,MAAM;YACjD,WAAW;QACb,CAAC;IAAA;AAGP,CAAC;AAED,+BAA+B,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 7308, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7367, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/ui/user-action-bar.tsx"],"sourcesContent":["\"use client\";\n\nimport { forwardRef, type FC } from \"react\";\nimport { PencilIcon } from \"lucide-react\";\n\nimport { TooltipIconButton } from \"./base/tooltip-icon-button\";\nimport { withDefaults } from \"./utils/withDefaults\";\nimport { useThreadConfig } from \"./thread-config\";\nimport { useThread } from \"../context\";\nimport { ActionBarPrimitive } from \"../primitives\";\n\nconst useAllowEdit = (ensureCapability = false) => {\n  const { userMessage: { allowEdit = true } = {} } = useThreadConfig();\n  const editSupported = useThread((t) => t.capabilities.edit);\n  return allowEdit && (!ensureCapability || editSupported);\n};\n\nconst UserActionBar: FC = () => {\n  const allowEdit = useAllowEdit(true);\n  if (!allowEdit) return null;\n  return (\n    <UserActionBarRoot hideWhenRunning autohide=\"not-last\">\n      <UserActionBarEdit />\n    </UserActionBarRoot>\n  );\n};\n\nUserActionBar.displayName = \"UserActionBar\";\n\nconst UserActionBarRoot = withDefaults(ActionBarPrimitive.Root, {\n  className: \"aui-user-action-bar-root\",\n});\n\nUserActionBarRoot.displayName = \"UserActionBarRoot\";\n\nnamespace UserActionBarEdit {\n  export type Element = ActionBarPrimitive.Edit.Element;\n  export type Props = Partial<TooltipIconButton.Props>;\n}\n\nconst UserActionBarEdit = forwardRef<\n  UserActionBarEdit.Element,\n  UserActionBarEdit.Props\n>((props, ref) => {\n  const {\n    strings: { userMessage: { edit: { tooltip = \"Edit\" } = {} } = {} } = {},\n  } = useThreadConfig();\n  const allowEdit = useAllowEdit();\n  return (\n    <ActionBarPrimitive.Edit disabled={!allowEdit} asChild>\n      <TooltipIconButton tooltip={tooltip} {...props} ref={ref}>\n        {props.children ?? <PencilIcon />}\n      </TooltipIconButton>\n    </ActionBarPrimitive.Edit>\n  );\n});\n\nUserActionBarEdit.displayName = \"UserActionBarEdit\";\n\nconst exports = {\n  Root: UserActionBarRoot,\n  Edit: UserActionBarEdit,\n};\n\nexport default Object.assign(UserActionBar, exports) as typeof UserActionBar &\n  typeof exports;\n"],"names":[],"mappings":";;;;AAEA,SAAS,kBAA2B;AAoB9B;AAfN,SAAS,uBAAuB;AAChC,SAAS,iBAAiB;AAF1B,SAAS,oBAAoB;AAG7B,SAAS,0BAA0B;AAJnC,SAAS,yBAAyB;AAFlC,SAAS,kBAAkB;;;;;;;;;;AAQ3B,IAAM,eAAe,CAAC,mBAAmB,KAAA,KAAU;IACjD,MAAM,EAAE,aAAa,EAAE,YAAY,IAAA,CAAK,CAAA,GAAI,CAAC,CAAA,CAAE,CAAA,qLAAI,kBAAA,CAAgB;IACnE,MAAM,6MAAgB,YAAA,EAAU,CAAC,IAAM,EAAE,YAAA,CAAa,IAAI;IAC1D,OAAO,aAAA,CAAc,CAAC,oBAAoB,aAAA;AAC5C;AAEA,IAAM,gBAAoB,MAAM;IAC9B,MAAM,YAAY,aAAa,IAAI;IACnC,IAAI,CAAC,UAAW,CAAA,OAAO;IACvB,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,mBAAA;QAAkB,iBAAe;QAAC,UAAS;QAC1C,UAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,mBAAA,CAAA,CAAkB;IAAA,CACrB;AAEJ;AAEA,cAAc,WAAA,GAAc;AAE5B,IAAM,oBAAoB,sMAAA,wOAAa,qBAAA,CAAmB,IAAA,EAAM;IAC9D,WAAW;AACb,CAAC;AAED,kBAAkB,WAAA,GAAc;AAOhC,IAAM,8NAAoB,aAAA,EAGxB,CAAC,OAAO,QAAQ;IAChB,MAAM,EACJ,SAAS,EAAE,aAAa,EAAE,MAAM,EAAE,UAAU,MAAA,CAAO,CAAA,GAAI,CAAC,CAAA,CAAE,CAAA,GAAI,CAAC,CAAA,CAAE,CAAA,GAAI,CAAC,CAAA,EACxE,qLAAI,kBAAA,CAAgB;IACpB,MAAM,YAAY,aAAa;IAC/B,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,wOAAC,qBAAA,CAAmB,IAAA,EAAnB;QAAwB,UAAU,CAAC;QAAW,SAAO;QACpD,UAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,iMAAC,oBAAA,EAAA;YAAkB;YAAmB,GAAG,KAAA;YAAO;YAC7C,UAAA,MAAM,QAAA,IAAY,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,6MAAC,aAAA,EAAA,CAAA,CAAW;QAAA,CACjC;IAAA,CACF;AAEJ,CAAC;AAED,kBAAkB,WAAA,GAAc;AAEhC,IAAM,UAAU;IACd,MAAM;IACN,MAAM;AACR;AAEA,IAAO,0BAAQ,OAAO,MAAA,CAAO,eAAe,OAAO","ignoreList":[0]}},
    {"offset": {"line": 7429, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7435, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/branchPicker/index.ts"],"sourcesContent":["export { BranchPickerPrimitiveNext as Next } from \"./BranchPickerNext\";\nexport { BranchPickerPrimitivePrevious as Previous } from \"./BranchPickerPrevious\";\nexport { BranchPickerPrimitiveCount as Count } from \"./BranchPickerCount\";\nexport { BranchPickerPrimitiveNumber as Number } from \"./BranchPickerNumber\";\nexport { BranchPickerPrimitiveRoot as Root } from \"./BranchPickerRoot\";\n"],"names":[],"mappings":"","ignoreList":[0]}},
    {"offset": {"line": 7444, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7458, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/branchPicker/useBranchPickerCount.tsx"],"sourcesContent":["\"use client\";\nimport { useMessage } from \"../../context/react/MessageContext\";\n\nexport const useBranchPickerCount = () => {\n  const branchCount = useMessage((s) => s.branchCount);\n  return branchCount;\n};\n"],"names":[],"mappings":";;;;AACA,SAAS,kBAAkB;;;AAEpB,IAAM,uBAAuB,MAAM;IACxC,MAAM,4MAAc,aAAA,EAAW,CAAC,IAAM,EAAE,WAAW;IACnD,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 7471, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7477, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/branchPicker/BranchPickerCount.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC } from \"react\";\nimport { useBranchPickerCount } from \"../../primitive-hooks/branchPicker/useBranchPickerCount\";\n\nexport namespace BranchPickerPrimitiveCount {\n  export type Props = Record<string, never>;\n}\n\nexport const BranchPickerPrimitiveCount: FC<\n  BranchPickerPrimitiveCount.Props\n> = () => {\n  const branchCount = useBranchPickerCount();\n  return <>{branchCount}</>;\n};\n\nBranchPickerPrimitiveCount.displayName = \"BranchPickerPrimitive.Count\";\n"],"names":[],"mappings":";;;AAaS;;AAVT,SAAS,4BAA4B;;;;AAM9B,IAAM,6BAET,MAAM;IACR,MAAM,oOAAc,uBAAA,CAAqB;IACzC,OAAO,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAA,uNAAA,CAAA,WAAA,EAAA;QAAG,UAAA;IAAA,CAAY;AACxB;AAEA,2BAA2B,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 7495, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7501, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/branchPicker/useBranchPickerNext.tsx"],"sourcesContent":["import { useCallback } from \"react\";\nimport {\n  useMessage,\n  useMessageRuntime,\n} from \"../../context/react/MessageContext\";\n\nexport const useBranchPickerNext = () => {\n  const messageRuntime = useMessageRuntime();\n  const disabled = useMessage((m) => m.branchNumber >= m.branchCount);\n\n  const callback = useCallback(() => {\n    messageRuntime.switchToBranch({ position: \"next\" });\n  }, [messageRuntime]);\n\n  if (disabled) return null;\n  return callback;\n};\n"],"names":[],"mappings":";;;;AAAA,SAAS,mBAAmB;AAC5B;;;AAKO,IAAM,sBAAsB,MAAM;IACvC,MAAM,+MAAiB,oBAAA,CAAkB;IACzC,MAAM,yMAAW,aAAA,EAAW,CAAC,IAAM,EAAE,YAAA,IAAgB,EAAE,WAAW;IAElE,MAAM,qNAAW,cAAA,EAAY,MAAM;QACjC,eAAe,cAAA,CAAe;YAAE,UAAU;QAAO,CAAC;IACpD,GAAG;QAAC,cAAc;KAAC;IAEnB,IAAI,SAAU,CAAA,OAAO;IACrB,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 7524, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7530, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/branchPicker/BranchPickerNext.tsx"],"sourcesContent":["\"use client\";\n\nimport { useBranchPickerNext } from \"../../primitive-hooks/branchPicker/useBranchPickerNext\";\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\n\nexport namespace BranchPickerPrimitiveNext {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useBranchPickerNext>;\n}\n\nexport const BranchPickerPrimitiveNext = createActionButton(\n  \"BranchPickerPrimitive.Next\",\n  useBranchPickerNext,\n);\n"],"names":[],"mappings":";;;AAGA;;AADA,SAAS,2BAA2B;;;;AAY7B,IAAM,mNAA4B,qBAAA,EACvC,+OACA,sBAAA","ignoreList":[0]}},
    {"offset": {"line": 7542, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7548, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/branchPicker/useBranchPickerNumber.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMessage } from \"../../context/react/MessageContext\";\n\nexport const useBranchPickerNumber = () => {\n  const branchNumber = useMessage((s) => s.branchNumber);\n  return branchNumber;\n};\n"],"names":[],"mappings":";;;;AAEA,SAAS,kBAAkB;;;AAEpB,IAAM,wBAAwB,MAAM;IACzC,MAAM,6MAAe,aAAA,EAAW,CAAC,IAAM,EAAE,YAAY;IACrD,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 7561, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7567, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/branchPicker/BranchPickerNumber.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC } from \"react\";\nimport { useBranchPickerNumber } from \"../../primitive-hooks/branchPicker/useBranchPickerNumber\";\n\nexport namespace BranchPickerPrimitiveNumber {\n  export type Props = Record<string, never>;\n}\n\nexport const BranchPickerPrimitiveNumber: FC<\n  BranchPickerPrimitiveNumber.Props\n> = () => {\n  const branchNumber = useBranchPickerNumber();\n  return <>{branchNumber}</>;\n};\n\nBranchPickerPrimitiveNumber.displayName = \"BranchPickerPrimitive.Number\";\n"],"names":[],"mappings":";;;AAaS;;AAVT,SAAS,6BAA6B;;;;AAM/B,IAAM,8BAET,MAAM;IACR,MAAM,sOAAe,wBAAA,CAAsB;IAC3C,OAAO,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAA,uNAAA,CAAA,WAAA,EAAA;QAAG,UAAA;IAAA,CAAa;AACzB;AAEA,4BAA4B,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 7585, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7591, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitive-hooks/branchPicker/useBranchPickerPrevious.tsx"],"sourcesContent":["import { useCallback } from \"react\";\nimport {\n  useMessage,\n  useMessageRuntime,\n} from \"../../context/react/MessageContext\";\n\nexport const useBranchPickerPrevious = () => {\n  const messageRuntime = useMessageRuntime();\n  const disabled = useMessage((m) => m.branchNumber <= 1);\n\n  const callback = useCallback(() => {\n    messageRuntime.switchToBranch({ position: \"previous\" });\n  }, [messageRuntime]);\n\n  if (disabled) return null;\n  return callback;\n};\n"],"names":[],"mappings":";;;;AAAA,SAAS,mBAAmB;AAC5B;;;AAKO,IAAM,0BAA0B,MAAM;IAC3C,MAAM,+MAAiB,oBAAA,CAAkB;IACzC,MAAM,yMAAW,aAAA,EAAW,CAAC,IAAM,EAAE,YAAA,IAAgB,CAAC;IAEtD,MAAM,qNAAW,cAAA,EAAY,MAAM;QACjC,eAAe,cAAA,CAAe;YAAE,UAAU;QAAW,CAAC;IACxD,GAAG;QAAC,cAAc;KAAC;IAEnB,IAAI,SAAU,CAAA,OAAO;IACrB,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 7614, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7620, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/branchPicker/BranchPickerPrevious.tsx"],"sourcesContent":["\"use client\";\n\nimport { useBranchPickerPrevious } from \"../../primitive-hooks/branchPicker/useBranchPickerPrevious\";\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/createActionButton\";\n\nexport namespace BranchPickerPrimitivePrevious {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useBranchPickerPrevious>;\n}\n\nexport const BranchPickerPrimitivePrevious = createActionButton(\n  \"BranchPickerPrimitive.Previous\",\n  useBranchPickerPrevious,\n);\n"],"names":[],"mappings":";;;AAGA;;AADA,SAAS,+BAA+B;;;;AAYjC,IAAM,uNAAgC,qBAAA,EAC3C,uPACA,0BAAA","ignoreList":[0]}},
    {"offset": {"line": 7632, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7648, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/branchPicker/BranchPickerRoot.tsx"],"sourcesContent":["\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ElementRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\nimport { If } from \"../message\";\n\nexport namespace BranchPickerPrimitiveRoot {\n  export type Element = ElementRef<typeof Primitive.div>;\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.div> & {\n    hideWhenSingleBranch?: boolean | undefined;\n  };\n}\n\nexport const BranchPickerPrimitiveRoot = forwardRef<\n  BranchPickerPrimitiveRoot.Element,\n  BranchPickerPrimitiveRoot.Props\n>(({ hideWhenSingleBranch, ...rest }, ref) => {\n  return (\n    <If hasBranches={hideWhenSingleBranch ? true : undefined}>\n      <Primitive.div {...rest} ref={ref} />\n    </If>\n  );\n});\n\nBranchPickerPrimitiveRoot.displayName = \"BranchPickerPrimitive.Root\";\n"],"names":[],"mappings":";;;AAGA,SAA0B,kBAA4C;AAgBhE;AAfN,SAAS,UAAU;;AAFnB,SAAS,iBAAiB;;;;;;AAWnB,IAAM,sOAA4B,aAAA,EAGvC,CAAC,EAAE,oBAAA,EAAsB,GAAG,KAAK,CAAA,EAAG,QAAQ;IAC5C,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,wOAAC,KAAA,EAAA;QAAG,aAAa,uBAAuB,OAAO,KAAA;QAC7C,UAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,wKAAC,YAAA,CAAU,GAAA,EAAV;YAAe,GAAG,IAAA;YAAM;QAAA,CAAU;IAAA,CACrC;AAEJ,CAAC;AAED,0BAA0B,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 7673, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7723, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/ui/branch-picker.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, forwardRef, type FC } from \"react\";\nimport { ChevronLeftIcon, ChevronRightIcon } from \"lucide-react\";\n\nimport { TooltipIconButton } from \"./base/tooltip-icon-button\";\nimport { withDefaults } from \"./utils/withDefaults\";\nimport { useThreadConfig } from \"./thread-config\";\nimport { BranchPickerPrimitive } from \"../primitives\";\nimport { useThread } from \"../context\";\n\nconst useAllowBranchPicker = (ensureCapability = false) => {\n  const { branchPicker: { allowBranchPicker = true } = {} } = useThreadConfig();\n  const branchPickerSupported = useThread((t) => t.capabilities.edit);\n  return allowBranchPicker && (!ensureCapability || branchPickerSupported);\n};\n\nconst BranchPicker: FC = () => {\n  const allowBranchPicker = useAllowBranchPicker(true);\n  if (!allowBranchPicker) return null;\n  return (\n    <BranchPickerRoot hideWhenSingleBranch>\n      <BranchPickerPrevious />\n      <BranchPickerState />\n      <BranchPickerNext />\n    </BranchPickerRoot>\n  );\n};\n\nBranchPicker.displayName = \"BranchPicker\";\n\nconst BranchPickerRoot = withDefaults(BranchPickerPrimitive.Root, {\n  className: \"aui-branch-picker-root\",\n});\n\nBranchPickerRoot.displayName = \"BranchPickerRoot\";\n\nnamespace BranchPickerPrevious {\n  export type Element = BranchPickerPrimitive.Previous.Element;\n  export type Props = Partial<TooltipIconButton.Props>;\n}\n\nconst BranchPickerPrevious = forwardRef<\n  BranchPickerPrevious.Element,\n  BranchPickerPrevious.Props\n>((props, ref) => {\n  const {\n    strings: {\n      branchPicker: { previous: { tooltip = \"Previous\" } = {} } = {},\n    } = {},\n  } = useThreadConfig();\n  const allowBranchPicker = useAllowBranchPicker();\n  return (\n    <BranchPickerPrimitive.Previous disabled={!allowBranchPicker} asChild>\n      <TooltipIconButton tooltip={tooltip} {...props} ref={ref}>\n        {props.children ?? <ChevronLeftIcon />}\n      </TooltipIconButton>\n    </BranchPickerPrimitive.Previous>\n  );\n});\n\nBranchPickerPrevious.displayName = \"BranchPickerPrevious\";\n\nconst BranchPickerStateWrapper = withDefaults(\"span\", {\n  className: \"aui-branch-picker-state\",\n});\n\nnamespace BranchPickerState {\n  export type Element = HTMLSpanElement;\n  export type Props = ComponentPropsWithoutRef<\"span\">;\n}\n\nconst BranchPickerState = forwardRef<\n  BranchPickerState.Element,\n  BranchPickerState.Props\n>((props, ref) => {\n  return (\n    <BranchPickerStateWrapper {...props} ref={ref}>\n      <BranchPickerPrimitive.Number /> / <BranchPickerPrimitive.Count />\n    </BranchPickerStateWrapper>\n  );\n});\n\nBranchPickerState.displayName = \"BranchPickerState\";\n\nnamespace BranchPickerNext {\n  export type Element = BranchPickerPrimitive.Next.Element;\n  export type Props = Partial<TooltipIconButton.Props>;\n}\n\nconst BranchPickerNext = forwardRef<\n  BranchPickerNext.Element,\n  BranchPickerNext.Props\n>((props, ref) => {\n  const {\n    strings: { branchPicker: { next: { tooltip = \"Next\" } = {} } = {} } = {},\n  } = useThreadConfig();\n  const allowBranchPicker = useAllowBranchPicker();\n  return (\n    <BranchPickerPrimitive.Next disabled={!allowBranchPicker} asChild>\n      <TooltipIconButton tooltip={tooltip} {...props} ref={ref}>\n        {props.children ?? <ChevronRightIcon />}\n      </TooltipIconButton>\n    </BranchPickerPrimitive.Next>\n  );\n});\n\nBranchPickerNext.displayName = \"BranchPickerNext\";\n\nconst exports = {\n  Root: BranchPickerRoot,\n  Previous: BranchPickerPrevious,\n  Next: BranchPickerNext,\n};\n\nexport default Object.assign(BranchPicker, exports) as typeof BranchPicker &\n  typeof exports;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 7820, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7826, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/contentPart/index.ts"],"sourcesContent":["export { ContentPartPrimitiveText as Text } from \"./ContentPartText\";\nexport { ContentPartPrimitiveImage as Image } from \"./ContentPartImage\";\nexport { ContentPartPrimitiveDisplay as Display } from \"./ContentPartDisplay\";\nexport { ContentPartPrimitiveInProgress as InProgress } from \"./ContentPartInProgress\";\n"],"names":[],"mappings":"","ignoreList":[0]}},
    {"offset": {"line": 7834, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7889, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/ui/content-part.tsx"],"sourcesContent":["import { FC } from \"react\";\nimport { ContentPartPrimitive } from \"../primitives\";\nimport { useSmoothStatus, withSmoothContextProvider } from \"../utils/smooth\";\nimport classNames from \"classnames\";\n\nexport const Text: FC = () => {\n  const status = useSmoothStatus();\n  return (\n    <ContentPartPrimitive.Text\n      className={classNames(\n        \"aui-text\",\n        status.type === \"running\" && \"aui-text-running\",\n      )}\n      component=\"p\"\n    />\n  );\n};\n\nconst exports = { Text: withSmoothContextProvider(Text) };\n\nexport default exports;\n"],"names":[],"mappings":";;;;;AAGA,OAAO,gBAAgB;AAKnB;AANJ,SAAS,iBAAiB,iCAAiC;AAD3D,SAAS,4BAA4B;;;;;AAI9B,IAAM,OAAW,MAAM;IAC5B,MAAM,qMAAS,kBAAA,CAAgB;IAC/B,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,4OAAC,uBAAA,CAAqB,IAAA,EAArB;QACC,YAAW,iJAAA,EACT,YACA,OAAO,IAAA,KAAS,aAAa;QAE/B,WAAU;IAAA;AAGhB;AAEA,IAAM,UAAU;IAAE,kMAAM,4BAAA,EAA0B,IAAI;AAAE;AAExD,IAAO,uBAAQ","ignoreList":[0]}},
    {"offset": {"line": 7915, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7921, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/ui/user-message.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, forwardRef, type FC } from \"react\";\n\nimport BranchPicker from \"./branch-picker\";\nimport { withDefaults } from \"./utils/withDefaults\";\nimport UserActionBar from \"./user-action-bar\";\nimport ContentPart from \"./content-part\";\nimport { MessagePrimitive } from \"../primitives\";\nimport Attachment from \"./attachment-ui\";\n\nconst UserMessage: FC = () => {\n  return (\n    <UserMessageRoot>\n      <UserMessageAttachments />\n      {/* TODO this is temporary until we place the UserActionBar in a better place */}\n      <MessagePrimitive.If hasContent>\n        <UserActionBar />\n        <UserMessageContent />\n      </MessagePrimitive.If>\n      <BranchPicker />\n    </UserMessageRoot>\n  );\n};\n\nUserMessage.displayName = \"UserMessage\";\n\nconst UserMessageRoot = withDefaults(MessagePrimitive.Root, {\n  className: \"aui-user-message-root\",\n});\n\nUserMessageRoot.displayName = \"UserMessageRoot\";\n\nconst UserMessageContentWrapper = withDefaults(\"div\", {\n  className: \"aui-user-message-content\",\n});\n\nnamespace UserMessageContent {\n  export type Element = HTMLDivElement;\n  export type Props = MessagePrimitive.Content.Props &\n    ComponentPropsWithoutRef<\"div\">;\n}\n\nconst UserMessageContent = forwardRef<\n  UserMessageContent.Element,\n  UserMessageContent.Props\n>(({ components, ...props }, ref) => {\n  return (\n    <UserMessageContentWrapper {...props} ref={ref}>\n      <MessagePrimitive.Content\n        components={{\n          ...components,\n          Text: components?.Text ?? ContentPart.Text,\n        }}\n      />\n    </UserMessageContentWrapper>\n  );\n});\n\nUserMessageContent.displayName = \"UserMessageContent\";\n\nconst UserMessageAttachmentsContainer = withDefaults(\"div\", {\n  className: \"aui-user-message-attachments\",\n});\n\nnamespace UserMessageAttachments {\n  export type Props = Partial<MessagePrimitive.Attachments.Props>;\n}\n\nconst UserMessageAttachments: FC<UserMessageAttachments.Props> = ({\n  components,\n}) => {\n  return (\n    <MessagePrimitive.If hasAttachments>\n      <UserMessageAttachmentsContainer>\n        <MessagePrimitive.Attachments\n          components={{\n            ...components,\n            Attachment: components?.Attachment ?? Attachment,\n          }}\n        />\n      </UserMessageAttachmentsContainer>\n    </MessagePrimitive.If>\n  );\n};\n\nconst exports = {\n  Root: UserMessageRoot,\n  Content: UserMessageContent,\n  Attachments: UserMessageAttachments,\n};\n\nexport default Object.assign(UserMessage, exports) as typeof UserMessage &\n  typeof exports;\n"],"names":[],"mappings":";;;;AAEA,SAAmC,kBAA2B;AAYxD,cAEA,YAFA;AANN,SAAS,wBAAwB;AAFjC,OAAO,mBAAmB;AAF1B,OAAO,kBAAkB;AACzB,SAAS,oBAAoB;AAE7B,OAAO,iBAAiB;AAExB,OAAO,gBAAgB;;;;;;;;;;AAEvB,IAAM,cAAkB,MAAM;IAC5B,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,OAAA,EAAC,iBAAA;QACC,UAAA;YAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,wBAAA,CAAA,CAAuB;YAExB,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,OAAA,oOAAC,mBAAA,CAAiB,EAAA,EAAjB;gBAAoB,YAAU;gBAC7B,UAAA;oBAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,qLAAC,UAAA,EAAA,CAAA,CAAc;oBACf,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,oBAAA,CAAA,CAAmB;iBAAA;YAAA,CACtB;YACA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,wLAAA,EAAA,CAAA,CAAa;SAAA;IAAA,CAChB;AAEJ;AAEA,YAAY,WAAA,GAAc;AAE1B,IAAM,yMAAkB,eAAA,EAAa,qPAAA,CAAiB,IAAA,EAAM;IAC1D,WAAW;AACb,CAAC;AAED,gBAAgB,WAAA,GAAc;AAE9B,IAAM,mNAA4B,eAAA,EAAa,OAAO;IACpD,WAAW;AACb,CAAC;AAQD,IAAM,+NAAqB,aAAA,EAGzB,CAAC,EAAE,UAAA,EAAY,GAAG,MAAM,CAAA,EAAG,QAAQ;IACnC,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,2BAAA;QAA2B,GAAG,KAAA;QAAO;QACpC,UAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,oOAAC,mBAAA,CAAiB,OAAA,EAAjB;YACC,YAAY;gBACV,GAAG,UAAA;gBACH,MAAM,YAAY,qLAAQ,UAAA,CAAY,IAAA;YACxC;QAAA;IACF,CACF;AAEJ,CAAC;AAED,mBAAmB,WAAA,GAAc;AAEjC,IAAM,mCAAkC,qMAAA,EAAa,OAAO;IAC1D,WAAW;AACb,CAAC;AAMD,IAAM,yBAA2D,CAAC,EAChE,UAAA,EACF,KAAM;IACJ,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,oOAAC,mBAAA,CAAiB,EAAA,EAAjB;QAAoB,gBAAc;QACjC,UAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,iCAAA;YACC,UAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,oOAAC,mBAAA,CAAiB,WAAA,EAAjB;gBACC,YAAY;oBACV,GAAG,UAAA;oBACH,YAAY,YAAY,4LAAc,UAAA;gBACxC;YAAA;QACF,CACF;IAAA,CACF;AAEJ;AAEA,IAAM,UAAU;IACd,MAAM;IACN,SAAS;IACT,aAAa;AACf;AAEA,IAAO,uBAAQ,OAAO,MAAA,CAAO,aAAa,OAAO","ignoreList":[0]}},
    {"offset": {"line": 8002, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8008, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/ui/assistant-action-bar.tsx"],"sourcesContent":["\"use client\";\n\nimport { forwardRef, type FC } from \"react\";\nimport {\n  AudioLinesIcon,\n  CheckIcon,\n  CopyIcon,\n  RefreshCwIcon,\n  StopCircleIcon,\n  ThumbsDownIcon,\n  ThumbsUpIcon,\n} from \"lucide-react\";\nimport { ActionBarPrimitive, MessagePrimitive } from \"../primitives\";\nimport { TooltipIconButton } from \"./base/tooltip-icon-button\";\nimport { withDefaults } from \"./utils/withDefaults\";\nimport { useThreadConfig } from \"./thread-config\";\nimport { useThread } from \"../context\";\n\nconst useAllowCopy = (ensureCapability = false) => {\n  const { assistantMessage: { allowCopy = true } = {} } = useThreadConfig();\n  const copySupported = useThread((t) => t.capabilities.unstable_copy);\n  return allowCopy && (!ensureCapability || copySupported);\n};\n\nconst useAllowSpeak = (ensureCapability = false) => {\n  const { assistantMessage: { allowSpeak = true } = {} } = useThreadConfig();\n  const speechSupported = useThread((t) => t.capabilities.speech);\n  return allowSpeak && (!ensureCapability || speechSupported);\n};\n\nconst useAllowReload = (ensureCapability = false) => {\n  const { assistantMessage: { allowReload = true } = {} } = useThreadConfig();\n  const reloadSupported = useThread((t) => t.capabilities.reload);\n  return allowReload && (!ensureCapability || reloadSupported);\n};\n\nconst useAllowFeedbackPositive = (ensureCapability = false) => {\n  const { assistantMessage: { allowFeedbackPositive = true } = {} } =\n    useThreadConfig();\n  const feedbackSupported = useThread((t) => t.capabilities.feedback);\n  return allowFeedbackPositive && (!ensureCapability || feedbackSupported);\n};\n\nconst useAllowFeedbackNegative = (ensureCapability = false) => {\n  const { assistantMessage: { allowFeedbackNegative = true } = {} } =\n    useThreadConfig();\n  const feedbackSupported = useThread((t) => t.capabilities.feedback);\n  return allowFeedbackNegative && (!ensureCapability || feedbackSupported);\n};\n\nconst AssistantActionBar: FC = () => {\n  const allowCopy = useAllowCopy(true);\n  const allowReload = useAllowReload(true);\n  const allowSpeak = useAllowSpeak(true);\n  const allowFeedbackPositive = useAllowFeedbackPositive(true);\n  const allowFeedbackNegative = useAllowFeedbackNegative(true);\n  if (\n    !allowCopy &&\n    !allowReload &&\n    !allowSpeak &&\n    !allowFeedbackPositive &&\n    !allowFeedbackNegative\n  )\n    return null;\n\n  return (\n    <AssistantActionBarRoot\n      hideWhenRunning\n      autohide=\"not-last\"\n      autohideFloat=\"single-branch\"\n    >\n      {allowSpeak && <AssistantActionBarSpeechControl />}\n      {allowCopy && <AssistantActionBarCopy />}\n      {allowReload && <AssistantActionBarReload />}\n      {allowFeedbackPositive && <AssistantActionBarFeedbackPositive />}\n      {allowFeedbackNegative && <AssistantActionBarFeedbackNegative />}\n    </AssistantActionBarRoot>\n  );\n};\n\nAssistantActionBar.displayName = \"AssistantActionBar\";\n\nconst AssistantActionBarRoot = withDefaults(ActionBarPrimitive.Root, {\n  className: \"aui-assistant-action-bar-root\",\n});\n\nAssistantActionBarRoot.displayName = \"AssistantActionBarRoot\";\n\nnamespace AssistantActionBarCopy {\n  export type Element = ActionBarPrimitive.Copy.Element;\n  export type Props = Partial<TooltipIconButton.Props> & {\n    copiedDuration?: number | undefined;\n  };\n}\n\nconst AssistantActionBarCopy = forwardRef<\n  AssistantActionBarCopy.Element,\n  AssistantActionBarCopy.Props\n>(({ copiedDuration, ...props }, ref) => {\n  const {\n    strings: {\n      assistantMessage: { copy: { tooltip = \"Copy\" } = {} } = {},\n    } = {},\n  } = useThreadConfig();\n\n  return (\n    <ActionBarPrimitive.Copy copiedDuration={copiedDuration} asChild>\n      <TooltipIconButton tooltip={tooltip} {...props} ref={ref}>\n        {props.children ?? (\n          <>\n            <MessagePrimitive.If copied>\n              <CheckIcon />\n            </MessagePrimitive.If>\n            <MessagePrimitive.If copied={false}>\n              <CopyIcon />\n            </MessagePrimitive.If>\n          </>\n        )}\n      </TooltipIconButton>\n    </ActionBarPrimitive.Copy>\n  );\n});\n\nAssistantActionBarCopy.displayName = \"AssistantActionBarCopy\";\n\nconst AssistantActionBarSpeechControl: FC = () => {\n  return (\n    <>\n      <MessagePrimitive.If speaking={false}>\n        <AssistantActionBarSpeak />\n      </MessagePrimitive.If>\n      <MessagePrimitive.If speaking>\n        <AssistantActionBarStopSpeaking />\n      </MessagePrimitive.If>\n    </>\n  );\n};\n\nnamespace AssistantActionBarSpeak {\n  export type Element = ActionBarPrimitive.Speak.Element;\n  export type Props = Partial<TooltipIconButton.Props>;\n}\n\nconst AssistantActionBarSpeak = forwardRef<\n  AssistantActionBarSpeak.Element,\n  AssistantActionBarSpeak.Props\n>((props, ref) => {\n  const {\n    strings: {\n      assistantMessage: { speak: { tooltip = \"Read aloud\" } = {} } = {},\n    } = {},\n  } = useThreadConfig();\n  const allowSpeak = useAllowSpeak();\n\n  return (\n    <ActionBarPrimitive.Speak disabled={!allowSpeak} asChild>\n      <TooltipIconButton tooltip={tooltip} {...props} ref={ref}>\n        {props.children ?? <AudioLinesIcon />}\n      </TooltipIconButton>\n    </ActionBarPrimitive.Speak>\n  );\n});\n\nAssistantActionBarSpeak.displayName = \"AssistantActionBarSpeak\";\n\nnamespace AssistantActionBarStopSpeaking {\n  export type Element = ActionBarPrimitive.StopSpeaking.Element;\n  export type Props = Partial<TooltipIconButton.Props>;\n}\n\nconst AssistantActionBarStopSpeaking = forwardRef<\n  AssistantActionBarStopSpeaking.Element,\n  AssistantActionBarStopSpeaking.Props\n>((props, ref) => {\n  const {\n    strings: {\n      assistantMessage: {\n        speak: { stop: { tooltip: stopTooltip = \"Stop\" } = {} } = {},\n      } = {},\n    } = {},\n  } = useThreadConfig();\n  const allowSpeak = useAllowSpeak();\n\n  return (\n    <ActionBarPrimitive.StopSpeaking disabled={!allowSpeak} asChild>\n      <TooltipIconButton tooltip={stopTooltip} {...props} ref={ref}>\n        {props.children ?? <StopCircleIcon />}\n      </TooltipIconButton>\n    </ActionBarPrimitive.StopSpeaking>\n  );\n});\n\nAssistantActionBarStopSpeaking.displayName = \"AssistantActionBarStopSpeaking\";\n\nnamespace AssistantActionBarReload {\n  export type Element = ActionBarPrimitive.Reload.Element;\n  export type Props = Partial<TooltipIconButton.Props>;\n}\n\nconst AssistantActionBarReload = forwardRef<\n  AssistantActionBarReload.Element,\n  AssistantActionBarReload.Props\n>((props, ref) => {\n  const {\n    strings: {\n      assistantMessage: { reload: { tooltip = \"Refresh\" } = {} } = {},\n    } = {},\n  } = useThreadConfig();\n  const allowReload = useAllowReload();\n  return (\n    <ActionBarPrimitive.Reload disabled={!allowReload} asChild>\n      <TooltipIconButton tooltip={tooltip} {...props} ref={ref}>\n        {props.children ?? <RefreshCwIcon />}\n      </TooltipIconButton>\n    </ActionBarPrimitive.Reload>\n  );\n});\n\nAssistantActionBarReload.displayName = \"AssistantActionBarReload\";\n\nnamespace AssistantActionBarFeedbackPositive {\n  export type Element = ActionBarPrimitive.FeedbackPositive.Element;\n  export type Props = Partial<TooltipIconButton.Props>;\n}\n\nconst AssistantActionBarFeedbackPositive = forwardRef<\n  AssistantActionBarFeedbackPositive.Element,\n  AssistantActionBarFeedbackPositive.Props\n>((props, ref) => {\n  const {\n    strings: {\n      assistantMessage: {\n        feedback: { positive: { tooltip = \"Good response\" } = {} } = {},\n      } = {},\n    } = {},\n  } = useThreadConfig();\n  const allowFeedbackPositive = useAllowFeedbackPositive();\n  return (\n    <ActionBarPrimitive.FeedbackPositive\n      disabled={!allowFeedbackPositive}\n      className=\"aui-assistant-action-bar-feedback-positive\"\n      asChild\n    >\n      <TooltipIconButton tooltip={tooltip} {...props} ref={ref}>\n        {props.children ?? <ThumbsUpIcon />}\n      </TooltipIconButton>\n    </ActionBarPrimitive.FeedbackPositive>\n  );\n});\n\nAssistantActionBarFeedbackPositive.displayName =\n  \"AssistantActionBarFeedbackPositive\";\n\nnamespace AssistantActionBarFeedbackNegative {\n  export type Element = ActionBarPrimitive.FeedbackNegative.Element;\n  export type Props = Partial<TooltipIconButton.Props>;\n}\n\nconst AssistantActionBarFeedbackNegative = forwardRef<\n  AssistantActionBarFeedbackNegative.Element,\n  AssistantActionBarFeedbackNegative.Props\n>((props, ref) => {\n  const {\n    strings: {\n      assistantMessage: {\n        feedback: { negative: { tooltip = \"Bad response\" } = {} } = {},\n      } = {},\n    } = {},\n  } = useThreadConfig();\n  const allowFeedbackNegative = useAllowFeedbackNegative();\n  return (\n    <ActionBarPrimitive.FeedbackNegative\n      disabled={!allowFeedbackNegative}\n      className=\"aui-assistant-action-bar-feedback-negative\"\n      asChild\n    >\n      <TooltipIconButton tooltip={tooltip} {...props} ref={ref}>\n        {props.children ?? <ThumbsDownIcon />}\n      </TooltipIconButton>\n    </ActionBarPrimitive.FeedbackNegative>\n  );\n});\n\nAssistantActionBarFeedbackNegative.displayName =\n  \"AssistantActionBarFeedbackNegative\";\n\nconst exports = {\n  Root: AssistantActionBarRoot,\n  Reload: AssistantActionBarReload,\n  Copy: AssistantActionBarCopy,\n  Speak: AssistantActionBarSpeak,\n  StopSpeaking: AssistantActionBarStopSpeaking,\n  SpeechControl: AssistantActionBarSpeechControl,\n  FeedbackPositive: AssistantActionBarFeedbackPositive,\n  FeedbackNegative: AssistantActionBarFeedbackNegative,\n};\n\nexport default Object.assign(\n  AssistantActionBar,\n  exports,\n) as typeof AssistantActionBar & typeof exports;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 8215, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8221, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/ui/assistant-message.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, forwardRef, useMemo, type FC } from \"react\";\nimport { MessagePrimitive } from \"../primitives\";\nimport BranchPicker from \"./branch-picker\";\nimport { Avatar } from \"./base/avatar\";\nimport { withDefaults } from \"./utils/withDefaults\";\nimport { useThreadConfig } from \"./thread-config\";\nimport AssistantActionBar from \"./assistant-action-bar\";\nimport ContentPart from \"./content-part\";\n\nconst AssistantMessage: FC = () => {\n  return (\n    <AssistantMessageRoot>\n      <AssistantMessageAvatar />\n      <AssistantMessageContent />\n      <BranchPicker />\n      <AssistantActionBar />\n    </AssistantMessageRoot>\n  );\n};\n\nAssistantMessage.displayName = \"AssistantMessage\";\n\nconst AssistantMessageAvatar: FC = () => {\n  const { assistantAvatar: avatar = { fallback: \"A\" } } = useThreadConfig();\n  return <Avatar {...avatar} />;\n};\n\nconst AssistantMessageRoot = withDefaults(MessagePrimitive.Root, {\n  className: \"aui-assistant-message-root\",\n});\n\nAssistantMessageRoot.displayName = \"AssistantMessageRoot\";\n\nconst AssistantMessageContentWrapper = withDefaults(\"div\", {\n  className: \"aui-assistant-message-content\",\n});\n\nnamespace AssistantMessageContent {\n  export type Element = HTMLDivElement;\n  export type Props = MessagePrimitive.Content.Props &\n    ComponentPropsWithoutRef<\"div\">;\n}\n\nconst AssistantMessageContent = forwardRef<\n  AssistantMessageContent.Element,\n  AssistantMessageContent.Props\n>(({ components: componentsProp, ...rest }, ref) => {\n  const { tools, assistantMessage: { components = {} } = {} } =\n    useThreadConfig();\n\n  const toolsComponents = useMemo(\n    () => ({\n      by_name: !tools\n        ? undefined\n        : Object.fromEntries(\n            tools.map((t) => [\n              t.unstable_tool.toolName,\n              t.unstable_tool.render,\n            ]),\n          ),\n      Fallback: components.ToolFallback,\n    }),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [...(tools ?? []), components.ToolFallback],\n  );\n\n  return (\n    <AssistantMessageContentWrapper {...rest} ref={ref}>\n      <MessagePrimitive.Content\n        components={{\n          ...componentsProp,\n          Text: componentsProp?.Text ?? components.Text ?? ContentPart.Text,\n          Empty: componentsProp?.Empty ?? components.Empty,\n          tools: toolsComponents,\n        }}\n      />\n    </AssistantMessageContentWrapper>\n  );\n});\n\nAssistantMessageContent.displayName = \"AssistantMessageContent\";\n\nconst exports = {\n  Root: AssistantMessageRoot,\n  Avatar: AssistantMessageAvatar,\n  Content: AssistantMessageContent,\n};\n\nexport default Object.assign(\n  AssistantMessage,\n  exports,\n) as typeof AssistantMessage & typeof exports;\n"],"names":[],"mappings":";;;;AAEA,SAAmC,YAAY,eAAwB;AAWnE,SACE,KADF;AATJ,OAAO,kBAAkB;AAIzB,OAAO,wBAAwB;AAD/B,SAAS,uBAAuB;AAFhC,SAAS,cAAc;AACvB,SAAS,oBAAoB;AAH7B,SAAS,wBAAwB;AAMjC,OAAO,iBAAiB;;;;;;;;;;;AAExB,IAAM,mBAAuB,MAAM;IACjC,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,OAAA,EAAC,sBAAA;QACC,UAAA;YAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,wBAAA,CAAA,CAAuB;YACxB,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,yBAAA,CAAA,CAAwB;YACzB,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,gLAAC,UAAA,EAAA,CAAA,CAAa;YACd,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,0LAAC,UAAA,EAAA,CAAA,CAAmB;SAAA;IAAA,CACtB;AAEJ;AAEA,iBAAiB,WAAA,GAAc;AAE/B,IAAM,yBAA6B,MAAM;IACvC,MAAM,EAAE,iBAAiB,SAAS;QAAE,UAAU;IAAI,CAAA,CAAE,CAAA,qLAAI,kBAAA,CAAgB;IACxE,OAAO,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,8KAAC,SAAA,EAAA;QAAQ,GAAG,MAAA;IAAA,CAAQ;AAC7B;AAEA,IAAM,wBAAuB,qMAAA,oOAAa,mBAAA,CAAiB,IAAA,EAAM;IAC/D,WAAW;AACb,CAAC;AAED,qBAAqB,WAAA,GAAc;AAEnC,IAAM,iCAAiC,sMAAA,EAAa,OAAO;IACzD,WAAW;AACb,CAAC;AAQD,IAAM,2BAA0B,sNAAA,EAG9B,CAAC,EAAE,YAAY,cAAA,EAAgB,GAAG,KAAK,CAAA,EAAG,QAAQ;IAClD,MAAM,EAAE,KAAA,EAAO,kBAAkB,EAAE,aAAa,CAAC,CAAA,CAAE,CAAA,GAAI,CAAC,CAAA,CAAE,CAAA,qLACxD,kBAAA,CAAgB;IAElB,MAAM,4NAAkB,UAAA,EACtB,IAAA,CAAO;YACL,SAAS,CAAC,QACN,KAAA,IACA,OAAO,WAAA,CACL,MAAM,GAAA,CAAI,CAAC,IAAM;oBACf,EAAE,aAAA,CAAc,QAAA;oBAChB,EAAE,aAAA,CAAc,MAAA;iBACjB;YAEP,UAAU,WAAW,YAAA;QACvB,CAAA,GAAA,uDAAA;IAEA,CAAC;WAAI,SAAS,CAAC,CAAA;QAAI,WAAW,YAAY;KAAA;IAG5C,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,gCAAA;QAAgC,GAAG,IAAA;QAAM;QACxC,UAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,oOAAC,mBAAA,CAAiB,OAAA,EAAjB;YACC,YAAY;gBACV,GAAG,cAAA;gBACH,MAAM,gBAAgB,QAAQ,WAAW,IAAA,iLAAQ,UAAA,CAAY,IAAA;gBAC7D,OAAO,gBAAgB,SAAS,WAAW,KAAA;gBAC3C,OAAO;YACT;QAAA;IACF,CACF;AAEJ,CAAC;AAED,wBAAwB,WAAA,GAAc;AAEtC,IAAM,UAAU;IACd,MAAM;IACN,QAAQ;IACR,SAAS;AACX;AAEA,IAAO,4BAAQ,OAAO,MAAA,CACpB,kBACA","ignoreList":[0]}},
    {"offset": {"line": 8305, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8311, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/ui/edit-composer.tsx"],"sourcesContent":["\"use client\";\n\nimport { forwardRef, type FC } from \"react\";\n\nimport { Button, ButtonProps } from \"./base/button\";\nimport { withDefaults } from \"./utils/withDefaults\";\nimport { useThreadConfig } from \"./thread-config\";\nimport { ComposerPrimitive } from \"../primitives\";\n\nconst EditComposer: FC = () => {\n  return (\n    <EditComposerRoot>\n      <EditComposerInput />\n\n      <EditComposerFooter>\n        <EditComposerCancel />\n        <EditComposerSend />\n      </EditComposerFooter>\n    </EditComposerRoot>\n  );\n};\n\nEditComposer.displayName = \"EditComposer\";\n\nconst EditComposerRoot = withDefaults(ComposerPrimitive.Root, {\n  className: \"aui-edit-composer-root\",\n});\n\nEditComposerRoot.displayName = \"EditComposerRoot\";\n\nconst EditComposerInput = withDefaults(ComposerPrimitive.Input, {\n  className: \"aui-edit-composer-input\",\n});\n\nEditComposerInput.displayName = \"EditComposerInput\";\n\nconst EditComposerFooter = withDefaults(\"div\", {\n  className: \"aui-edit-composer-footer\",\n});\n\nEditComposerFooter.displayName = \"EditComposerFooter\";\n\nnamespace EditComposerCancel {\n  export type Element = HTMLButtonElement;\n  export type Props = Partial<ButtonProps>;\n}\n\nconst EditComposerCancel = forwardRef<\n  EditComposerCancel.Element,\n  EditComposerCancel.Props\n>((props, ref) => {\n  const {\n    strings: { editComposer: { cancel: { label = \"Cancel\" } = {} } = {} } = {},\n  } = useThreadConfig();\n  return (\n    <ComposerPrimitive.Cancel asChild>\n      <Button variant=\"ghost\" {...props} ref={ref}>\n        {props.children ?? label}\n      </Button>\n    </ComposerPrimitive.Cancel>\n  );\n});\n\nEditComposerCancel.displayName = \"EditComposerCancel\";\n\nnamespace EditComposerSend {\n  export type Element = HTMLButtonElement;\n  export type Props = Partial<ButtonProps>;\n}\n\nconst EditComposerSend = forwardRef<\n  EditComposerSend.Element,\n  EditComposerSend.Props\n>((props, ref) => {\n  const {\n    strings: { editComposer: { send: { label = \"Send\" } = {} } = {} } = {},\n  } = useThreadConfig();\n  return (\n    <ComposerPrimitive.Send asChild>\n      <Button {...props} ref={ref}>\n        {props.children ?? label}\n      </Button>\n    </ComposerPrimitive.Send>\n  );\n});\n\nEditComposerSend.displayName = \"EditComposerSend\";\n\nconst exports = {\n  Root: EditComposerRoot,\n  Input: EditComposerInput,\n  Footer: EditComposerFooter,\n  Cancel: EditComposerCancel,\n  Send: EditComposerSend,\n};\n\nexport default Object.assign(EditComposer, exports) as typeof EditComposer &\n  typeof exports;\n"],"names":[],"mappings":";;;;AAEA,SAAS,kBAA2B;AAU9B,cAEA,YAFA;AAPN,SAAS,oBAAoB;AAE7B,SAAS,yBAAyB;AADlC,SAAS,uBAAuB;AAFhC,SAAS,cAA2B;;;;;;;;AAKpC,IAAM,eAAmB,MAAM;IAC7B,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,OAAA,EAAC,kBAAA;QACC,UAAA;YAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,mBAAA,CAAA,CAAkB;YAEnB,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,OAAA,EAAC,oBAAA;gBACC,UAAA;oBAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,oBAAA,CAAA,CAAmB;oBACpB,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAC,kBAAA,CAAA,CAAiB;iBAAA;YAAA,CACpB;SAAA;IAAA,CACF;AAEJ;AAEA,aAAa,WAAA,GAAc;AAE3B,IAAM,uBAAmB,kMAAA,sOAAa,oBAAA,CAAkB,IAAA,EAAM;IAC5D,WAAW;AACb,CAAC;AAED,iBAAiB,WAAA,GAAc;AAE/B,IAAM,qBAAoB,qMAAA,sOAAa,oBAAA,CAAkB,KAAA,EAAO;IAC9D,WAAW;AACb,CAAC;AAED,kBAAkB,WAAA,GAAc;AAEhC,IAAM,yBAAqB,kMAAA,EAAa,OAAO;IAC7C,WAAW;AACb,CAAC;AAED,mBAAmB,WAAA,GAAc;AAOjC,IAAM,+NAAqB,aAAA,EAGzB,CAAC,OAAO,QAAQ;IAChB,MAAM,EACJ,SAAS,EAAE,cAAc,EAAE,QAAQ,EAAE,QAAQ,QAAA,CAAS,CAAA,GAAI,CAAC,CAAA,CAAE,CAAA,GAAI,CAAC,CAAA,CAAE,CAAA,GAAI,CAAC,CAAA,EAC3E,qLAAI,kBAAA,CAAgB;IACpB,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,sOAAC,oBAAA,CAAkB,MAAA,EAAlB;QAAyB,SAAO;QAC/B,UAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,8KAAC,SAAA,EAAA;YAAO,SAAQ;YAAS,GAAG,KAAA;YAAO;YAChC,UAAA,MAAM,QAAA,IAAY;QAAA,CACrB;IAAA,CACF;AAEJ,CAAC;AAED,mBAAmB,WAAA,GAAc;AAOjC,IAAM,6NAAmB,aAAA,EAGvB,CAAC,OAAO,QAAQ;IAChB,MAAM,EACJ,SAAS,EAAE,cAAc,EAAE,MAAM,EAAE,QAAQ,MAAA,CAAO,CAAA,GAAI,CAAC,CAAA,CAAE,CAAA,GAAI,CAAC,CAAA,CAAE,CAAA,GAAI,CAAC,CAAA,EACvE,IAAI,mMAAA,CAAgB;IACpB,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,sOAAC,oBAAA,CAAkB,IAAA,EAAlB;QAAuB,SAAO;QAC7B,UAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,8KAAC,SAAA,EAAA;YAAQ,GAAG,KAAA;YAAO;YAChB,UAAA,MAAM,QAAA,IAAY;QAAA,CACrB;IAAA,CACF;AAEJ,CAAC;AAED,iBAAiB,WAAA,GAAc;AAE/B,IAAM,UAAU;IACd,MAAM;IACN,OAAO;IACP,QAAQ;IACR,QAAQ;IACR,MAAM;AACR;AAEA,IAAO,wBAAQ,OAAO,MAAA,CAAO,cAAc,OAAO","ignoreList":[0]}},
    {"offset": {"line": 8389, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8395, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/ui/thread.tsx"],"sourcesContent":["\"use client\";\n\nimport { forwardRef, type FC } from \"react\";\nimport { ArrowDownIcon } from \"lucide-react\";\n\nimport { withDefaults } from \"./utils/withDefaults\";\nimport Composer from \"./composer\";\nimport ThreadWelcome from \"./thread-welcome\";\nimport { TooltipIconButton } from \"./base/tooltip-icon-button\";\nimport AssistantMessage from \"./assistant-message\";\nimport UserMessage from \"./user-message\";\nimport EditComposer from \"./edit-composer\";\nimport {\n  ThreadConfig,\n  ThreadConfigProvider,\n  ThreadConfigProviderProps,\n  useThreadConfig,\n} from \"./thread-config\";\nimport { ThreadPrimitive } from \"../primitives\";\nimport { useThread } from \"../context\";\n\nconst Thread: FC<ThreadConfig> = (config) => {\n  const {\n    components: {\n      Composer: ComposerComponent = Composer,\n      ThreadWelcome: ThreadWelcomeComponent = ThreadWelcome,\n      ...messageComponents\n    } = {},\n  } = config;\n  return (\n    <ThreadRoot config={config}>\n      <ThreadViewport>\n        <ThreadWelcomeComponent />\n        <ThreadMessages components={messageComponents} />\n        <ThreadFollowupSuggestions />\n        <ThreadViewportFooter>\n          <ThreadScrollToBottom />\n          <ComposerComponent />\n        </ThreadViewportFooter>\n      </ThreadViewport>\n    </ThreadRoot>\n  );\n};\n\nnamespace ThreadRoot {\n  export type Element = HTMLDivElement;\n  export type Props = ThreadPrimitive.Root.Props & ThreadConfigProviderProps;\n}\n\nconst ThreadRootStyled = withDefaults(ThreadPrimitive.Root, {\n  className: \"aui-root aui-thread-root\",\n});\n\nconst ThreadRoot = forwardRef<ThreadRoot.Element, ThreadRoot.Props>(\n  ({ config, ...props }, ref) => {\n    return (\n      <ThreadConfigProvider config={config}>\n        <ThreadRootStyled {...props} ref={ref} />\n      </ThreadConfigProvider>\n    );\n  },\n);\n\nThreadRoot.displayName = \"ThreadRoot\";\n\nconst ThreadViewport = withDefaults(ThreadPrimitive.Viewport, {\n  className: \"aui-thread-viewport\",\n});\n\nThreadViewport.displayName = \"ThreadViewport\";\n\nconst ThreadViewportFooter = withDefaults(\"div\", {\n  className: \"aui-thread-viewport-footer\",\n});\n\nThreadViewportFooter.displayName = \"ThreadViewportFooter\";\n\nconst ThreadMessages: FC<{\n  unstable_flexGrowDiv?: boolean;\n  components?: Partial<ThreadPrimitive.Messages.Props[\"components\"]>;\n}> = ({ components, unstable_flexGrowDiv: flexGrowDiv = true, ...rest }) => {\n  return (\n    <>\n      <ThreadPrimitive.Messages\n        components={{\n          ...components,\n          UserMessage: components?.UserMessage ?? UserMessage,\n          AssistantMessage: components?.AssistantMessage ?? AssistantMessage,\n          EditComposer: components?.EditComposer ?? EditComposer,\n        }}\n        {...rest}\n      />\n      {flexGrowDiv && (\n        <ThreadPrimitive.If empty={false}>\n          <div style={{ flexGrow: 1 }} />\n        </ThreadPrimitive.If>\n      )}\n    </>\n  );\n};\n\nThreadMessages.displayName = \"ThreadMessages\";\n\nconst ThreadFollowupSuggestions: FC = () => {\n  const suggestions = useThread((t) => t.suggestions);\n\n  return (\n    <ThreadPrimitive.If empty={false} running={false}>\n      <div className=\"aui-thread-followup-suggestions\">\n        {suggestions?.map((suggestion, idx) => (\n          <ThreadPrimitive.Suggestion\n            key={idx}\n            className=\"aui-thread-followup-suggestion\"\n            prompt={suggestion.prompt}\n            method=\"replace\"\n            autoSend\n          >\n            {suggestion.prompt}\n          </ThreadPrimitive.Suggestion>\n        ))}\n      </div>\n    </ThreadPrimitive.If>\n  );\n};\n\nconst ThreadScrollToBottomIconButton = withDefaults(TooltipIconButton, {\n  variant: \"outline\",\n  className: \"aui-thread-scroll-to-bottom\",\n});\n\nnamespace ThreadScrollToBottom {\n  export type Element = HTMLButtonElement;\n  export type Props = Partial<TooltipIconButton.Props>;\n}\n\nconst ThreadScrollToBottom = forwardRef<\n  ThreadScrollToBottom.Element,\n  ThreadScrollToBottom.Props\n>((props, ref) => {\n  const {\n    strings: {\n      thread: { scrollToBottom: { tooltip = \"Scroll to bottom\" } = {} } = {},\n    } = {},\n  } = useThreadConfig();\n  return (\n    <ThreadPrimitive.ScrollToBottom asChild>\n      <ThreadScrollToBottomIconButton tooltip={tooltip} {...props} ref={ref}>\n        {props.children ?? <ArrowDownIcon />}\n      </ThreadScrollToBottomIconButton>\n    </ThreadPrimitive.ScrollToBottom>\n  );\n});\n\nThreadScrollToBottom.displayName = \"ThreadScrollToBottom\";\n\nconst exports = {\n  Root: ThreadRoot,\n  Viewport: ThreadViewport,\n  Messages: ThreadMessages,\n  FollowupSuggestions: ThreadFollowupSuggestions,\n  ScrollToBottom: ThreadScrollToBottom,\n  ViewportFooter: ThreadViewportFooter,\n};\n\nexport default Object.assign(Thread, exports) as typeof Thread & typeof exports;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 8537, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8543, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/assistantModal/index.ts"],"sourcesContent":["export { AssistantModalPrimitiveRoot as Root } from \"./AssistantModalRoot\";\nexport { AssistantModalPrimitiveTrigger as Trigger } from \"./AssistantModalTrigger\";\nexport { AssistantModalPrimitiveContent as Content } from \"./AssistantModalContent\";\nexport { AssistantModalPrimitiveAnchor as Anchor } from \"./AssistantModalAnchor\";\n"],"names":[],"mappings":"","ignoreList":[0]}},
    {"offset": {"line": 8551, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8565, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/assistantModal/scope.tsx"],"sourcesContent":["import * as PopoverPrimitive from \"@radix-ui/react-popover\";\nimport type { Scope } from \"@radix-ui/react-context\";\n\nexport type ScopedProps<P> = P & { __scopeAssistantModal?: Scope };\nexport const usePopoverScope = PopoverPrimitive.createPopoverScope();\n"],"names":[],"mappings":";;;;AAAA,YAAY,sBAAsB;;AAI3B,IAAM,kBAAmC,oKAAA,kBAAA,CAAmB","ignoreList":[0]}},
    {"offset": {"line": 8574, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8580, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/assistantModal/AssistantModalAnchor.tsx"],"sourcesContent":["\"use client\";\nimport { ComponentPropsWithoutRef, ElementRef, forwardRef } from \"react\";\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\";\nimport { ScopedProps, usePopoverScope } from \"./scope\";\n\nexport namespace AssistantModalPrimitiveAnchor {\n  export type Element = ElementRef<typeof PopoverPrimitive.Anchor>;\n  export type Props = ComponentPropsWithoutRef<typeof PopoverPrimitive.Anchor>;\n}\n\nexport const AssistantModalPrimitiveAnchor = forwardRef<\n  AssistantModalPrimitiveAnchor.Element,\n  AssistantModalPrimitiveAnchor.Props\n>(\n  (\n    {\n      __scopeAssistantModal,\n      ...rest\n    }: ScopedProps<AssistantModalPrimitiveAnchor.Props>,\n    ref,\n  ) => {\n    const scope = usePopoverScope(__scopeAssistantModal);\n\n    return <PopoverPrimitive.Anchor {...scope} {...rest} ref={ref} />;\n  },\n);\nAssistantModalPrimitiveAnchor.displayName = \"AssistantModalPrimitive.Anchor\";\n"],"names":[],"mappings":";;;;AACA,SAA+C,kBAAkB;AAsBtD;AApBX,SAAsB,uBAAuB;AAD7C,YAAY,sBAAsB;;;;;;AAQ3B,IAAM,0OAAgC,aAAA,EAI3C,CACE,EACE,qBAAA,EACA,GAAG,MACL,EACA,QACG;IACH,MAAM,SAAQ,kNAAA,EAAgB,qBAAqB;IAEnD,OAAO,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAkB,oKAAA,MAAA,EAAjB;QAAyB,GAAG,KAAA;QAAQ,GAAG,IAAA;QAAM;IAAA,CAAU;AACjE;AAEF,8BAA8B,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 8604, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8610, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/assistantModal/AssistantModalContent.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, ElementRef, forwardRef } from \"react\";\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\";\nimport { ScopedProps, usePopoverScope } from \"./scope\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\n\nexport namespace AssistantModalPrimitiveContent {\n  export type Element = ElementRef<typeof PopoverPrimitive.Content>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof PopoverPrimitive.Content\n  > & {\n    dissmissOnInteractOutside?: boolean | undefined;\n  };\n}\n\nexport const AssistantModalPrimitiveContent = forwardRef<\n  AssistantModalPrimitiveContent.Element,\n  AssistantModalPrimitiveContent.Props\n>(\n  (\n    {\n      __scopeAssistantModal,\n      side,\n      align,\n      onInteractOutside,\n      dissmissOnInteractOutside = false,\n      ...props\n    }: ScopedProps<AssistantModalPrimitiveContent.Props>,\n    forwardedRef,\n  ) => {\n    const scope = usePopoverScope(__scopeAssistantModal);\n\n    return (\n      <PopoverPrimitive.Portal {...scope}>\n        <PopoverPrimitive.Content\n          {...scope}\n          {...props}\n          ref={forwardedRef}\n          side={side ?? \"top\"}\n          align={align ?? \"end\"}\n          onInteractOutside={composeEventHandlers(\n            onInteractOutside,\n            dissmissOnInteractOutside ? undefined : (e) => e.preventDefault(),\n          )}\n        />\n      </PopoverPrimitive.Portal>\n    );\n  },\n);\n\nAssistantModalPrimitiveContent.displayName = \"AssistantModalPrimitive.Content\";\n"],"names":[],"mappings":";;;;AAEA,SAA+C,kBAAkB;AAiCzD;AA/BR,SAAsB,uBAAuB;AAD7C,YAAY,sBAAsB;AAElC,SAAS,4BAA4B;;;;;;;AAW9B,IAAM,2OAAiC,aAAA,EAI5C,CACE,EACE,qBAAA,EACA,IAAA,EACA,KAAA,EACA,iBAAA,EACA,4BAA4B,KAAA,EAC5B,GAAG,OACL,EACA,iBACG;IACH,MAAM,yMAAQ,kBAAA,EAAgB,qBAAqB;IAEnD,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAkB,oKAAA,MAAA,EAAjB;QAAyB,GAAG,KAAA;QAC3B,UAAA,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAkB,oKAAA,OAAA,EAAjB;YACE,GAAG,KAAA;YACH,GAAG,KAAA;YACJ,KAAK;YACL,MAAM,QAAQ;YACd,OAAO,SAAS;YAChB,oLAAmB,uBAAA,EACjB,mBACA,4BAA4B,KAAA,IAAY,CAAC,IAAM,EAAE,cAAA,CAAe;QAClE;IACF,CACF;AAEJ;AAGF,+BAA+B,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 8642, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8648, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/assistantModal/AssistantModalRoot.tsx"],"sourcesContent":["\"use client\";\n\nimport { FC, useEffect, useState } from \"react\";\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { ScopedProps, usePopoverScope } from \"./scope\";\nimport { useThreadRuntime } from \"../../context\";\n\nexport namespace AssistantModalPrimitiveRoot {\n  export type Props = PopoverPrimitive.PopoverProps & {\n    unstable_openOnRunStart?: boolean | undefined;\n  };\n}\n\nconst useAssistantModalOpenState = ({\n  defaultOpen = false,\n  unstable_openOnRunStart = true,\n}: {\n  defaultOpen?: boolean | undefined;\n  unstable_openOnRunStart?: boolean | undefined;\n}) => {\n  const state = useState(defaultOpen);\n\n  const [, setOpen] = state;\n  const threadRuntime = useThreadRuntime();\n  useEffect(() => {\n    if (!unstable_openOnRunStart) return undefined;\n\n    return threadRuntime.unstable_on(\"run-start\", () => {\n      setOpen(true);\n    });\n  }, [unstable_openOnRunStart]);\n\n  return state;\n};\n\nexport const AssistantModalPrimitiveRoot: FC<\n  AssistantModalPrimitiveRoot.Props\n> = ({\n  __scopeAssistantModal,\n  defaultOpen,\n  unstable_openOnRunStart,\n  open,\n  onOpenChange,\n  ...rest\n}: ScopedProps<AssistantModalPrimitiveRoot.Props>) => {\n  const scope = usePopoverScope(__scopeAssistantModal);\n\n  const [modalOpen, setOpen] = useAssistantModalOpenState({\n    defaultOpen,\n    unstable_openOnRunStart,\n  });\n\n  return (\n    <PopoverPrimitive.Root\n      {...scope}\n      open={open === undefined ? modalOpen : open}\n      onOpenChange={composeEventHandlers(onOpenChange, setOpen)}\n      {...rest}\n    />\n  );\n};\n\nAssistantModalPrimitiveRoot.displayName = \"AssistantModalPrimitive.Root\";\n"],"names":[],"mappings":";;;;AAEA,SAAa,WAAW,gBAAgB;AAoDpC;AAhDJ,SAAS,wBAAwB;AADjC,SAAsB,uBAAuB;AAF7C,YAAY,sBAAsB;AAClC,SAAS,4BAA4B;;;;;;;;AAUrC,IAAM,6BAA6B,CAAC,EAClC,cAAc,KAAA,EACd,0BAA0B,IAAA,EAC5B,KAGM;IACJ,MAAM,YAAQ,iNAAA,EAAS,WAAW;IAElC,MAAM,CAAC,EAAE,OAAO,CAAA,GAAI;IACpB,MAAM,6MAAgB,mBAAA,CAAiB;IACvC,CAAA,GAAA,qMAAA,CAAA,YAAA,EAAU,MAAM;QACd,IAAI,CAAC,wBAAyB,CAAA,OAAO,KAAA;QAErC,OAAO,cAAc,WAAA,CAAY,aAAa,MAAM;YAClD,QAAQ,IAAI;QACd,CAAC;IACH,GAAG;QAAC,uBAAuB;KAAC;IAE5B,OAAO;AACT;AAEO,IAAM,8BAET,CAAC,EACH,qBAAA,EACA,WAAA,EACA,uBAAA,EACA,IAAA,EACA,YAAA,EACA,GAAG,MACL,KAAsD;IACpD,MAAM,yMAAQ,kBAAA,EAAgB,qBAAqB;IAEnD,MAAM,CAAC,WAAW,OAAO,CAAA,GAAI,2BAA2B;QACtD;QACA;IACF,CAAC;IAED,OACE,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAkB,oKAAA,IAAA,EAAjB;QACE,GAAG,KAAA;QACJ,MAAM,SAAS,KAAA,IAAY,YAAY;QACvC,+KAAc,uBAAA,EAAqB,cAAc,OAAO;QACvD,GAAG,IAAA;IAAA;AAGV;AAEA,4BAA4B,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 8695, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8701, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/primitives/assistantModal/AssistantModalTrigger.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, ElementRef, forwardRef } from \"react\";\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\";\nimport { ScopedProps, usePopoverScope } from \"./scope\";\n\nexport namespace AssistantModalPrimitiveTrigger {\n  export type Element = ElementRef<typeof PopoverPrimitive.Trigger>;\n  export type Props = ComponentPropsWithoutRef<typeof PopoverPrimitive.Trigger>;\n}\n\nexport const AssistantModalPrimitiveTrigger = forwardRef<\n  AssistantModalPrimitiveTrigger.Element,\n  AssistantModalPrimitiveTrigger.Props\n>(\n  (\n    {\n      __scopeAssistantModal,\n      ...rest\n    }: ScopedProps<AssistantModalPrimitiveTrigger.Props>,\n    ref,\n  ) => {\n    const scope = usePopoverScope(__scopeAssistantModal);\n\n    return <PopoverPrimitive.Trigger {...scope} {...rest} ref={ref} />;\n  },\n);\n\nAssistantModalPrimitiveTrigger.displayName = \"AssistantModalPrimitive.Trigger\";\n"],"names":[],"mappings":";;;;AAEA,SAA+C,kBAAkB;AAsBtD;AApBX,SAAsB,uBAAuB;AAD7C,YAAY,sBAAsB;;;;;;AAQ3B,IAAM,2OAAiC,aAAA,EAI5C,CACE,EACE,qBAAA,EACA,GAAG,MACL,EACA,QACG;IACH,MAAM,SAAQ,kNAAA,EAAgB,qBAAqB;IAEnD,OAAO,aAAA,GAAA,CAAA,GAAA,uNAAA,CAAA,MAAA,EAAkB,oKAAA,OAAA,EAAjB;QAA0B,GAAG,KAAA;QAAQ,GAAG,IAAA;QAAM;IAAA,CAAU;AAClE;AAGF,+BAA+B,WAAA,GAAc","ignoreList":[0]}},
    {"offset": {"line": 8725, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8772, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-v2/node_modules/%40assistant-ui/react/src/ui/assistant-modal.tsx"],"sourcesContent":["\"use client\";\n\nimport { type FC, forwardRef } from \"react\";\nimport { BotIcon, ChevronDownIcon } from \"lucide-react\";\n\nimport { AssistantModalPrimitive } from \"../primitives\";\nimport Thread from \"./thread\";\nimport { withDefaults } from \"./utils/withDefaults\";\nimport { TooltipIconButton } from \"./base/tooltip-icon-button\";\nimport {\n  ThreadConfig,\n  ThreadConfigProvider,\n  ThreadConfigProviderProps,\n  useThreadConfig,\n} from \"./thread-config\";\n\nconst AssistantModal: FC<ThreadConfig> = (config) => {\n  return (\n    <AssistantModalRoot config={config}>\n      <AssistantModalTrigger />\n      <AssistantModalContent>\n        <Thread />\n      </AssistantModalContent>\n    </AssistantModalRoot>\n  );\n};\n\nAssistantModal.displayName = \"AssistantModal\";\n\nnamespace AssistantModalRoot {\n  export type Props = AssistantModalPrimitive.Root.Props &\n    ThreadConfigProviderProps;\n}\n\nconst AssistantModalRoot: FC<AssistantModalRoot.Props> = ({\n  config,\n  ...props\n}) => {\n  return (\n    <ThreadConfigProvider config={config}>\n      <AssistantModalPrimitive.Root {...props} />\n    </ThreadConfigProvider>\n  );\n};\n\nAssistantModalRoot.displayName = \"AssistantModalRoot\";\n\nnamespace AssistantModalTrigger {\n  export type Element = HTMLButtonElement;\n  export type Props = Partial<TooltipIconButton.Props>;\n}\n\nconst AssistantModalTrigger = forwardRef<\n  AssistantModalTrigger.Element,\n  AssistantModalTrigger.Props\n>((props, ref) => {\n  return (\n    <AssistantModalAnchor>\n      <AssistantModalPrimitive.Trigger asChild>\n        <AssistantModalButton {...props} ref={ref} />\n      </AssistantModalPrimitive.Trigger>\n    </AssistantModalAnchor>\n  );\n});\n\nAssistantModalTrigger.displayName = \"AssistantModalTrigger\";\n\nconst AssistantModalAnchor = withDefaults(AssistantModalPrimitive.Anchor, {\n  className: \"aui-root aui-modal-anchor\",\n});\n\nAssistantModalAnchor.displayName = \"AssistantModalAnchor\";\n\nconst ModalButtonStyled = withDefaults(TooltipIconButton, {\n  variant: \"default\",\n  className: \"aui-modal-button\",\n});\n\nnamespace AssistantModalButton {\n  export type Element = HTMLButtonElement;\n  export type Props = Partial<TooltipIconButton.Props> & {\n    \"data-state\"?: \"open\" | \"closed\";\n  };\n}\n\nconst AssistantModalButton = forwardRef<\n  AssistantModalButton.Element,\n  AssistantModalButton.Props\n>(({ \"data-state\": state, ...rest }, ref) => {\n  const {\n    strings: {\n      assistantModal: {\n        open: {\n          button: { tooltip: openTooltip = \"Close Assistant\" } = {},\n        } = {},\n        closed: {\n          button: { tooltip: closedTooltip = \"Open Assistant\" } = {},\n        } = {},\n      } = {},\n    } = {},\n  } = useThreadConfig();\n  const tooltip = state === \"open\" ? openTooltip : closedTooltip;\n\n  return (\n    <ModalButtonStyled\n      side=\"left\"\n      tooltip={tooltip}\n      data-state={state}\n      {...rest}\n      ref={ref}\n    >\n      {rest.children ?? (\n        <>\n          <BotIcon\n            data-state={state}\n            className=\"aui-modal-button-closed-icon\"\n          />\n          <ChevronDownIcon\n            data-state={state}\n            className=\"aui-modal-button-open-icon\"\n          />\n        </>\n      )}\n    </ModalButtonStyled>\n  );\n});\n\nAssistantModalButton.displayName = \"AssistantModalButton\";\n\nconst AssistantModalContent = withDefaults(AssistantModalPrimitive.Content, {\n  className: \"aui-root aui-modal-content\",\n  sideOffset: 16,\n});\n\nAssistantModalContent.displayName = \"AssistantModalContent\";\n\nconst exports = {\n  Root: AssistantModalRoot,\n  Trigger: AssistantModalTrigger,\n  Content: AssistantModalContent,\n  Button: AssistantModalButton,\n  Anchor: AssistantModalAnchor,\n};\n\nexport default Object.assign(AssistantModal, exports) as typeof AssistantModal &\n  typeof exports;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 8874, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}