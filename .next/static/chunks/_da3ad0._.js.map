{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-community/lib/chatApi.ts"],"sourcesContent":["import { Client, ThreadState } from \"@langchain/langgraph-sdk\";\nimport { LangChainMessage } from \"@assistant-ui/react-langgraph\";\n\nconst createClient = () => {\n  const apiUrl =\n    process.env[\"NEXT_PUBLIC_LANGGRAPH_API_URL\"] ||\n    new URL(\"/api\", window.location.href).href;\n  return new Client({\n    apiUrl,\n  });\n};\n\nexport const createThread = async () => {\n  const client = createClient();\n  return client.threads.create();\n};\n\nexport const getThreadState = async (\n  threadId: string\n): Promise<ThreadState> => {\n  const client = createClient();\n  return client.threads.getState(threadId);\n};\n\nexport const sendMessage = async (params: {\n  threadId: string;\n  messages: LangChainMessage[];\n}) => {\n  const client = createClient();\n  return client.runs.stream(\n    params.threadId,\n    process.env[\"NEXT_PUBLIC_LANGGRAPH_ASSISTANT_ID\"]!,\n    {\n      input: {\n        messages: params.messages,\n      },\n      streamMode: \"messages\",\n    }\n  );\n};\n"],"names":[],"mappings":";;;;;AAAA;AAKI;AALJ;;AAGA,MAAM,eAAe;IACnB,MAAM,SACJ,gKAAA,CAAA,UAAO,CAAC,GAAG,CAAC,gCAAgC,IAC5C,IAAI,IAAI,QAAQ,OAAO,QAAQ,CAAC,IAAI,EAAE,IAAI;IAC5C,OAAO,IAAI,oKAAA,CAAA,SAAM,CAAC;QAChB;IACF;AACF;AAEO,MAAM,eAAe;IAC1B,MAAM,SAAS;IACf,OAAO,OAAO,OAAO,CAAC,MAAM;AAC9B;AAEO,MAAM,iBAAiB,OAC5B;IAEA,MAAM,SAAS;IACf,OAAO,OAAO,OAAO,CAAC,QAAQ,CAAC;AACjC;AAEO,MAAM,cAAc,OAAO;IAIhC,MAAM,SAAS;IACf,OAAO,OAAO,IAAI,CAAC,MAAM,CACvB,OAAO,QAAQ,4EAEf;QACE,OAAO;YACL,UAAU,OAAO,QAAQ;QAC3B;QACA,YAAY;IACd;AAEJ"}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivo/Development/cap-frontend-community/components/MyAssistant.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRef } from \"react\";\nimport { AssistantModal, Thread } from \"@assistant-ui/react\";\nimport { useLangGraphRuntime, LangChainMessage } from \"@assistant-ui/react-langgraph\";\nimport { makeMarkdownText } from \"@assistant-ui/react-markdown\";\n\nimport { createThread, getThreadState, sendMessage } from \"../lib/chatApi\";\n\nconst MarkdownText = makeMarkdownText();\n\nexport function MyAssistantModal() {\n  const threadIdRef = useRef<string | undefined>();\n  const runtime = useLangGraphRuntime({\n    threadId: threadIdRef.current,\n    stream: async (messages) => {\n      if (!threadIdRef.current) {\n        const { thread_id } = await createThread();\n        threadIdRef.current = thread_id;\n      }\n      const threadId = threadIdRef.current;\n      return sendMessage({\n        threadId,\n        messages,\n      });\n    },\n    onSwitchToNewThread: async () => {\n      const { thread_id } = await createThread();\n      threadIdRef.current = thread_id;\n    },\n    onSwitchToThread: async (threadId) => {\n      const state = await getThreadState(threadId);\n      threadIdRef.current = threadId;\n      return { messages: (state.values as { messages: LangChainMessage[] }).messages };\n    },\n  });\n\n  return (\n    <AssistantModal\n      runtime={runtime}\n      assistantMessage={{ components: { Text: MarkdownText } }}\n    />\n  );\n}\n\nexport function MyAssistant() {\n  const threadIdRef = useRef<string | undefined>();\n  const runtime = useLangGraphRuntime({\n    threadId: threadIdRef.current,\n    stream: async (messages) => {\n      if (!threadIdRef.current) {\n        const { thread_id } = await createThread();\n        threadIdRef.current = thread_id;\n      }\n      const threadId = threadIdRef.current;\n      return sendMessage({\n        threadId,\n        messages,\n      });\n    },\n    onSwitchToNewThread: async () => {\n      const { thread_id } = await createThread();\n      threadIdRef.current = thread_id;\n    },\n    onSwitchToThread: async (threadId) => {\n      const state = await getThreadState(threadId);\n      threadIdRef.current = threadId;\n      return { messages: (state.values as { messages: LangChainMessage[] }).messages };\n    },\n  });\n\n  return (\n    <Thread\n      runtime={runtime}\n      assistantMessage={{ components: { Text: MarkdownText } }}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAKA;AAHA;AACA;AAFA;AAAA;;;AAHA;;;;;;AASA,MAAM,eAAe,CAAA,GAAA,4LAAA,CAAA,mBAAgB,AAAD;AAE7B,SAAS;;IACd,MAAM,cAAc,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD;IACzB,MAAM,UAAU,CAAA,GAAA,4KAAA,CAAA,sBAAmB,AAAD,EAAE;QAClC,UAAU,YAAY,OAAO;QAC7B,MAAM;6DAAE,OAAO;gBACb,IAAI,CAAC,YAAY,OAAO,EAAE;oBACxB,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,CAAA,GAAA,iHAAA,CAAA,eAAY,AAAD;oBACvC,YAAY,OAAO,GAAG;gBACxB;gBACA,MAAM,WAAW,YAAY,OAAO;gBACpC,OAAO,CAAA,GAAA,iHAAA,CAAA,cAAW,AAAD,EAAE;oBACjB;oBACA;gBACF;YACF;;QACA,mBAAmB;6DAAE;gBACnB,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,CAAA,GAAA,iHAAA,CAAA,eAAY,AAAD;gBACvC,YAAY,OAAO,GAAG;YACxB;;QACA,gBAAgB;6DAAE,OAAO;gBACvB,MAAM,QAAQ,MAAM,CAAA,GAAA,iHAAA,CAAA,iBAAc,AAAD,EAAE;gBACnC,YAAY,OAAO,GAAG;gBACtB,OAAO;oBAAE,UAAU,AAAC,MAAM,MAAM,CAAsC,QAAQ;gBAAC;YACjF;;IACF;IAEA,qBACE,6LAAC,+NAAA,CAAA,iBAAc;QACb,SAAS;QACT,kBAAkB;YAAE,YAAY;gBAAE,MAAM;YAAa;QAAE;;;;;;AAG7D;GAhCgB;;QAEE,4KAAA,CAAA,sBAAmB;;;KAFrB;AAkCT,SAAS;;IACd,MAAM,cAAc,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD;IACzB,MAAM,UAAU,CAAA,GAAA,4KAAA,CAAA,sBAAmB,AAAD,EAAE;QAClC,UAAU,YAAY,OAAO;QAC7B,MAAM;wDAAE,OAAO;gBACb,IAAI,CAAC,YAAY,OAAO,EAAE;oBACxB,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,CAAA,GAAA,iHAAA,CAAA,eAAY,AAAD;oBACvC,YAAY,OAAO,GAAG;gBACxB;gBACA,MAAM,WAAW,YAAY,OAAO;gBACpC,OAAO,CAAA,GAAA,iHAAA,CAAA,cAAW,AAAD,EAAE;oBACjB;oBACA;gBACF;YACF;;QACA,mBAAmB;wDAAE;gBACnB,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,CAAA,GAAA,iHAAA,CAAA,eAAY,AAAD;gBACvC,YAAY,OAAO,GAAG;YACxB;;QACA,gBAAgB;wDAAE,OAAO;gBACvB,MAAM,QAAQ,MAAM,CAAA,GAAA,iHAAA,CAAA,iBAAc,AAAD,EAAE;gBACnC,YAAY,OAAO,GAAG;gBACtB,OAAO;oBAAE,UAAU,AAAC,MAAM,MAAM,CAAsC,QAAQ;gBAAC;YACjF;;IACF;IAEA,qBACE,6LAAC,2MAAA,CAAA,SAAM;QACL,SAAS;QACT,kBAAkB;YAAE,YAAY;gBAAE,MAAM;YAAa;QAAE;;;;;;AAG7D;IAhCgB;;QAEE,4KAAA,CAAA,sBAAmB;;;MAFrB"}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}